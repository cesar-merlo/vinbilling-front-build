(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hdHI:function(t,e,n){"use strict";n.r(e),n.d(e,"routes",(function(){return te})),n.d(e,"InvoiceModule",(function(){return ee}));var i=n("ofXK"),o=n("M9IT"),c=n("Dh3D"),r=n("+0xr"),l=n("mrSG"),a=n("3Pt+"),s=n("0IaG"),b=n("AJa1"),d=n("fXoL"),u=n("8zvB"),g=n("W7lO"),p=n("38VU"),h=n("nUUR"),v=n("NFeN");function m(t,e){if(1&t&&(d.Ub(0,"div",30),d.Lc(1),d.Tb()),2&t){const t=d.jc();d.Bb(1),d.Nc(" ",null!=t.vehicleForm.controls.vin.errors&&t.vehicleForm.controls.vin.errors.faliedSearch?"VIN not found":"Invalid VIN"," ")}}function f(t,e){if(1&t&&(d.Ub(0,"option",31),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}function _(t,e){if(1&t&&(d.Ub(0,"option",31),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}function O(t,e){if(1&t&&(d.Ub(0,"option",31),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}let C=(()=>{class t{constructor(t,e,n,i,o,c,r){this.dialogRef=t,this.data=e,this.fb=n,this.vehicleService=i,this.invoicesState=o,this.notificationService=c,this.rateService=r,this.subscriptions=[],this.years=[],this.makes=[],this.models=[],this.buildForm();const l=this.invoicesState.selectedInvoice$.subscribe(t=>{var e;this.selectedInvoice=t;const n=this.rateService.rates.subscribe(t=>{var e,n,i,o,c,r,l;const a=null===(i=(null===(e=this.selectedInvoice)||void 0===e?void 0:e.ship_from)||(null===(n=this.selectedInvoice)||void 0===n?void 0:n.quick_ship_from))||void 0===i?void 0:i.city,s=null===(r=(null===(o=this.selectedInvoice)||void 0===o?void 0:o.ship_to)||(null===(c=this.selectedInvoice)||void 0===c?void 0:c.quick_ship_to))||void 0===r?void 0:r.city;this.rate=t.find(t=>`${t.origination_city.name}_${t.origination_city.state_code}_${t.destination_city.name}_${t.destination_city.state_code}`==`${null==a?void 0:a.name}_${null==a?void 0:a.state_code}_${null==s?void 0:s.name}_${null==s?void 0:s.state_code}`),(null===(l=this.rate)||void 0===l?void 0:l.amount)&&this.vehicleForm.controls.amount.setValue(this.rate.amount)});this.subscriptions.push(n),(null===(e=this.rateService.rates.value)||void 0===e?void 0:e.length)||this.rateService.fetchRates()});this.subscriptions.push(l)}ngOnInit(){this.years=this.vehicleService.years}onSelectYear(t){this.makes=this.vehicleService.makes}onSelectMake(t){return Object(l.a)(this,void 0,void 0,(function*(){this.models=yield this.vehicleService.getModelsByMake(t.target.value),this.vehicleForm.controls.model.setValue("")}))}buildForm(){this.vehicleForm=this.fb.group({vin:["",[a.v.required,a.v.pattern(b.a.vin)]],year:["",[a.v.required]],make:["",[a.v.required]],model:["",[a.v.required]],amount:["",[a.v.required]],weight:["",[]],comments:["",[]]})}onSearchVin(t){this.vehicleForm.controls.vin.valid&&this.vehicleService.searchVin(t.target.value.toUpperCase()).then(t=>{this.vehicleSearched=t,this.makes.push(t.make),this.models.push(t.model),this.vehicleForm.controls.year.setValue(t.year),this.vehicleForm.controls.make.setValue(t.make),this.vehicleForm.controls.model.setValue(t.model),this.vehicleForm.controls.weight.setValue(t.weight)}).catch(t=>{this.vehicleSearched=null,this.vehicleForm.controls.vin.setErrors({faliedSearch:!0}),this.vehicleForm.controls.vin.markAsTouched()})}onSubmit(){var t;const e=this.vehicleForm.controls.vin;if(e.setValue(null===(t=e.value)||void 0===t?void 0:t.toUpperCase()),this.vehicleForm.invalid)return Object.values(this.vehicleForm.controls).forEach(t=>{t instanceof a.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});try{"edit"===this.data.action?this.invoicesState.addSelectedInvoiceVehicle(this.vehicleForm.value):this.invoicesState.addNewInvoiceVehicle(this.vehicleForm.value)}catch(n){return this.notificationService.error(n.message)}this.data.onBackToInvoice()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(a.e),d.Ob(u.a),d.Ob(g.a),d.Ob(p.a),d.Ob(h.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-add-vehicle-dialog"]],decls:63,vars:21,consts:[[1,"form-group",3,"formGroup","ngSubmit"],[1,"w-100","input-group","pt-2","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search VIN...","formControlName","vin",1,"form-control",3,"input"],["class","form-text invalid-feedback",4,"ngIf"],[1,"w-100","mb-3"],["for","year",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["formControlName","year",1,"custom-select","form-control",3,"change"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","make",1,"text-dark","text-base"],["formControlName","make",1,"custom-select","form-control",3,"change"],["for","model",1,"text-dark","text-base"],["formControlName","model",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],["type","number","placeholder","Amount...","formControlName","amount",1,"form-control"],["for","weight",1,"text-dark","text-base"],["type","number","placeholder","Weight...","formControlName","weight",1,"form-control"],[1,"w-100"],["for","comments",1,"text-dark","text-base"],["id","textarea","maxlength","256","rows","3","formControlName","comments",1,"form-control"],[1,"d-flex","w-100","px-4","pt-3","justify-content-between","mt-3"],[1,"col-5"],["type","button",1,"btn","w-100","btn-outline-secondary",3,"click"],[1,"btn","w-100","btn-success"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){1&t&&(d.Ub(0,"h3"),d.Lc(1,"Add vehicle"),d.Tb(),d.Ub(2,"form",0),d.fc("ngSubmit",(function(){return e.onSubmit()})),d.Ub(3,"div",1),d.Ub(4,"div",2),d.Ub(5,"span",3),d.Pb(6,"i",4),d.Tb(),d.Tb(),d.Ub(7,"input",5),d.fc("input",(function(t){return e.onSearchVin(t)})),d.Tb(),d.Jc(8,m,2,1,"div",6),d.Tb(),d.Ub(9,"div",7),d.Ub(10,"label",8),d.Lc(11,"Year"),d.Tb(),d.Ub(12,"div",9),d.Ub(13,"select",10),d.fc("change",(function(t){return e.onSelectYear(t)})),d.Ub(14,"option",11),d.Lc(15,"Select year..."),d.Tb(),d.Jc(16,f,2,2,"option",12),d.Tb(),d.Pb(17,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(18,"div",7),d.Ub(19,"label",14),d.Lc(20,"Make"),d.Tb(),d.Ub(21,"div",9),d.Ub(22,"select",15),d.fc("change",(function(t){return e.onSelectMake(t)})),d.Ub(23,"option",11),d.Lc(24,"Select make..."),d.Tb(),d.Jc(25,_,2,2,"option",12),d.Tb(),d.Pb(26,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(27,"div",7),d.Ub(28,"label",16),d.Lc(29,"Model"),d.Tb(),d.Ub(30,"div",9),d.Ub(31,"select",17),d.Ub(32,"option",11),d.Lc(33,"Select model..."),d.Tb(),d.Jc(34,O,2,2,"option",12),d.Tb(),d.Pb(35,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(36,"div",7),d.Ub(37,"label",18),d.Lc(38,"Amount"),d.Tb(),d.Ub(39,"div",19),d.Ub(40,"div",2),d.Ub(41,"span",3),d.Lc(42," $ "),d.Tb(),d.Tb(),d.Pb(43,"input",20),d.Tb(),d.Tb(),d.Ub(44,"div",7),d.Ub(45,"label",21),d.Lc(46,"Weight"),d.Tb(),d.Ub(47,"div",19),d.Ub(48,"div",2),d.Ub(49,"span",3),d.Lc(50," Kg "),d.Tb(),d.Tb(),d.Pb(51,"input",22),d.Tb(),d.Tb(),d.Ub(52,"div",23),d.Ub(53,"label",24),d.Lc(54,"Comments"),d.Tb(),d.Pb(55,"textarea",25),d.Tb(),d.Ub(56,"div",26),d.Ub(57,"div",27),d.Ub(58,"button",28),d.fc("click",(function(){return e.data.onBackToInvoice()})),d.Lc(59,"Cancel"),d.Tb(),d.Tb(),d.Ub(60,"div",27),d.Ub(61,"button",29),d.Lc(62,"Add"),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Bb(2),d.pc("formGroup",e.vehicleForm),d.Bb(5),d.Gb("is-invalid",e.vehicleForm.controls.vin.touched&&e.vehicleForm.controls.vin.invalid)("is-valid",!!e.vehicleSearched),d.Bb(1),d.pc("ngIf",!0),d.Bb(5),d.Gb("is-invalid",e.vehicleForm.controls.year.touched&&e.vehicleForm.controls.year.invalid),d.Bb(3),d.pc("ngForOf",e.years),d.Bb(6),d.Gb("is-invalid",e.vehicleForm.controls.make.touched&&e.vehicleForm.controls.make.invalid),d.Bb(3),d.pc("ngForOf",e.makes),d.Bb(6),d.Gb("is-invalid",e.vehicleForm.controls.model.touched&&e.vehicleForm.controls.model.invalid),d.Bb(3),d.pc("ngForOf",e.models),d.Bb(9),d.Gb("is-invalid",e.vehicleForm.controls.amount.touched&&e.vehicleForm.controls.amount.invalid),d.Bb(8),d.Gb("is-invalid",e.vehicleForm.controls.weight.touched&&e.vehicleForm.controls.weight.invalid),d.Bb(4),d.Gb("is-invalid",e.vehicleForm.controls.comments.touched&&e.vehicleForm.controls.comments.invalid))},directives:[a.x,a.p,a.i,a.d,a.o,a.g,i.n,a.u,a.r,a.w,i.m,v.a,a.s,a.k],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),t})();var M=n("Sdjb");function P(t,e){1&t&&(d.Ub(0,"div",13),d.Ub(1,"p",14),d.Lc(2,"No customers found"),d.Tb(),d.Tb())}function w(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr",15),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().onSelect(n)})),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit;d.Bb(2),d.Mc(t.name)}}function T(t,e){1&t&&(d.Ub(0,"div",13),d.Ub(1,"p",14),d.Lc(2,"No customers found"),d.Tb(),d.Tb())}function x(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr",15),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().onSelect(n)})),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit;d.Bb(2),d.Mc(t.name)}}let k=(()=>{class t{constructor(t,e,n,i){this.dialogRef=t,this.data=e,this.customerService=n,this.invoicesState=i,this.subscriptions=[],this.foundCustomers=[],this.mostRecentsCustomers=[]}backToInvoice(){this.data.onBackToInvoice()}ngOnInit(){const t=this.invoicesState.mostRecentsCustomers$.subscribe(t=>{this.mostRecentsCustomers=t});this.subscriptions.push(t)}searchCustomers(t){return Object(l.a)(this,void 0,void 0,(function*(){const e=t.target.value;this.foundCustomers=yield this.customerService.searchCustomers(e)}))}onSelect(t){"edit"===this.data.action?this.invoicesState.setSelectedInvoice({bill_to:t}):this.invoicesState.setNewInvoice({bill_to:t}),this.data.onBackToInvoice()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(M.a),d.Ob(g.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-bill-to-dialog"]],decls:30,vars:4,consts:[[1,"input-group","pt-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search customer...",1,"form-control",3,"input"],[1,"w-100","text-secondary","text-sm"],[1,"w-100","my-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","table-bordered"],["scope","col"],["class","w-100 text-center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"w-100","mt-3"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"w-100","text-center"],[1,"border","py-2"],[3,"click"]],template:function(t,e){1&t&&(d.Ub(0,"h3"),d.Lc(1,"Bill to"),d.Tb(),d.Ub(2,"div",0),d.Ub(3,"div",1),d.Ub(4,"span",2),d.Pb(5,"i",3),d.Tb(),d.Tb(),d.Ub(6,"input",4),d.fc("input",(function(t){return e.searchCustomers(t)})),d.Tb(),d.Ub(7,"div",5),d.Lc(8,"Min 3 characters"),d.Tb(),d.Tb(),d.Ub(9,"div",6),d.Ub(10,"table",7),d.Ub(11,"thead"),d.Ub(12,"tr"),d.Ub(13,"th",8),d.Lc(14,"Customer list"),d.Tb(),d.Tb(),d.Tb(),d.Ub(15,"tbody"),d.Jc(16,P,3,0,"div",9),d.Jc(17,w,3,1,"tr",10),d.Tb(),d.Tb(),d.Tb(),d.Ub(18,"div",6),d.Ub(19,"table",7),d.Ub(20,"thead"),d.Ub(21,"tr"),d.Ub(22,"th",8),d.Lc(23,"Most recent"),d.Tb(),d.Tb(),d.Tb(),d.Ub(24,"tbody"),d.Jc(25,T,3,0,"div",9),d.Jc(26,x,3,1,"tr",10),d.Tb(),d.Tb(),d.Tb(),d.Ub(27,"div",11),d.Ub(28,"button",12),d.fc("click",(function(){return e.backToInvoice()})),d.Lc(29,"Back to invoice"),d.Tb(),d.Tb()),2&t&&(d.Bb(16),d.pc("ngIf",!(null!=e.foundCustomers&&e.foundCustomers.length)),d.Bb(1),d.pc("ngForOf",e.foundCustomers),d.Bb(8),d.pc("ngIf",!(null!=e.mostRecentsCustomers&&e.mostRecentsCustomers.length)),d.Bb(1),d.pc("ngForOf",e.mostRecentsCustomers))},directives:[i.n,i.m],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative;text-align:center}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}"]}),t})();var U=n("RaVz"),S=n("lJxs"),y=n("AytR"),I=n("tk/3");let B=(()=>{class t{constructor(t,e){this.http=t,this.invoicesState=e,this.baseUrl=y.a.apiUrl,this.currentLimit=0,this.currentPage=0,this.currentStatus="DRAFT",this.invoicesState.currentOptionsFetched$.subscribe(t=>{this.currentLimit=t.limit,this.currentPage=t.page,this.currentStatus=t.status})}fetchInvoices(t,e=0,n=0){return this.invoicesState.setCurrentOptionsFetched({limit:e,page:n,status:t}),new Promise((i,o)=>{let c=`${this.baseUrl}/invoices/admin?limit=${e}&page=${n}`;c+=t?`&status=${t}`:"&status=DRAFT&status=SUBMITTED_FOR_REVIEW&status=SUBMITTED_TO_CUSTOMER",this.http.get(c).subscribe(t=>{this.invoicesState.setInvoices(t.results),i(t)},t=>{o(t)})})}saveInvoice(t){return this.http.post(`${this.baseUrl}/invoices/admin`,t).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}updateInvoice(t,e){return this.http.put(`${this.baseUrl}/invoices/admin/${e}`,t).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}deleteInvoice(t){return this.http.delete(`${this.baseUrl}/invoices/admin/${t}`).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}submitDraftInvoices(t){return this.http.post(`${this.baseUrl}/invoices/admin/submitToReview`,{invoices:t}).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}submitInvoicesToQB(t){return this.http.post(`${this.baseUrl}/invoices/admin/submitToQB`,{invoices:t}).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}submitInvoicesToPaid(t){return this.http.post(`${this.baseUrl}/invoices/admin/submitToPaid`,{invoices:t}).pipe(Object(S.a)(t=>(this.fetchInvoices(this.currentStatus,this.currentLimit,this.currentPage),t)))}exportToPdf(t){return new Promise((e,n)=>{this.http.post(`${this.baseUrl}/invoices/exportToPdf`,{invoices:t.map(t=>t.id)},{responseType:"arraybuffer"}).subscribe(t=>{const n=new Blob([t],{type:"application/zip"}),i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.setAttribute("download","invoices.zip"),document.body.appendChild(o),o.click(),e(!0)},t=>n(!1))})}}return t.\u0275fac=function(e){return new(e||t)(d.cc(I.b),d.cc(g.a))},t.\u0275prov=d.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=n("Xa2L");let F=(()=>{class t{transform(t,...e){return`${null==t?void 0:t.name}, ${null==t?void 0:t.state_code}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Nb({name:"location",type:t,pure:!0}),t})();function D(t,e){1&t&&(d.Ub(0,"div",33),d.Pb(1,"mat-spinner",34),d.Tb()),2&t&&(d.Bb(1),d.pc("diameter",50))}function z(t,e){1&t&&(d.Ub(0,"option",35),d.Lc(1,"Select driver..."),d.Tb())}function E(t,e){if(1&t&&(d.Ub(0,"option",36),d.Ub(1,"span"),d.Lc(2),d.kc(3,"titlecase"),d.kc(4,"titlecase"),d.Tb(),d.Lc(5),d.Tb()),2&t){const t=e.$implicit,n=d.jc();d.pc("value",t.id)("selected",t.id===(null==n.invoice?null:n.invoice.driver)),d.Bb(2),d.Oc("",d.lc(3,5,t.first_name)," ",d.lc(4,7,t.last_name),""),d.Bb(3),d.Nc(" - ",t.email," ")}}function R(t,e){if(1&t&&(d.Ub(0,"option",36),d.Lc(1),d.Tb()),2&t){const t=e.$implicit,n=d.jc();d.pc("value",t.value)("selected",(null==n.invoice?null:n.invoice.status)&&t.value===(null==n.invoice?null:n.invoice.status)),d.Bb(1),d.Nc(" ",t.label," ")}}function V(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr"),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Ub(3,"td"),d.Lc(4),d.Tb(),d.Ub(5,"td"),d.Lc(6),d.kc(7,"currency"),d.Tb(),d.Ub(8,"td",37),d.Ub(9,"button",38),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().data.onEditVehicle(n)})),d.Pb(10,"i",39),d.Tb(),d.Ub(11,"button",38),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().data.onDeleteVehicle(n)})),d.Pb(12,"i",40),d.Tb(),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit;d.Bb(2),d.Pc("",t.year," ",t.make," ",t.model,""),d.Bb(2),d.Mc(t.vin),d.Bb(2),d.Mc(d.lc(7,5,t.amount))}}function $(t,e){1&t&&(d.Ub(0,"div",41),d.Ub(1,"p",42),d.Lc(2,"No vehicles added"),d.Tb(),d.Tb())}const j=[{value:"DRAFT",label:"Draft"},{value:"SUBMITTED_FOR_REVIEW",label:"Submitted for review"}];let q=(()=>{class t{constructor(t,e,n,i,o,c,r,l){this.dialogRef=t,this.data=e,this.userService=n,this.invoicesState=i,this.rateService=o,this.notificationService=c,this.invoiceService=r,this.customerService=l,this.subscriptions=[],this.statuses=j,this.isLoading=!1;const a=this.userService.users.subscribe(t=>{this.drivers=t}),s=this.invoicesState.newInvoice$.subscribe(t=>{this.invoice=t});this.subscriptions.push(a,s)}ngOnInit(){this.userService.fetchUsers();const t=this.customerService.getMostRecents().subscribe(t=>{this.invoicesState.setMostRecentsCustomers(t)});this.subscriptions.push(t)}onSelectDriver(t){this.invoicesState.setNewInvoice({driver:this.drivers.find(e=>e.id===t.target.value)})}onSelectStatus(t){this.invoicesState.setNewInvoice({status:t.target.value})}onStepChange(t){var e,n,i,o,c,r,l,a;if(this.data.setCurrentStep(t.selectedIndex),1===t.selectedIndex){const t=null!==(n=null===(e=this.invoice)||void 0===e?void 0:e.ship_from)&&void 0!==n?n:{},s=null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_to)&&void 0!==o?o:{},b=`${null===(c=t.city)||void 0===c?void 0:c.name}_${null===(r=t.city)||void 0===r?void 0:r.state_code}_${null===(l=s.city)||void 0===l?void 0:l.name}_${null===(a=s.city)||void 0===a?void 0:a.state_code}`;this.rateService.getRateByCode(b).subscribe(t=>{this.invoicesState.setCurretRate(t)})}}getSubTotal(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=t.amount}),n}getTotal(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=t.amount}),n}getWeight(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=Number(t.weight)}),n}getDriverCommissionAmount(){var t,e,n;return this.getSubTotal()*((null!==(n=null===(e=null===(t=this.invoice)||void 0===t?void 0:t.driver)||void 0===e?void 0:e.commission)&&void 0!==n?n:0)/100)}onSubmit(){var t,e,n,i,o,c,r,a,s,b,d,u,g,p;if(!((null===(t=this.invoice)||void 0===t?void 0:t.driver)&&(null===(e=this.invoice)||void 0===e?void 0:e.status)&&(null===(n=this.invoice)||void 0===n?void 0:n.bill_to)&&(null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_from)&&void 0!==o?o:null===(c=this.invoice)||void 0===c?void 0:c.quick_ship_from)&&(null!==(a=null===(r=this.invoice)||void 0===r?void 0:r.ship_to)&&void 0!==a?a:null===(s=this.invoice)||void 0===s?void 0:s.quick_ship_to)))return void this.notificationService.error("Missed fields required");if(!(null===(d=null===(b=this.invoice)||void 0===b?void 0:b.vehicles)||void 0===d?void 0:d.length))return void this.notificationService.error("Missed vehicles required");const h={bill_to:this.invoice.bill_to.id,ship_from:null===(u=this.invoice.ship_from)||void 0===u?void 0:u.id,ship_to:null===(g=this.invoice.ship_to)||void 0===g?void 0:g.id,quick_ship_from:this.invoice.quick_ship_from,quick_ship_to:this.invoice.quick_ship_to,driver_id:this.invoice.driver.id,status:this.invoice.status,vehicles:null===(p=this.invoice.vehicles)||void 0===p?void 0:p.map(t=>Object(l.b)(t,["_id"]))};this.isLoading=!0,this.invoiceService.saveInvoice(h).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Invoice saved"),this.dialogRef.close(),this.invoicesState.resetNewInvoice()},t=>{this.notificationService.error(),this.isLoading=!1})}onCancel(){this.invoicesState.resetNewInvoice(),this.data.setCurrentStep(0),this.dialogRef.close()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(U.a),d.Ob(g.a),d.Ob(h.a),d.Ob(p.a),d.Ob(B),d.Ob(M.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-new-invoice-dialog"]],decls:100,vars:24,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],[1,"form-group","w-100","mt-3","new-invoice-form","mb-2"],[1,"col-12","d-flex","justify-content-between","mb-3","text-xl"],[1,"col-12","mb-3"],["for","driver",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","disabled","","value","",4,"ngIf"],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","status",1,"text-dark","text-base"],[1,"mt-2","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center","mb-3"],["type","button",1,"flex-shrink-0","btn","btn-primary","mr-3","cust-btn",3,"click"],[1,"bg-grey-light","flex-grow-1","h-100","p-2","rounded-lg","w-100"],[1,"w-100","mb-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","mb-0","pb-5"],["scope","col"],[4,"ngFor","ngForOf"],["class","w-100 text-center",4,"ngIf"],[1,"flex-grow-1","bg-light","add-vehicle-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"w-100","bg-grey-light","p-4","rounded-lg"],[1,"row"],[1,"col-8","text-right"],[1,"col-4","text-right"],[1,"col-12","border","border-secondary","my-2",2,"opacity","0.25"],[1,"row","font-bold"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],[1,"btn","w-100","btn-secondary",3,"click"],[1,"btn","w-100","btn-success",3,"click"],[1,"dialog-loader"],[3,"diameter"],["selected","","disabled","","value",""],[3,"value","selected"],[1,"action-buttons"],[3,"click"],[1,"fas","fa-edit","text-xl","mr-3"],[1,"fas","fa-trash-alt","text-xl"],[1,"w-100","text-center"],[1,"border","py-2"]],template:function(t,e){if(1&t&&(d.Ub(0,"div",0),d.Jc(1,D,2,1,"div",1),d.Ub(2,"h3"),d.Lc(3,"New Invoice"),d.Tb(),d.Ub(4,"form",2),d.Ub(5,"div",3),d.Ub(6,"span"),d.Lc(7," Invoice #: ----"),d.Tb(),d.Ub(8,"span"),d.Lc(9,"Date: ----"),d.Tb(),d.Tb(),d.Ub(10,"div",4),d.Ub(11,"label",5),d.Lc(12,"Driver"),d.Tb(),d.Ub(13,"div",6),d.Ub(14,"select",7),d.fc("change",(function(t){return e.onSelectDriver(t)})),d.Jc(15,z,2,0,"option",8),d.Jc(16,E,6,9,"option",9),d.Tb(),d.Pb(17,"mat-icon",10),d.Tb(),d.Tb(),d.Ub(18,"div",4),d.Ub(19,"label",11),d.Lc(20,"Status"),d.Tb(),d.Ub(21,"div",6),d.Ub(22,"select",7),d.fc("change",(function(t){return e.onSelectStatus(t)})),d.Jc(23,R,2,3,"option",9),d.Tb(),d.Pb(24,"mat-icon",10),d.Tb(),d.Tb(),d.Ub(25,"div",12),d.Ub(26,"div",13),d.Ub(27,"button",14),d.fc("click",(function(){return e.data.onBillTo()})),d.Lc(28,"Bill To"),d.Tb(),d.Ub(29,"span",15),d.Lc(30),d.kc(31,"location"),d.Tb(),d.Tb(),d.Ub(32,"div",13),d.Ub(33,"button",14),d.fc("click",(function(){return e.data.onShipFrom()})),d.Lc(34,"Ship From"),d.Tb(),d.Ub(35,"span",15),d.Lc(36),d.kc(37,"location"),d.Tb(),d.Tb(),d.Ub(38,"div",13),d.Ub(39,"button",14),d.fc("click",(function(){return e.data.onShipTo()})),d.Lc(40,"Ship To"),d.Tb(),d.Ub(41,"span",15),d.Lc(42),d.kc(43,"location"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(44,"div",16),d.Ub(45,"table",17),d.Ub(46,"thead"),d.Ub(47,"tr"),d.Ub(48,"th",18),d.Lc(49,"Vehicle"),d.Tb(),d.Ub(50,"th",18),d.Lc(51,"Vin"),d.Tb(),d.Ub(52,"th",18),d.Lc(53,"Amount"),d.Tb(),d.Pb(54,"th",18),d.Tb(),d.Tb(),d.Ub(55,"tbody"),d.Jc(56,V,13,7,"tr",19),d.Tb(),d.Tb(),d.Jc(57,$,3,0,"div",20),d.Ub(58,"div",21),d.Ub(59,"button",22),d.fc("click",(function(){return e.data.onAddVehicle()})),d.Lc(60,"+ Add vehicle"),d.Tb(),d.Tb(),d.Tb(),d.Ub(61,"div",23),d.Ub(62,"div",24),d.Ub(63,"span",25),d.Lc(64,"Sub total:"),d.Tb(),d.Ub(65,"span",26),d.Lc(66),d.Tb(),d.Tb(),d.Ub(67,"div",24),d.Ub(68,"span",25),d.Lc(69,"Driver commission:"),d.Tb(),d.Ub(70,"span",26),d.Lc(71),d.Tb(),d.Tb(),d.Ub(72,"div",24),d.Ub(73,"span",25),d.Lc(74,"Driver commission amount:"),d.Tb(),d.Ub(75,"span",26),d.Lc(76),d.Tb(),d.Tb(),d.Ub(77,"div",24),d.Ub(78,"span",25),d.Lc(79,"Total units:"),d.Tb(),d.Ub(80,"span",26),d.Lc(81),d.Tb(),d.Tb(),d.Ub(82,"div",24),d.Ub(83,"span",25),d.Lc(84,"Weight:"),d.Tb(),d.Ub(85,"span",26),d.Lc(86),d.Tb(),d.Tb(),d.Pb(87,"div",27),d.Ub(88,"div",28),d.Ub(89,"span",25),d.Lc(90,"Total:"),d.Tb(),d.Ub(91,"span",26),d.Lc(92),d.Tb(),d.Tb(),d.Tb(),d.Ub(93,"div",29),d.Ub(94,"div",30),d.Ub(95,"button",31),d.fc("click",(function(){return e.onCancel()})),d.Lc(96,"Cancel"),d.Tb(),d.Tb(),d.Ub(97,"div",30),d.Ub(98,"button",32),d.fc("click",(function(){return e.onSubmit()})),d.Lc(99,"Save"),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t){var n=null,i=null,o=null,c=null;d.Bb(1),d.pc("ngIf",e.isLoading),d.Bb(14),d.pc("ngIf",!(null!=e.invoice&&e.invoice.driver)),d.Bb(1),d.pc("ngForOf",e.drivers),d.Bb(7),d.pc("ngForOf",e.statuses),d.Bb(7),d.Oc(" ",null!=e.invoice&&e.invoice.bill_to?null==e.invoice?null:e.invoice.bill_to.name:"----"," ",(null==e.invoice?null:e.invoice.bill_to)&&" - "+d.lc(31,18,null==e.invoice?null:e.invoice.bill_to.city)," "),d.Bb(6),d.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))&&" - "+d.lc(37,20,null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).city)," "),d.Bb(6),d.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))&&" - "+d.lc(43,22,null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).city)," "),d.Bb(14),d.pc("ngForOf",null==e.invoice?null:e.invoice.vehicles),d.Bb(1),d.pc("ngIf",!(null!=e.invoice&&null!=e.invoice.vehicles&&e.invoice.vehicles.length)),d.Bb(9),d.Nc("$",null==(n=e.getSubTotal())?null:n.toFixed(2),""),d.Bb(5),d.Nc("%",(null==e.invoice||null==e.invoice.driver?null:e.invoice.driver.commission)||0,""),d.Bb(5),d.Nc("$",null==(i=e.getDriverCommissionAmount())?null:i.toFixed(2),""),d.Bb(5),d.Mc((null==e.invoice||null==e.invoice.vehicles?null:e.invoice.vehicles.length)||0),d.Bb(5),d.Mc(null==(o=e.getWeight())?null:o.toFixed(2)),d.Bb(6),d.Nc("$",null==(c=e.getTotal())?null:c.toFixed(2),"")}},directives:[i.n,a.x,a.p,a.q,i.m,v.a,L.b,a.r,a.w],pipes:[F,i.w,i.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .add-vehicle-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.new-invoice-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.cust-btn[_ngcontent-%COMP%]{width:100%}@media (min-width:672px){.cust-btn[_ngcontent-%COMP%]{width:110px}}"]}),t})();var A=n("U12X");function N(t,e){1&t&&(d.Ub(0,"div",15),d.Ub(1,"p",16),d.Lc(2,"No customers found"),d.Tb(),d.Tb())}function J(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr",17),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().onSelect(n)})),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit;d.Bb(2),d.Mc(t.name)}}function G(t,e){1&t&&(d.Ub(0,"div",33),d.Lc(1,"Invalid field"),d.Tb())}function W(t,e){if(1&t&&(d.Ub(0,"option",34),d.Lc(1),d.Tb()),2&t){const t=e.$implicit,n=d.jc(2);d.pc("value",t.code)("selected",t.code===(null==n.currentCity?null:n.currentCity.state_code)),d.Bb(1),d.Nc(" ",t.name," ")}}function Q(t,e){if(1&t&&(d.Ub(0,"option",34),d.Lc(1),d.Tb()),2&t){const t=e.$implicit,n=d.jc(2);d.pc("value",t.id)("selected",t.name===(null==n.currentCity?null:n.currentCity.name)),d.Bb(1),d.Nc(" ",t.name," ")}}function H(t,e){if(1&t){const t=d.Vb();d.Ub(0,"form",18),d.fc("ngSubmit",(function(){return d.Bc(t),d.jc().saveQuickEntry()})),d.Ub(1,"div",19),d.Ub(2,"label",20),d.Lc(3,"Name"),d.Tb(),d.Pb(4,"input",21),d.Jc(5,G,2,0,"div",22),d.Tb(),d.Ub(6,"div",19),d.Ub(7,"label",23),d.Lc(8,"State"),d.Tb(),d.Ub(9,"div",24),d.Ub(10,"select",25),d.fc("change",(function(e){return d.Bc(t),d.jc().onStateChange(e)})),d.Ub(11,"option",26),d.Lc(12,"Select state..."),d.Tb(),d.Jc(13,W,2,3,"option",27),d.Tb(),d.Pb(14,"mat-icon",28),d.Tb(),d.Tb(),d.Ub(15,"div",19),d.Ub(16,"label",29),d.Lc(17,"City"),d.Tb(),d.Ub(18,"div",24),d.Ub(19,"select",30),d.Jc(20,Q,2,3,"option",27),d.Tb(),d.Pb(21,"mat-icon",28),d.Tb(),d.Tb(),d.Ub(22,"div",31),d.Ub(23,"button",32),d.Lc(24,"Save"),d.Tb(),d.Tb(),d.Tb()}if(2&t){const t=d.jc();d.pc("formGroup",t.customerForm),d.Bb(4),d.Gb("is-invalid",t.customerForm.controls.name.touched&&t.customerForm.controls.name.invalid),d.Bb(1),d.pc("ngIf",!0),d.Bb(8),d.pc("ngForOf",t.states),d.Bb(6),d.Gb("is-invalid",t.customerForm.controls.city_id.touched&&t.customerForm.controls.city_id.invalid),d.Bb(1),d.pc("ngForOf",t.cities[t.selectedState])}}function Y(t,e){1&t&&(d.Ub(0,"div",15),d.Ub(1,"p",16),d.Lc(2,"No customers found"),d.Tb(),d.Tb())}function K(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr",17),d.fc("click",(function(){d.Bc(t);const n=e.$implicit;return d.jc().onSelect(n)})),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit;d.Bb(2),d.Mc(t.name)}}let X=(()=>{class t{constructor(t,e,n,i,o,c){this.dialogRef=t,this.data=e,this.fb=n,this.invoicesState=i,this.customerService=o,this.geoService=c,this.subscriptions=[],this.foundCustomers=[],this.showQuickEntry=!1,this.states=[],this.cities={},this.mostRecentsCustomers=[]}ngOnInit(){this.buildForm(),this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{var e,n;this.cities=t,this.currentCity&&(this.customerForm.controls.city_id.reset(),this.customerForm.controls.city_id.setValue(null===(n=null===(e=this.cities[this.selectedState])||void 0===e?void 0:e.find(t=>t.name===this.currentCity.name))||void 0===n?void 0:n.id))});if(this.subscriptions.push(t),"new"===this.data.action){const t=this.invoicesState.newInvoice$.subscribe(t=>this.handleEditQuickEntry(t));this.subscriptions.push(t)}if("edit"===this.data.action){const t=this.invoicesState.selectedInvoice$.subscribe(t=>this.handleEditQuickEntry(t));this.subscriptions.push(t)}const e=this.invoicesState.mostRecentsCustomers$.subscribe(t=>{this.mostRecentsCustomers=t});this.subscriptions.push(e)}handleEditQuickEntry(t){var e,n,i,o,c,r,l,a,s,b,d,u,g,p,h,v;t&&(this.selectedInvoice=t,("FROM"===this.data.type&&(null===(e=this.selectedInvoice)||void 0===e?void 0:e.quick_ship_from)||"TO"===this.data.type&&(null===(n=this.selectedInvoice)||void 0===n?void 0:n.quick_ship_to))&&("FROM"===this.data.type?(this.currentCity=null===(o=null===(i=this.selectedInvoice)||void 0===i?void 0:i.quick_ship_from)||void 0===o?void 0:o.city,this.selectedState=null===(r=null===(c=this.selectedInvoice)||void 0===c?void 0:c.quick_ship_from)||void 0===r?void 0:r.city.state_code,this.customerForm.controls.name.setValue(null===(a=null===(l=this.selectedInvoice)||void 0===l?void 0:l.quick_ship_from)||void 0===a?void 0:a.name)):(this.currentCity=null===(b=null===(s=this.selectedInvoice)||void 0===s?void 0:s.quick_ship_to)||void 0===b?void 0:b.city,this.selectedState=null===(u=null===(d=this.selectedInvoice)||void 0===d?void 0:d.quick_ship_to)||void 0===u?void 0:u.city.state_code,this.customerForm.controls.name.setValue(null===(p=null===(g=this.selectedInvoice)||void 0===g?void 0:g.quick_ship_to)||void 0===p?void 0:p.name)),this.geoService.fetchCitiesByState(this.selectedState),this.customerForm.controls.city_id.reset(),this.customerForm.controls.city_id.setValue(null===(v=null===(h=this.cities[this.selectedState])||void 0===h?void 0:h.find(t=>t.name===this.currentCity.name))||void 0===v?void 0:v.id),this.showQuickEntry=!0))}buildForm(){this.customerForm=this.fb.group({name:["",[a.v.required]],city_id:["",[a.v.required]]})}backToInvoice(){this.data.onBackToInvoice()}searchCustomers(t){return Object(l.a)(this,void 0,void 0,(function*(){const e=t.target.value;this.foundCustomers=yield this.customerService.searchCustomers(e)}))}onSelect(t,e=!1){const n="FROM"===this.data.type;("new"===this.data.action?t=>this.invoicesState.setNewInvoice(t):t=>this.invoicesState.setSelectedInvoice(t))(e?{[n?"quick_ship_from":"quick_ship_to"]:t,[n?"ship_from":"ship_to"]:null}:{[n?"ship_from":"ship_to"]:t,[n?"quick_ship_from":"quick_ship_to"]:null}),this.data.onBackToInvoice()}onQuickEntry(t){t.target.blur(),this.customerForm.reset(),this.showQuickEntry=!this.showQuickEntry}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerForm.controls.city_id.reset()}saveQuickEntry(){var t;if(this.customerForm.invalid)return Object.values(this.customerForm.controls).forEach(t=>{t instanceof a.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{const e=null===(t=this.cities[this.selectedState])||void 0===t?void 0:t.find(t=>t.id===this.customerForm.controls.city_id.value);this.onSelect({name:this.customerForm.controls.name.value,city:{name:null==e?void 0:e.name,state:null==e?void 0:e.state_name,state_code:null==e?void 0:e.state_code}},!0)}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(a.e),d.Ob(g.a),d.Ob(M.a),d.Ob(A.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-ship-select-dialog"]],decls:34,vars:6,consts:[[1,"input-group","pt-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search customer...",1,"form-control",3,"input"],[1,"w-100","text-secondary","text-sm"],[1,"w-100","my-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","table-bordered"],["scope","col"],["class","w-100 text-center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"flex-grow-1","bg-light","quick-entry-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],["class","py-2 mt-n4 mb-3 border-primary-1",3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-100","mt-3"],[1,"w-100","text-center"],[1,"border","py-2"],[3,"click"],[1,"py-2","mt-n4","mb-3","border-primary-1",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city_id",1,"text-dark","text-base"],["formControlName","city_id",1,"custom-select","form-control"],[1,"col-12"],["type","submit",1,"btn","w-100","btn-success"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){1&t&&(d.Ub(0,"h3"),d.Lc(1),d.Tb(),d.Ub(2,"div",0),d.Ub(3,"div",1),d.Ub(4,"span",2),d.Pb(5,"i",3),d.Tb(),d.Tb(),d.Ub(6,"input",4),d.fc("input",(function(t){return e.searchCustomers(t)})),d.Tb(),d.Ub(7,"div",5),d.Lc(8,"Min 3 characters"),d.Tb(),d.Tb(),d.Ub(9,"div",6),d.Ub(10,"table",7),d.Ub(11,"thead"),d.Ub(12,"tr"),d.Ub(13,"th",8),d.Lc(14,"Customer list"),d.Tb(),d.Tb(),d.Tb(),d.Ub(15,"tbody"),d.Jc(16,N,3,0,"div",9),d.Jc(17,J,3,1,"tr",10),d.Tb(),d.Tb(),d.Ub(18,"div",11),d.Ub(19,"button",12),d.fc("click",(function(t){return e.onQuickEntry(t)})),d.Lc(20,"+ Quick entry"),d.Tb(),d.Tb(),d.Tb(),d.Jc(21,H,25,8,"form",13),d.Ub(22,"div",6),d.Ub(23,"table",7),d.Ub(24,"thead"),d.Ub(25,"tr"),d.Ub(26,"th",8),d.Lc(27,"Most recent"),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"tbody"),d.Jc(29,Y,3,0,"div",9),d.Jc(30,K,3,1,"tr",10),d.Tb(),d.Tb(),d.Tb(),d.Ub(31,"div",14),d.Ub(32,"button",12),d.fc("click",(function(){return e.backToInvoice()})),d.Lc(33,"Back to invoice"),d.Tb(),d.Tb()),2&t&&(d.Bb(1),d.Mc("TO"===e.data.type?"Ship to":"Ship from"),d.Bb(15),d.pc("ngIf",!(null!=e.foundCustomers&&e.foundCustomers.length)),d.Bb(1),d.pc("ngForOf",e.foundCustomers),d.Bb(4),d.pc("ngIf",e.showQuickEntry),d.Bb(8),d.pc("ngIf",!(null!=e.mostRecentsCustomers&&e.mostRecentsCustomers.length)),d.Bb(1),d.pc("ngForOf",e.mostRecentsCustomers))},directives:[i.n,i.m,a.x,a.p,a.i,a.d,a.o,a.g,a.r,a.w,v.a,a.u],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative;text-align:center}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .quick-entry-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),t})();function Z(t,e){1&t&&(d.Ub(0,"div",31),d.Pb(1,"mat-spinner",32),d.Tb()),2&t&&(d.Bb(1),d.pc("diameter",50))}function tt(t,e){1&t&&(d.Ub(0,"option",33),d.Lc(1,"Select driver..."),d.Tb())}function et(t,e){if(1&t&&(d.Ub(0,"option",34),d.Ub(1,"span"),d.Lc(2),d.kc(3,"titlecase"),d.kc(4,"titlecase"),d.Tb(),d.Lc(5),d.Tb()),2&t){const t=e.$implicit,n=d.jc();d.pc("value",t.id)("selected",t.id===(null==n.invoice||null==n.invoice.driver?null:n.invoice.driver.id)),d.Bb(2),d.Oc("",d.lc(3,5,t.first_name)," ",d.lc(4,7,t.last_name),""),d.Bb(3),d.Nc(" - ",t.email," ")}}function nt(t,e){if(1&t&&(d.Ub(0,"option",34),d.Lc(1),d.Tb()),2&t){const t=e.$implicit,n=d.jc();d.pc("value",t.value)("selected",(null==n.invoice?null:n.invoice.status)&&t.value===(null==n.invoice?null:n.invoice.status)),d.Bb(1),d.Nc(" ",n.viewMode?n.parseStatus(n.invoice.status):t.label," ")}}function it(t,e){if(1&t){const t=d.Vb();d.Ub(0,"td",37),d.Ub(1,"button",38),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().data.onEditVehicle(e)})),d.Pb(2,"i",39),d.Tb(),d.Ub(3,"button",38),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().data.onDeleteVehicle(e)})),d.Pb(4,"i",40),d.Tb(),d.Tb()}}function ot(t,e){if(1&t){const t=d.Vb();d.Ub(0,"td",41),d.Ub(1,"button",38),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().data.onEditVehicle(e)})),d.Pb(2,"i",42),d.Tb(),d.Tb()}}function ct(t,e){if(1&t&&(d.Ub(0,"tr"),d.Ub(1,"td"),d.Lc(2),d.Tb(),d.Ub(3,"td"),d.Lc(4),d.Tb(),d.Ub(5,"td"),d.Lc(6),d.kc(7,"currency"),d.Tb(),d.Jc(8,it,5,0,"td",35),d.Jc(9,ot,3,0,"td",36),d.Tb()),2&t){const t=e.$implicit,n=d.jc();d.Bb(2),d.Pc("",t.year," ",t.make," ",t.model,""),d.Bb(2),d.Mc(t.vin),d.Bb(2),d.Mc(d.lc(7,7,t.amount)),d.Bb(2),d.pc("ngIf",!n.viewMode),d.Bb(1),d.pc("ngIf",n.viewMode)}}function rt(t,e){1&t&&(d.Ub(0,"div",43),d.Ub(1,"p",44),d.Lc(2,"No vehicles added"),d.Tb(),d.Tb())}function lt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",45),d.Ub(1,"button",46),d.fc("click",(function(){return d.Bc(t),d.jc().data.onAddVehicle()})),d.Lc(2,"+ Add vehicle"),d.Tb(),d.Tb()}}function at(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",47),d.Ub(1,"div",48),d.Ub(2,"button",49),d.fc("click",(function(){return d.Bc(t),d.jc().onCancel()})),d.Lc(3,"Cancel"),d.Tb(),d.Tb(),d.Ub(4,"div",48),d.Ub(5,"button",50),d.fc("click",(function(){return d.Bc(t),d.jc().onSubmit()})),d.Lc(6,"Save"),d.Tb(),d.Tb(),d.Tb()}}function st(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",51),d.Ub(1,"div",48),d.Ub(2,"button",49),d.fc("click",(function(){return d.Bc(t),d.jc().onCancel()})),d.Lc(3,"Back"),d.Tb(),d.Tb(),d.Tb()}}const bt=[{value:"DRAFT",label:"Draft"},{value:"SUBMITTED_FOR_REVIEW",label:"Submitted for review"}];let dt=(()=>{class t{constructor(t,e,n,i,o,c,r,l){this.dialogRef=t,this.data=e,this.userService=n,this.invoicesState=i,this.rateService=o,this.notificationService=c,this.invoiceService=r,this.customerService=l,this.subscriptions=[],this.statuses=bt,this.isLoading=!1;const a=this.userService.users.subscribe(t=>{this.drivers=t}),s=this.invoicesState.selectedInvoice$.subscribe(t=>{this.invoice=t,this.viewMode="DRAFT"!==t.status&&"SUBMITTED_FOR_REVIEW"!==t.status});this.subscriptions.push(a,s)}ngOnInit(){this.userService.fetchUsers();const t=this.customerService.getMostRecents().subscribe(t=>{this.invoicesState.setMostRecentsCustomers(t)});this.subscriptions.push(t)}onSelectDriver(t){this.invoicesState.setSelectedInvoice({driver:this.drivers.find(e=>e.id===t.target.value)})}onSelectStatus(t){this.invoicesState.setSelectedInvoice({status:t.target.value})}getSubTotal(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=t.amount}),n}getTotal(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=t.amount}),n}getWeight(){var t,e;let n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach(t=>{n+=Number(t.weight)}),n}getDriverCommissionAmount(){var t,e,n;return this.getSubTotal()*((null!==(n=null===(e=null===(t=this.invoice)||void 0===t?void 0:t.driver)||void 0===e?void 0:e.commission)&&void 0!==n?n:0)/100)}onSubmit(){var t,e,n,i,o,c,r,a,s,b,d,u,g,p;if(!((null===(t=this.invoice)||void 0===t?void 0:t.driver)&&(null===(e=this.invoice)||void 0===e?void 0:e.status)&&(null===(n=this.invoice)||void 0===n?void 0:n.bill_to)&&(null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_from)&&void 0!==o?o:null===(c=this.invoice)||void 0===c?void 0:c.quick_ship_from)&&(null!==(a=null===(r=this.invoice)||void 0===r?void 0:r.ship_to)&&void 0!==a?a:null===(s=this.invoice)||void 0===s?void 0:s.quick_ship_to)))return void this.notificationService.error("Missed fields required");if(!(null===(d=null===(b=this.invoice)||void 0===b?void 0:b.vehicles)||void 0===d?void 0:d.length))return void this.notificationService.error("Missed vehicles required");const h={bill_to:this.invoice.bill_to.id,ship_from:null===(u=this.invoice.ship_from)||void 0===u?void 0:u.id,ship_to:null===(g=this.invoice.ship_to)||void 0===g?void 0:g.id,quick_ship_from:this.invoice.quick_ship_from,quick_ship_to:this.invoice.quick_ship_to,driver_id:this.invoice.driver.id,status:this.invoice.status,vehicles:null===(p=this.invoice.vehicles)||void 0===p?void 0:p.map(t=>Object(l.b)(t,["_id"]))};this.isLoading=!0,this.invoiceService.updateInvoice(h,this.invoice.id).subscribe(t=>{this.isLoading=!1,this.data.setCurrentStep(0),this.notificationService.success("Invoice updated"),this.dialogRef.close()},t=>{this.notificationService.error(),this.isLoading=!1})}onCancel(){this.invoicesState.resetSelectedInvoice(),this.data.setCurrentStep(0),this.dialogRef.close()}parseStatus(t){switch(t){case"DRAFT":return"Draft";case"SUBMITTED_FOR_REVIEW":return"Submitted for review";case"SUBMITTED_TO_CUSTOMER":return"Submitted to customer";case"PAID":return"Paid";default:return"Unknown"}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(U.a),d.Ob(g.a),d.Ob(h.a),d.Ob(p.a),d.Ob(B),d.Ob(M.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-edit-invoice-dialog"]],decls:95,vars:38,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],[1,"form-group","w-100","mt-3","new-invoice-form","mb-2"],[1,"col-12","d-flex","justify-content-between","mb-3","text-xl"],[1,"col-12","mb-3"],["for","driver",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"disabled","change"],["selected","","disabled","","value","",4,"ngIf"],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","status",1,"text-dark","text-base"],[1,"mt-2","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center","mb-3"],["type","button",1,"flex-shrink-0","btn","btn-primary","mr-3","cust-btn",3,"disabled","click"],[1,"bg-grey-light","flex-grow-1","h-100","p-2","rounded-lg","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center"],[1,"w-100","mb-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","mb-0","pb-5"],["scope","col"],[4,"ngFor","ngForOf"],["class","w-100 text-center",4,"ngIf"],["class","flex-grow-1 bg-light add-vehicle-btn py-1",4,"ngIf"],[1,"w-100","bg-grey-light","p-4","rounded-lg"],[1,"row"],[1,"col-8","text-right"],[1,"col-4","text-right"],[1,"col-12","border","border-secondary","my-2",2,"opacity","0.25"],[1,"row","font-bold"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-between my-2",4,"ngIf"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-center my-2",4,"ngIf"],[1,"dialog-loader"],[3,"diameter"],["selected","","disabled","","value",""],[3,"value","selected"],["class","action-buttons",4,"ngIf"],["class","action-buttons justify-content-center",4,"ngIf"],[1,"action-buttons"],[3,"click"],[1,"fas","fa-edit","text-xl","mr-3"],[1,"fas","fa-trash-alt","text-xl"],[1,"action-buttons","justify-content-center"],[1,"fas","fa-eye","text-xl","mr-3"],[1,"w-100","text-center"],[1,"border","py-2"],[1,"flex-grow-1","bg-light","add-vehicle-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","my-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],[1,"btn","w-100","btn-success",3,"click"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-center","my-2"]],template:function(t,e){if(1&t&&(d.Ub(0,"div",0),d.Jc(1,Z,2,1,"div",1),d.Ub(2,"h3"),d.Lc(3),d.Tb(),d.Ub(4,"form",2),d.Ub(5,"div",3),d.Ub(6,"span"),d.Lc(7),d.Tb(),d.Ub(8,"span"),d.Lc(9),d.kc(10,"date"),d.Tb(),d.Tb(),d.Ub(11,"div",4),d.Ub(12,"label",5),d.Lc(13,"Driver"),d.Tb(),d.Ub(14,"div",6),d.Ub(15,"select",7),d.fc("change",(function(t){return e.onSelectDriver(t)})),d.Jc(16,tt,2,0,"option",8),d.Jc(17,et,6,9,"option",9),d.Tb(),d.Pb(18,"mat-icon",10),d.Tb(),d.Tb(),d.Ub(19,"div",4),d.Ub(20,"label",11),d.Lc(21,"Status"),d.Tb(),d.Ub(22,"div",6),d.Ub(23,"select",7),d.fc("change",(function(t){return e.onSelectStatus(t)})),d.Jc(24,nt,2,3,"option",9),d.Tb(),d.Pb(25,"mat-icon",10),d.Tb(),d.Tb(),d.Ub(26,"div",12),d.Ub(27,"div",13),d.Ub(28,"button",14),d.fc("click",(function(){return e.data.onBillTo()})),d.Lc(29,"Bill To"),d.Tb(),d.Ub(30,"span",15),d.Lc(31),d.kc(32,"location"),d.Tb(),d.Tb(),d.Ub(33,"div",13),d.Ub(34,"button",14),d.fc("click",(function(){return e.data.onShipFrom()})),d.Lc(35,"Ship From"),d.Tb(),d.Ub(36,"span",15),d.Lc(37),d.kc(38,"location"),d.Tb(),d.Tb(),d.Ub(39,"div",16),d.Ub(40,"button",14),d.fc("click",(function(){return e.data.onShipTo()})),d.Lc(41,"Ship To"),d.Tb(),d.Ub(42,"span",15),d.Lc(43),d.kc(44,"location"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(45,"div",17),d.Ub(46,"table",18),d.Ub(47,"thead"),d.Ub(48,"tr"),d.Ub(49,"th",19),d.Lc(50,"Vehicle"),d.Tb(),d.Ub(51,"th",19),d.Lc(52,"Vin"),d.Tb(),d.Ub(53,"th",19),d.Lc(54,"Amount"),d.Tb(),d.Ub(55,"th",19),d.Lc(56,"Actions"),d.Tb(),d.Tb(),d.Tb(),d.Ub(57,"tbody"),d.Jc(58,ct,10,9,"tr",20),d.Tb(),d.Tb(),d.Jc(59,rt,3,0,"div",21),d.Jc(60,lt,3,0,"div",22),d.Tb(),d.Ub(61,"div",23),d.Ub(62,"div",24),d.Ub(63,"span",25),d.Lc(64,"Sub total:"),d.Tb(),d.Ub(65,"span",26),d.Lc(66),d.Tb(),d.Tb(),d.Ub(67,"div",24),d.Ub(68,"span",25),d.Lc(69,"Driver commission:"),d.Tb(),d.Ub(70,"span",26),d.Lc(71),d.Tb(),d.Tb(),d.Ub(72,"div",24),d.Ub(73,"span",25),d.Lc(74,"Driver commission amount:"),d.Tb(),d.Ub(75,"span",26),d.Lc(76),d.Tb(),d.Tb(),d.Ub(77,"div",24),d.Ub(78,"span",25),d.Lc(79,"Total units:"),d.Tb(),d.Ub(80,"span",26),d.Lc(81),d.Tb(),d.Tb(),d.Ub(82,"div",24),d.Ub(83,"span",25),d.Lc(84,"Weight:"),d.Tb(),d.Ub(85,"span",26),d.Lc(86),d.Tb(),d.Tb(),d.Pb(87,"div",27),d.Ub(88,"div",28),d.Ub(89,"span",25),d.Lc(90,"Total:"),d.Tb(),d.Ub(91,"span",26),d.Lc(92),d.Tb(),d.Tb(),d.Tb(),d.Jc(93,at,7,0,"div",29),d.Jc(94,st,4,0,"div",30),d.Tb()),2&t){var n=null,i=null,o=null,c=null;d.Bb(1),d.pc("ngIf",e.isLoading),d.Bb(2),d.Mc(e.viewMode?"Invoice":"Edit Invoice"),d.Bb(4),d.Nc(" Invoice #: ",null==e.invoice?null:e.invoice.number,""),d.Bb(2),d.Nc("Date: ",d.mc(10,29,null==e.invoice?null:e.invoice.date,"MM/dd/yyyy"),""),d.Bb(6),d.pc("disabled",e.viewMode),d.Bb(1),d.pc("ngIf",!(null!=e.invoice&&e.invoice.driver)),d.Bb(1),d.pc("ngForOf",e.drivers),d.Bb(6),d.pc("disabled",e.viewMode),d.Bb(1),d.pc("ngForOf",e.statuses),d.Bb(4),d.pc("disabled",e.viewMode),d.Bb(3),d.Oc(" ",null!=e.invoice&&e.invoice.bill_to?null==e.invoice?null:e.invoice.bill_to.name:"----"," ",(null==e.invoice?null:e.invoice.bill_to)&&" - "+d.lc(32,32,null==e.invoice?null:e.invoice.bill_to.city)," "),d.Bb(3),d.pc("disabled",e.viewMode),d.Bb(3),d.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))&&" - "+d.lc(38,34,null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).city)," "),d.Bb(3),d.pc("disabled",e.viewMode),d.Bb(3),d.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))&&" - "+d.lc(44,36,null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).city)," "),d.Bb(15),d.pc("ngForOf",null==e.invoice?null:e.invoice.vehicles),d.Bb(1),d.pc("ngIf",!(null!=e.invoice&&null!=e.invoice.vehicles&&e.invoice.vehicles.length)),d.Bb(1),d.pc("ngIf",!e.viewMode),d.Bb(6),d.Nc("$",null==(n=e.getSubTotal())?null:n.toFixed(2),""),d.Bb(5),d.Nc("%",(null==e.invoice||null==e.invoice.driver?null:e.invoice.driver.commission)||0,""),d.Bb(5),d.Nc("$",null==(i=e.getDriverCommissionAmount())?null:i.toFixed(2),""),d.Bb(5),d.Mc((null==e.invoice||null==e.invoice.vehicles?null:e.invoice.vehicles.length)||0),d.Bb(5),d.Mc(null==(o=e.getWeight())?null:o.toFixed(2)),d.Bb(6),d.Nc("$",null==(c=e.getTotal())?null:c.toFixed(2),""),d.Bb(1),d.pc("ngIf",!e.viewMode),d.Bb(1),d.pc("ngIf",e.viewMode)}},directives:[i.n,a.x,a.p,a.q,i.m,v.a,L.b,a.r,a.w],pipes:[i.f,F,i.w,i.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .add-vehicle-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.new-invoice-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.cust-btn[_ngcontent-%COMP%]{width:100%}@media (min-width:672px){.cust-btn[_ngcontent-%COMP%]{width:110px}}"]}),t})();function ut(t,e){if(1&t&&(d.Ub(0,"div",28),d.Lc(1),d.Tb()),2&t){const t=d.jc();d.Bb(1),d.Nc(" ",null!=t.vehicleForm.controls.vin.errors&&t.vehicleForm.controls.vin.errors.faliedSearch?"VIN not found":"Invalid VIN"," ")}}function gt(t,e){if(1&t&&(d.Ub(0,"option",29),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}function pt(t,e){if(1&t&&(d.Ub(0,"option",29),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}function ht(t,e){if(1&t&&(d.Ub(0,"option",29),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("value",t),d.Bb(1),d.Mc(t)}}function vt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",30),d.Ub(1,"div",31),d.Ub(2,"button",32),d.fc("click",(function(){return d.Bc(t),d.jc().data.onBackToInvoice()})),d.Lc(3," Cancel "),d.Tb(),d.Tb(),d.Ub(4,"div",31),d.Ub(5,"button",33),d.Lc(6,"Save"),d.Tb(),d.Tb(),d.Tb()}}function mt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",34),d.Ub(1,"div",31),d.Ub(2,"button",32),d.fc("click",(function(){return d.Bc(t),d.jc().data.onBackToInvoice()})),d.Lc(3,"Back"),d.Tb(),d.Tb(),d.Tb()}}let ft=(()=>{class t{constructor(t,e,n,i,o,c){this.dialogRef=t,this.data=e,this.fb=n,this.vehicleService=i,this.invoicesState=o,this.notificationService=c,this.subscriptions=[],this.years=[],this.makes=[],this.models=[],this.viewMode=this.data.viewMode,this.buildForm();const r=this.invoicesState.currentRate$.subscribe(t=>{this.rate=t,(null==t?void 0:t.amount)&&this.vehicleForm.controls.amount.setValue(t.amount)});this.subscriptions.push(r)}ngOnInit(){this.years=this.vehicleService.years,this.makes=this.vehicleService.makes,this.makes.push(this.data.vehicle.make),this.models.push(this.data.vehicle.model),this.getModels(this.data.vehicle.make)}onSelectYear(t){}onSelectMake(t){this.getModels(t.target.value),this.vehicleForm.controls.model.setValue("")}getModels(t){return Object(l.a)(this,void 0,void 0,(function*(){this.models=yield this.vehicleService.getModelsByMake(t)}))}buildForm(){this.vehicleForm=this.fb.group({vin:[{value:this.data.vehicle.vin,disabled:this.viewMode},[a.v.required,a.v.pattern(b.a.vin)]],year:[{value:this.data.vehicle.year,disabled:this.viewMode},[a.v.required]],make:[{value:this.data.vehicle.make,disabled:this.viewMode},[a.v.required]],model:[{value:this.data.vehicle.model,disabled:this.viewMode},[a.v.required]],amount:[{value:this.data.vehicle.amount,disabled:this.viewMode},[a.v.required]],weight:[{value:this.data.vehicle.weight,disabled:this.viewMode},[]],comments:[{value:this.data.vehicle.comments,disabled:this.viewMode},[]]})}onSearchVin(t){return Object(l.a)(this,void 0,void 0,(function*(){this.vehicleForm.controls.vin.valid&&this.vehicleService.searchVin(t.target.value.toUpperCase()).then(t=>{this.vehicleSearched=t,this.makes.push(t.make),this.models.push(t.model),this.vehicleForm.controls.year.setValue(t.year),this.vehicleForm.controls.make.setValue(t.make),this.vehicleForm.controls.model.setValue(t.model),this.vehicleForm.controls.weight.setValue(t.weight)}).catch(t=>{this.vehicleSearched=null,this.vehicleForm.controls.vin.setErrors({faliedSearch:!0}),this.vehicleForm.controls.vin.markAsTouched()})}))}onSubmit(){var t,e,n;const i=this.vehicleForm.controls.vin;if(i.setValue(null===(t=i.value)||void 0===t?void 0:t.toUpperCase()),this.vehicleForm.invalid)return Object.values(this.vehicleForm.controls).forEach(t=>{t instanceof a.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});try{"edit"===this.data.action?this.invoicesState.editSelectedInvoiceVehicle(this.vehicleForm.value,null===(e=this.data.vehicle)||void 0===e?void 0:e._id):this.invoicesState.editNewInvoiceVehicle(this.vehicleForm.value,null===(n=this.data.vehicle)||void 0===n?void 0:n._id)}catch(o){return this.notificationService.error(o.message)}this.data.onBackToInvoice()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.e),d.Ob(s.a),d.Ob(a.e),d.Ob(u.a),d.Ob(g.a),d.Ob(p.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-edit-vehicle-dialog"]],decls:58,vars:24,consts:[[1,"form-group",3,"formGroup","ngSubmit"],[1,"w-100","input-group","pt-2","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search VIN...","formControlName","vin",1,"form-control",3,"input"],["class","form-text invalid-feedback",4,"ngIf"],[1,"w-100","mb-3"],["for","year",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["formControlName","year",1,"custom-select","form-control",3,"change"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","make",1,"text-dark","text-base"],["formControlName","make",1,"custom-select","form-control",3,"change"],["for","model",1,"text-dark","text-base"],["formControlName","model",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],["type","number","placeholder","Amount...","formControlName","amount",1,"form-control"],["for","weight",1,"text-dark","text-base"],["type","number","placeholder","Weight...","formControlName","weight",1,"form-control"],[1,"w-100"],["for","comments",1,"text-dark","text-base"],["id","textarea","maxlength","256","rows","3","formControlName","comments",1,"form-control"],["class","d-flex w-100 px-4 pt-3 justify-content-between mt-3",4,"ngIf"],["class","d-flex w-100 px-4 pt-3 justify-content-center mt-3",4,"ngIf"],[1,"form-text","invalid-feedback"],[3,"value"],[1,"d-flex","w-100","px-4","pt-3","justify-content-between","mt-3"],[1,"col-5"],["type","button",1,"btn","w-100","btn-outline-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"d-flex","w-100","px-4","pt-3","justify-content-center","mt-3"]],template:function(t,e){1&t&&(d.Ub(0,"h3"),d.Lc(1),d.Tb(),d.Ub(2,"form",0),d.fc("ngSubmit",(function(){return e.onSubmit()})),d.Ub(3,"div",1),d.Ub(4,"div",2),d.Ub(5,"span",3),d.Pb(6,"i",4),d.Tb(),d.Tb(),d.Ub(7,"input",5),d.fc("input",(function(t){return e.onSearchVin(t)})),d.Tb(),d.Jc(8,ut,2,1,"div",6),d.Tb(),d.Ub(9,"div",7),d.Ub(10,"label",8),d.Lc(11,"Year"),d.Tb(),d.Ub(12,"div",9),d.Ub(13,"select",10),d.fc("change",(function(t){return e.onSelectYear(t)})),d.Ub(14,"option",11),d.Lc(15,"Select year..."),d.Tb(),d.Jc(16,gt,2,2,"option",12),d.Tb(),d.Pb(17,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(18,"div",7),d.Ub(19,"label",14),d.Lc(20,"Make"),d.Tb(),d.Ub(21,"div",9),d.Ub(22,"select",15),d.fc("change",(function(t){return e.onSelectMake(t)})),d.Ub(23,"option",11),d.Lc(24,"Select make..."),d.Tb(),d.Jc(25,pt,2,2,"option",12),d.Tb(),d.Pb(26,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(27,"div",7),d.Ub(28,"label",16),d.Lc(29,"Model"),d.Tb(),d.Ub(30,"div",9),d.Ub(31,"select",17),d.Ub(32,"option",11),d.Lc(33,"Select model..."),d.Tb(),d.Jc(34,ht,2,2,"option",12),d.Tb(),d.Pb(35,"mat-icon",13),d.Tb(),d.Tb(),d.Ub(36,"div",7),d.Ub(37,"label",18),d.Lc(38,"Amount"),d.Tb(),d.Ub(39,"div",19),d.Ub(40,"div",2),d.Ub(41,"span",3),d.Lc(42," $ "),d.Tb(),d.Tb(),d.Pb(43,"input",20),d.Tb(),d.Tb(),d.Ub(44,"div",7),d.Ub(45,"label",21),d.Lc(46,"Weight"),d.Tb(),d.Ub(47,"div",19),d.Ub(48,"div",2),d.Ub(49,"span",3),d.Lc(50," Kg "),d.Tb(),d.Tb(),d.Pb(51,"input",22),d.Tb(),d.Tb(),d.Ub(52,"div",23),d.Ub(53,"label",24),d.Lc(54,"Comments"),d.Tb(),d.Pb(55,"textarea",25),d.Tb(),d.Jc(56,vt,7,0,"div",26),d.Jc(57,mt,4,0,"div",27),d.Tb()),2&t&&(d.Bb(1),d.Mc(e.viewMode?"Vehicle":"Edit vehicle"),d.Bb(1),d.pc("formGroup",e.vehicleForm),d.Bb(5),d.Gb("is-invalid",e.vehicleForm.controls.vin.touched&&e.vehicleForm.controls.vin.invalid)("is-valid",!!e.vehicleSearched),d.Bb(1),d.pc("ngIf",!0),d.Bb(5),d.Gb("is-invalid",e.vehicleForm.controls.year.touched&&e.vehicleForm.controls.year.invalid),d.Bb(3),d.pc("ngForOf",e.years),d.Bb(6),d.Gb("is-invalid",e.vehicleForm.controls.make.touched&&e.vehicleForm.controls.make.invalid),d.Bb(3),d.pc("ngForOf",e.makes),d.Bb(6),d.Gb("is-invalid",e.vehicleForm.controls.model.touched&&e.vehicleForm.controls.model.invalid),d.Bb(3),d.pc("ngForOf",e.models),d.Bb(9),d.Gb("is-invalid",e.vehicleForm.controls.amount.touched&&e.vehicleForm.controls.amount.invalid),d.Bb(8),d.Gb("is-invalid",e.vehicleForm.controls.weight.touched&&e.vehicleForm.controls.weight.invalid),d.Bb(4),d.Gb("is-invalid",e.vehicleForm.controls.comments.touched&&e.vehicleForm.controls.comments.invalid),d.Bb(1),d.pc("ngIf",!e.viewMode),d.Bb(1),d.pc("ngIf",e.viewMode))},directives:[a.x,a.p,a.i,a.d,a.o,a.g,i.n,a.u,a.r,a.w,i.m,v.a,a.s,a.k],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),t})();var _t=n("Espg"),Ot=n("9Ku7"),Ct=n("1kSV");const Mt=["table"];function Pt(t,e){1&t&&(d.Ub(0,"button",42),d.Lc(1,"Actions"),d.Tb())}function wt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",14),d.fc("click",(function(){return d.Bc(t),d.jc().onSubmitToReview()})),d.Pb(1,"i",43),d.Ub(2,"span"),d.Lc(3,"Submit for review"),d.Tb(),d.Tb()}}function Tt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",14),d.fc("click",(function(){return d.Bc(t),d.jc().onSubmitToQB()})),d.Pb(1,"i",43),d.Ub(2,"span"),d.Lc(3,"Submit to QB"),d.Tb(),d.Tb()}}function xt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",14),d.fc("click",(function(){return d.Bc(t),d.jc().onSubmitToPaid()})),d.Pb(1,"i",43),d.Ub(2,"span"),d.Lc(3,"Submit to Paid"),d.Tb(),d.Tb()}}function kt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"th",44),d.Ub(1,"div",45),d.fc("change",(function(e){return d.Bc(t),d.jc().onSelectAll(e)})),d.Pb(2,"input",46),d.Pb(3,"label",47),d.Tb(),d.Tb()}if(2&t){const t=d.jc();d.Bb(2),d.pc("checked",t.allSelected)}}function Ut(t,e){if(1&t){const t=d.Vb();d.Ub(0,"td",48),d.Ub(1,"div",49),d.Ub(2,"input",50),d.fc("change",(function(n){d.Bc(t);const i=e.$implicit;return d.jc().onSelectInvoice(n,i)})),d.Tb(),d.Pb(3,"label",51),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit,n=d.jc();d.Bb(2),d.pc("id",t.id)("checked",n.selectedInvoices.includes(t)),d.Bb(1),d.pc("for",t.id)}}function St(t,e){1&t&&(d.Ub(0,"th",52),d.Lc(1,"Driver"),d.Tb())}function yt(t,e){if(1&t&&(d.Ub(0,"td",53),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Oc(" ",null==t.driver?null:t.driver.first_name," ",null==t.driver?null:t.driver.last_name," ")}}function It(t,e){1&t&&(d.Ub(0,"th",54),d.Lc(1,"Invoice #"),d.Tb())}function Bt(t,e){if(1&t&&(d.Ub(0,"td",48),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Mc(t.number)}}function Lt(t,e){1&t&&(d.Ub(0,"th",52),d.Lc(1,"Date"),d.Tb())}function Ft(t,e){if(1&t&&(d.Ub(0,"td",48),d.Lc(1),d.kc(2,"date"),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Mc(d.mc(2,1,t.date,"MM/dd/yyyy"))}}function Dt(t,e){1&t&&(d.Ub(0,"th",44),d.Lc(1,"Bill to"),d.Tb())}function zt(t,e){if(1&t&&(d.Ub(0,"td",55),d.Lc(1),d.Pb(2,"br"),d.Lc(3),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Nc(" ",null==t.bill_to?null:t.bill_to.name," "),d.Bb(2),d.Oc(" ",null==t.bill_to||null==t.bill_to.city?null:t.bill_to.city.name,", ",null==t.bill_to||null==t.bill_to.city?null:t.bill_to.city.state_code," ")}}function Et(t,e){1&t&&(d.Ub(0,"th",44),d.Lc(1,"Ship from"),d.Tb())}function Rt(t,e){if(1&t&&(d.Ub(0,"td",55),d.Lc(1),d.Pb(2,"br"),d.Lc(3),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Nc(" ",(null==t.ship_from?null:t.ship_from.name)||(null==t.quick_ship_from?null:t.quick_ship_from.name)," "),d.Bb(2),d.Oc(" ",(null==t.ship_from||null==t.ship_from.city?null:t.ship_from.city.name)||(null==t.quick_ship_from||null==t.quick_ship_from.city?null:t.quick_ship_from.city.name),", ",(null==t.ship_from||null==t.ship_from.city?null:t.ship_from.city.state_code)||(null==t.quick_ship_from||null==t.quick_ship_from.city?null:t.quick_ship_from.city.state_code)," ")}}function Vt(t,e){1&t&&(d.Ub(0,"th",44),d.Lc(1,"Ship to"),d.Tb())}function $t(t,e){if(1&t&&(d.Ub(0,"td",55),d.Lc(1),d.Pb(2,"br"),d.Lc(3),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Nc(" ",(null==t.ship_to?null:t.ship_to.name)||(null==t.quick_ship_to?null:t.quick_ship_to.name)," "),d.Bb(2),d.Oc(" ",(null==t.ship_to||null==t.ship_to.city?null:t.ship_to.city.name)||(null==t.quick_ship_to||null==t.quick_ship_to.city?null:t.quick_ship_to.city.name),", ",(null==t.ship_to||null==t.ship_to.city?null:t.ship_to.city.state_code)||(null==t.quick_ship_to||null==t.quick_ship_to.city?null:t.quick_ship_to.city.state_code)," ")}}function jt(t,e){1&t&&(d.Ub(0,"th",44),d.Lc(1,"Amount"),d.Tb())}function qt(t,e){if(1&t&&(d.Ub(0,"td",48),d.Lc(1),d.kc(2,"currency"),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Mc(d.lc(2,1,t.total))}}function At(t,e){1&t&&(d.Ub(0,"th",44),d.Lc(1,"Actions"),d.Tb())}function Nt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",58),d.Ub(1,"button",59),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().onEdit(e)})),d.Pb(2,"i",60),d.Tb(),d.Ub(3,"button",61),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().onDelete(e)})),d.Pb(4,"i",62),d.Tb(),d.Tb()}}function Jt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",63),d.Ub(1,"button",59),d.fc("click",(function(){d.Bc(t);const e=d.jc().$implicit;return d.jc().onEdit(e)})),d.Pb(2,"i",64),d.Tb(),d.Tb()}}function Gt(t,e){if(1&t&&(d.Ub(0,"td",48),d.Jc(1,Nt,5,0,"div",56),d.Jc(2,Jt,3,0,"div",57),d.Tb()),2&t){const t=d.jc();d.Bb(1),d.pc("ngIf","DRAFT"==t.tab||"SUBMITTED_FOR_REVIEW"==t.tab),d.Bb(1),d.pc("ngIf","DRAFT"!=t.tab&&"SUBMITTED_FOR_REVIEW"!=t.tab)}}function Wt(t,e){1&t&&d.Pb(0,"tr",65)}function Qt(t,e){1&t&&d.Pb(0,"tr",66)}function Ht(t,e){1&t&&(d.Ub(0,"div",67),d.Lc(1," No invoices found "),d.Tb())}let Yt=(()=>{class t{constructor(t,e,n,i,o,c){this.dialog=t,this.dialogService=e,this.invoiceService=n,this.invoiceState=i,this.notificationService=o,this.authService=c,this.paginatorPageIndex=1,this.paginatorPageSize=12,this.subscriptions=[],this.displayedColumns=["_","driver","invoice_number","date","bill_to","ship_from","ship_to","amount","actions"],this.pageSizeOptions=[12,24,50,100],this.tab="DRAFT",this.newInvoiceCurrentStep=0,this.selectedInvoices=[],this.allSelected=!1,this.isAdmin=this.authService.isAdmin(),this.items=new r.k([]);const l=i.invoices$.subscribe(t=>{this.allSelected=!1,this.invoiceState.setAllSelectedInvoices([],!1),this.invoices=t,this.items.data=this.invoices}),a=i.selectedInvoices$.subscribe(t=>{this.selectedInvoices=t});this.subscriptions.push(l,a)}ngOnInit(){this.handleFetchInvoices(this.tab,this.paginatorPageSize,this.paginatorPageIndex),this.items.filterPredicate=(t,e)=>{var n,i,o,c;return-1!==t.driver.first_name.toLowerCase().indexOf(e)||-1!==t.driver.last_name.toLowerCase().indexOf(e)||-1!==(null===(n=t.number)||void 0===n?void 0:n.toString().toLowerCase().indexOf(e))||-1!==(null===(i=t.bill_to)||void 0===i?void 0:i.name.toLowerCase().indexOf(e))||-1!==(null===(o=t.ship_from||t.quick_ship_from)||void 0===o?void 0:o.name.toLowerCase().indexOf(e))||-1!==(null===(c=t.ship_to||t.quick_ship_to)||void 0===c?void 0:c.name.toLowerCase().indexOf(e))||-1!==t.total.toString().toLowerCase().indexOf(e)},this.items.sortingDataAccessor=(t,e)=>{var n,i;switch(e){case"invoice_number":return t.number;case"date":return new Date(t.date);case"driver":return(null===(n=t.driver)||void 0===n?void 0:n.first_name)+" "+(null===(i=t.driver)||void 0===i?void 0:i.last_name);default:return t[e]}},this.items.sort=this.sort}handlePage(t){console.log(t),this.paginatorPageSize=t.pageSize,this.handleFetchInvoices(this.tab,t.pageSize,t.pageIndex+1)}setTable(t){this.paginatorPageIndex=1,this.allSelected=!1,this.invoiceState.setAllSelectedInvoices([],!1),this.tab=t,this.items.data=[],this.handleFetchInvoices(t,this.paginatorPageSize,this.paginatorPageIndex)}handleFetchInvoices(t,e,n){this.dialogService.showLoader(),this.invoiceService.fetchInvoices(t,e,n).then(t=>{this.paginatorLength=t.totalResults}).finally(()=>{this.dialogService.hideLoader()})}onEdit(t){this.invoiceState.setSelectedInvoice(t),this.openEditDialog()}openNewDialog(){this.dialog.closeAll(),this.dialog.open(q,{width:"800px",disableClose:!0,data:{onBillTo:()=>this.openBillToDialog(),onShipFrom:()=>this.openShipSelectDialog("FROM"),onShipTo:()=>this.openShipSelectDialog("TO"),onAddVehicle:()=>this.openAddVehicleDialog(),onEditVehicle:t=>this.openEditVehicleDialog(t),onDeleteVehicle:t=>this.dialogService.showConfirm({title:"Delete vehicle",msg:"Are you sure?"},()=>{this.invoiceState.deleteNewInvoiceVehicle(t._id)}),currentStep:this.newInvoiceCurrentStep,setCurrentStep:t=>{this.newInvoiceCurrentStep=t}}})}openEditDialog(){this.dialog.closeAll(),this.dialog.open(dt,{width:"800px",disableClose:!0,data:{onBillTo:()=>this.openBillToDialog("edit"),onShipFrom:()=>this.openShipSelectDialog("FROM","edit"),onShipTo:()=>this.openShipSelectDialog("TO","edit"),onAddVehicle:()=>this.openAddVehicleDialog("edit"),onEditVehicle:t=>this.openEditVehicleDialog(t,"edit"),onDeleteVehicle:t=>this.dialogService.showConfirm({title:"Delete vehicle",msg:"Are you sure?"},()=>{this.invoiceState.deleteSelectedInvoiceVehicle(t._id)}),currentStep:this.newInvoiceCurrentStep,setCurrentStep:t=>{this.newInvoiceCurrentStep=t}}})}openBillToDialog(t="new"){this.dialog.closeAll(),this.dialog.open(k,{width:"700px",disableClose:!0,data:{action:t,onBackToInvoice:()=>"edit"===t?this.openEditDialog():this.openNewDialog()}})}openShipSelectDialog(t,e="new"){this.dialog.closeAll(),this.dialog.open(X,{width:"700px",disableClose:!0,data:{onBackToInvoice:()=>"edit"===e?this.openEditDialog():this.openNewDialog(),type:t,action:e}})}openAddVehicleDialog(t="new"){this.dialog.closeAll(),this.dialog.open(C,{width:"700px",disableClose:!0,data:{action:t,onBackToInvoice:()=>"edit"===t?this.openEditDialog():this.openNewDialog()}})}openEditVehicleDialog(t,e="new"){this.dialog.closeAll(),this.dialog.open(ft,{width:"700px",disableClose:!0,data:{action:e,onBackToInvoice:()=>"edit"===e?this.openEditDialog():this.openNewDialog(),vehicle:t,viewMode:"DRAFT"!=this.tab&&"SUBMITTED_FOR_REVIEW"!=this.tab}})}onDelete(t){this.dialogService.showConfirm({title:"Delete invoice",msg:"Are you sure?"},()=>{this.invoiceService.deleteInvoice(t.id).subscribe(t=>{this.notificationService.success("Invoice deleted")})})}onSelectInvoice(t,e){this.allSelected=!1,this.invoiceState.setSelectedInvoices(e,t.target.checked)}onSelectAll(t){this.allSelected=!0,this.invoiceState.setAllSelectedInvoices(this.items.filteredData,t.target.checked)}onSubmitToReview(){var t;if(!(null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)||this.selectedInvoices.some(t=>"DRAFT"!==t.status))return;const e=this.selectedInvoices.map(t=>t.id);this.dialogService.showLoader(),this.invoiceService.submitDraftInvoices(e).subscribe(t=>{this.notificationService.success("Invoices submitted"),this.dialogService.hideLoader()},t=>{this.notificationService.error(),this.dialogService.hideLoader()})}onSubmitToQB(){var t;if(!(null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)||this.selectedInvoices.some(t=>"SUBMITTED_FOR_REVIEW"!==t.status))return;const e=this.selectedInvoices.map(t=>t.id);this.dialogService.showLoader(),this.invoiceService.submitInvoicesToQB(e).subscribe(t=>{if("warning"===t.status)return this.notificationService.warning(t.msg);this.notificationService.success("Invoices submitted"),this.dialogService.hideLoader()},t=>{this.notificationService.error(),this.dialogService.hideLoader()})}onSubmitToPaid(){var t;if(!(null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)||this.selectedInvoices.some(t=>"SUBMITTED_TO_CUSTOMER"!==t.status))return;const e=this.selectedInvoices.map(t=>t.id);this.dialogService.showLoader(),this.invoiceService.submitInvoicesToPaid(e).subscribe(t=>{this.notificationService.success("Invoices submitted"),this.dialogService.hideLoader()},t=>{this.notificationService.error(),this.dialogService.hideLoader()})}onExportPdf(){this.dialogService.showLoader(),this.invoiceService.exportToPdf(this.selectedInvoices).catch(()=>{this.notificationService.error()}).finally(()=>{this.dialogService.hideLoader()})}ngAfterViewInit(){this.items.sort=this.sort}applyFilter(t){this.allSelected=!1,this.invoiceState.setAllSelectedInvoices([],!1),this.items.filter=t.trim().toLocaleLowerCase()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.b),d.Ob(_t.a),d.Ob(B),d.Ob(g.a),d.Ob(p.a),d.Ob(Ot.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-invoice"]],viewQuery:function(t,e){var n;1&t&&(d.Fc(c.a,!0),d.Qc(o.a,!0),d.Fc(Mt,!0)),2&t&&(d.wc(n=d.gc())&&(e.sort=n.first),d.wc(n=d.gc())&&(e.paginator=n.first),d.wc(n=d.gc())&&(e.table=n.first))},decls:70,vars:21,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"disabled","click"],["ngbDropdown","",1,"d-inline-block","ml-3"],["class","btn btn-outline-primary","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"far","fa-file-alt","mr-2"],[1,"nav-wrapper","mb-4"],[1,"nav","nav-pills","nav-fill"],[1,"nav-item","cursor-pointer",3,"click"],[1,"nav-link"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","_"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","driver"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","capitalize",4,"matCellDef"],["matColumnDef","invoice_number"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","bill_to"],["mat-cell","","style","min-width: 155px",4,"matCellDef"],["matColumnDef","ship_from"],["matColumnDef","ship_to"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["ngbDropdownToggle","",1,"btn","btn-outline-primary"],[1,"far","fa-paper-plane","mr-2"],["mat-header-cell",""],[1,"custom-control","custom-checkbox",3,"change"],["id","all-check","type","checkbox",1,"custom-control-input",3,"checked"],["for","all-check",1,"custom-control-label"],["mat-cell",""],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","checked","change"],[1,"custom-control-label",3,"for"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"capitalize"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-cell","",2,"min-width","155px"],["class","action-buttons",4,"ngIf"],["class","action-buttons justify-content-center",4,"ngIf"],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],[1,"action-buttons","justify-content-center"],[1,"fas","fa-eye","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"h1",2),d.Lc(3,"Invoices"),d.Tb(),d.Ub(4,"div",3),d.Ub(5,"div",4),d.Ub(6,"div",5),d.Ub(7,"span",6),d.Pb(8,"i",7),d.Tb(),d.Tb(),d.Ub(9,"input",8),d.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),d.Tb(),d.Tb(),d.Ub(10,"button",9),d.fc("click",(function(){return e.openNewDialog()})),d.Lc(11," +Add "),d.Tb(),d.Ub(12,"div",10),d.Jc(13,Pt,2,0,"button",11),d.Ub(14,"div",12),d.Jc(15,wt,4,0,"button",13),d.Jc(16,Tt,4,0,"button",13),d.Jc(17,xt,4,0,"button",13),d.Ub(18,"button",14),d.fc("click",(function(){return e.onExportPdf()})),d.Pb(19,"i",15),d.Ub(20,"span"),d.Lc(21,"Export PDF"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(22,"div",16),d.Ub(23,"ul",17),d.Ub(24,"li",18),d.fc("click",(function(){return e.setTable("DRAFT")})),d.Ub(25,"a",19),d.Lc(26,"Driver drafts"),d.Tb(),d.Tb(),d.Ub(27,"li",18),d.fc("click",(function(){return e.setTable("SUBMITTED_FOR_REVIEW")})),d.Ub(28,"a",19),d.Lc(29,"Submitted for review"),d.Tb(),d.Tb(),d.Ub(30,"li",18),d.fc("click",(function(){return e.setTable("SUBMITTED_TO_CUSTOMER")})),d.Ub(31,"a",19),d.Lc(32,"Submitted to customers"),d.Tb(),d.Tb(),d.Ub(33,"li",18),d.fc("click",(function(){return e.setTable("PAID")})),d.Ub(34,"a",19),d.Lc(35,"Paid"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(36,"div",20),d.Ub(37,"div",21),d.Ub(38,"table",22),d.Sb(39,23),d.Jc(40,kt,4,1,"th",24),d.Jc(41,Ut,4,3,"td",25),d.Rb(),d.Sb(42,26),d.Jc(43,St,2,0,"th",27),d.Jc(44,yt,2,2,"td",28),d.Rb(),d.Sb(45,29),d.Jc(46,It,2,0,"th",30),d.Jc(47,Bt,2,1,"td",25),d.Rb(),d.Sb(48,31),d.Jc(49,Lt,2,0,"th",27),d.Jc(50,Ft,3,4,"td",25),d.Rb(),d.Sb(51,32),d.Jc(52,Dt,2,0,"th",24),d.Jc(53,zt,4,3,"td",33),d.Rb(),d.Sb(54,34),d.Jc(55,Et,2,0,"th",24),d.Jc(56,Rt,4,3,"td",33),d.Rb(),d.Sb(57,35),d.Jc(58,Vt,2,0,"th",24),d.Jc(59,$t,4,3,"td",33),d.Rb(),d.Sb(60,36),d.Jc(61,jt,2,0,"th",24),d.Jc(62,qt,3,3,"td",25),d.Rb(),d.Sb(63,37),d.Jc(64,At,2,0,"th",24),d.Jc(65,Gt,3,2,"td",25),d.Rb(),d.Jc(66,Wt,1,0,"tr",38),d.Jc(67,Qt,1,0,"tr",39),d.Tb(),d.Jc(68,Ht,2,0,"div",40),d.Ub(69,"mat-paginator",41),d.fc("page",(function(t){return e.handlePage(t)})),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Bb(10),d.pc("disabled",!e.isAdmin),d.Bb(3),d.pc("ngIf",null==e.selectedInvoices?null:e.selectedInvoices.length),d.Bb(2),d.pc("ngIf","DRAFT"===e.tab),d.Bb(1),d.pc("ngIf","SUBMITTED_FOR_REVIEW"===e.tab),d.Bb(1),d.pc("ngIf","SUBMITTED_TO_CUSTOMER"===e.tab),d.Bb(8),d.Gb("active","DRAFT"===e.tab),d.Bb(3),d.Gb("active","SUBMITTED_FOR_REVIEW"===e.tab),d.Bb(3),d.Gb("active","SUBMITTED_TO_CUSTOMER"===e.tab),d.Bb(3),d.Gb("active","PAID"===e.tab),d.Bb(4),d.pc("dataSource",e.items),d.Bb(28),d.pc("matHeaderRowDef",e.displayedColumns),d.Bb(1),d.pc("matRowDefColumns",e.displayedColumns),d.Bb(1),d.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),d.Bb(1),d.pc("length",e.paginatorLength)("pageIndex",e.paginatorPageIndex-1)("pageSize",e.paginatorPageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[Ct.d,i.n,Ct.f,Ct.e,r.j,c.a,r.c,r.e,r.b,r.g,r.i,o.a,Ct.h,r.d,r.a,c.b,r.f,r.h],pipes:[i.f,i.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.nav-wrapper[_ngcontent-%COMP%]{width:100%;border:3px solid rgb(var(--palette-blue-main-rgb));border-radius:10px}.nav-wrapper[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin:-1px;font-weight:600}.custom-control.custom-checkbox[_ngcontent-%COMP%]{--default-spacing:10px;--checkbox-border-color:rgb(var(--palette-white-rgb));--checkbox-background:rgb(var(--palette-blue-main-rgb));--checkbox-color:rgb(var(--palette-white-rgb))}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]   .custom-label[_ngcontent-%COMP%]{margin-left:calc(var(--default-spacing) / 2)}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:22px;height:22px;border-radius:6px;top:0}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:22px;height:22px;top:0}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{color:var(--checkbox-color);border-color:var(--checkbox-border-color);background-color:var(--checkbox-background)}"]}),t})();var Kt=n("tyNb"),Xt=n("PCNd"),Zt=n("7EHt");const te=[{path:"",component:Yt}];let ee=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Kt.e.forChild(te),Xt.a,Zt.a]]}),t})()}}]);
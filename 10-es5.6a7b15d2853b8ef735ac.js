!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{M4UK:function(e,o,i){"use strict";i.r(o),i.d(o,"companyRoutes",(function(){return on})),i.d(o,"CompanyModule",(function(){return rn}));var r=i("ofXK"),a=i("M9IT"),c=i("Dh3D"),l=i("+0xr"),b=i("3Pt+"),s=i("0IaG"),d=i("AJa1"),m=i("fXoL"),u=i("Sdjb"),p=i("U12X"),g=i("38VU"),f=i("xHqg"),v=i("NFeN"),h=i("Xa2L");function _(t,e){1&t&&(m.Ub(0,"div",49),m.Pb(1,"mat-spinner",50),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function C(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function x(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function O(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function P(t,e){if(1&t&&(m.Ub(0,"option",52),m.Lc(1),m.Tb()),2&t){var n=e.$implicit,o=m.jc();m.pc("value",n.code)("selected",n.code===o.customer.city.state_code),m.Bb(1),m.Nc(" ",n.name," ")}}function y(t,e){if(1&t&&(m.Ub(0,"option",52),m.Lc(1),m.Tb()),2&t){var n=e.$implicit,o=m.jc();m.pc("value",n.id)("selected",n.id===o.customer.city.id),m.Bb(1),m.Nc(" ",n.name," ")}}function M(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function T(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function w(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function U(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function k(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function L(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function F(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function B(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function S(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function I(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function z(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}function D(t,e){1&t&&(m.Ub(0,"div",51),m.Lc(1,"Invalid field"),m.Tb())}var J,N=((J=function(){function e(n,o,i,r,a,c){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.customerService=r,this.geoService=a,this.notificationService=c,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.customer=this.data.customer,this.buildForms()}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e),this.selectedState=this.customer.city.state_code,this.geoService.fetchCitiesByState(this.customer.city.state_code)}},{key:"buildForms",value:function(){var t;this.customerDataForm=this.fb.group({name:[this.customer.name,[b.v.required]],address_line_1:[this.customer.address_line_1,[b.v.required]],address_line_2:[null!==(t=this.customer.address_line_2)&&void 0!==t?t:"",[]],city_id:[this.customer.city.id,[b.v.required]],zip:[this.customer.zip,[b.v.required,b.v.pattern(d.a.zip)]],main_phone:[this.customer.main_phone,[b.v.required,b.v.pattern(d.a.numbers)]],main_phone_extension:[this.customer.main_phone_extension,[b.v.pattern(d.a.numbers)]],fax:[this.customer.fax,[b.v.pattern(d.a.numbers)]]}),this.primaryContactForm=this.fb.group({first_name:[this.customer.primary_contact.first_name,[]],last_name:[this.customer.primary_contact.last_name,[]],email:[this.customer.primary_contact.email,[,b.v.email]],office_phone:[this.customer.primary_contact.office_phone,[b.v.pattern(d.a.numbers)]],office_phone_extension:[this.customer.primary_contact.office_phone_extension,[b.v.pattern(d.a.numbers)]],fax:[this.customer.primary_contact.fax,[b.v.pattern(d.a.numbers)]],mobile_phone:[this.customer.primary_contact.mobile_phone,[b.v.pattern(d.a.numbers)]],mobile_phone_extension:[this.customer.primary_contact.mobile_phone_extension,[b.v.pattern(d.a.numbers)]]})}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerDataForm.controls.city_id.reset()}},{key:"goBack",value:function(t){t.previous()}},{key:"saveFirst",value:function(t){if(this.customerDataForm.invalid)return Object.values(this.customerDataForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));t.next()}},{key:"onSubmit",value:function(){var t=this;if(this.primaryContactForm.invalid)return Object.values(this.primaryContactForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0;var e=Object.assign(Object.assign({},this.customerDataForm.value),{primary_contact:this.primaryContactForm.value});this.customerService.updateCustomer(e,this.customer.id).subscribe((function(e){t.isLoading=!1,t.notificationService.success("Customer updated"),t.dialogRef.close()}),(function(e){t.notificationService.error(),t.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||J)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(u.a),m.Ob(p.a),m.Ob(g.a))},J.\u0275cmp=m.Ib({type:J,selectors:[["app-edit-customer-dialog"]],decls:115,vars:53,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","Customer data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"col-12","col-md-6","mb-3"],["for","address1",1,"text-dark","text-base"],["id","address1","name","address1","type","text","formControlName","address_line_1",1,"form-control"],["for","address2",1,"text-dark","text-base"],["id","address2","name","address2","type","text","formControlName","address_line_2",1,"form-control"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city_id",1,"custom-select","form-control"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","main_phone",1,"form-control"],["for","phone_extension",1,"text-dark","text-base"],["id","phone_extension","name","phone_extension","type","text","formControlName","main_phone_extension",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Primary contact"],[1,"col-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","office_phone_extension",1,"text-dark","text-base"],["id","office_phone_extension","name","office_phone_extension","type","text","formControlName","office_phone_extension",1,"form-control"],["for","mobile_phone",1,"text-dark","text-base"],["id","mobile_phone","name","mobile_phone","type","text","formControlName","mobile_phone",1,"form-control"],["for","mobile_phone_extension",1,"text-dark","text-base"],["id","mobile_phone_extension","name","mobile_phone_extension","type","text","formControlName","mobile_phone_extension",1,"form-control"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Jc(1,_,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"Edit Customer"),m.Tb(),m.Ub(4,"mat-horizontal-stepper",2,3),m.Ub(6,"mat-step",4),m.Ub(7,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.saveFirst(t)})),m.Ub(8,"div",6),m.Ub(9,"label",7),m.Lc(10,"Customer name"),m.Tb(),m.Pb(11,"input",8),m.Jc(12,C,2,0,"div",9),m.Tb(),m.Ub(13,"div",10),m.Ub(14,"label",11),m.Lc(15,"Address Line 1"),m.Tb(),m.Pb(16,"input",12),m.Jc(17,x,2,0,"div",9),m.Tb(),m.Ub(18,"div",10),m.Ub(19,"label",13),m.Lc(20,"Address Line 2"),m.Tb(),m.Pb(21,"input",14),m.Jc(22,O,2,0,"div",9),m.Tb(),m.Ub(23,"div",10),m.Ub(24,"label",13),m.Lc(25,"State"),m.Tb(),m.Ub(26,"div",15),m.Ub(27,"select",16),m.fc("change",(function(t){return e.onStateChange(t)})),m.Ub(28,"option",17),m.Lc(29,"Select state..."),m.Tb(),m.Jc(30,P,2,3,"option",18),m.Tb(),m.Pb(31,"mat-icon",19),m.Tb(),m.Tb(),m.Ub(32,"div",10),m.Ub(33,"label",13),m.Lc(34,"City"),m.Tb(),m.Ub(35,"div",15),m.Ub(36,"select",20),m.Jc(37,y,2,3,"option",18),m.Tb(),m.Pb(38,"mat-icon",19),m.Tb(),m.Tb(),m.Ub(39,"div",6),m.Ub(40,"label",21),m.Lc(41,"Zip"),m.Tb(),m.Pb(42,"input",22),m.Jc(43,M,2,0,"div",9),m.Tb(),m.Ub(44,"div",6),m.Ub(45,"label",23),m.Lc(46,"Main phone"),m.Tb(),m.Pb(47,"input",24),m.Jc(48,T,2,0,"div",9),m.Tb(),m.Ub(49,"div",6),m.Ub(50,"label",25),m.Lc(51,"Main phone extension"),m.Tb(),m.Pb(52,"input",26),m.Jc(53,w,2,0,"div",9),m.Tb(),m.Ub(54,"div",6),m.Ub(55,"label",27),m.Lc(56,"Fax"),m.Tb(),m.Pb(57,"input",28),m.Jc(58,U,2,0,"div",9),m.Tb(),m.Ub(59,"div",29),m.Ub(60,"div",30),m.Ub(61,"button",31),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(62,"Cancel"),m.Tb(),m.Tb(),m.Ub(63,"div",30),m.Ub(64,"button",32),m.Lc(65,"Next"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(66,"mat-step",33),m.Ub(67,"form",5),m.fc("ngSubmit",(function(){return e.onSubmit()})),m.Ub(68,"div",34),m.Ub(69,"label",35),m.Lc(70,"First name"),m.Tb(),m.Pb(71,"input",36),m.Jc(72,k,2,0,"div",9),m.Tb(),m.Ub(73,"div",34),m.Ub(74,"label",37),m.Lc(75,"Last name"),m.Tb(),m.Pb(76,"input",38),m.Jc(77,L,2,0,"div",9),m.Tb(),m.Ub(78,"div",6),m.Ub(79,"label",37),m.Lc(80,"Email"),m.Tb(),m.Pb(81,"input",39),m.Jc(82,F,2,0,"div",9),m.Tb(),m.Ub(83,"div",6),m.Ub(84,"label",40),m.Lc(85,"Office phone"),m.Tb(),m.Pb(86,"input",41),m.Jc(87,B,2,0,"div",9),m.Tb(),m.Ub(88,"div",6),m.Ub(89,"label",42),m.Lc(90,"Office phone extension"),m.Tb(),m.Pb(91,"input",43),m.Jc(92,S,2,0,"div",9),m.Tb(),m.Ub(93,"div",6),m.Ub(94,"label",27),m.Lc(95,"Fax"),m.Tb(),m.Pb(96,"input",28),m.Jc(97,I,2,0,"div",9),m.Tb(),m.Ub(98,"div",6),m.Ub(99,"label",44),m.Lc(100,"Mobile phone"),m.Tb(),m.Pb(101,"input",45),m.Jc(102,z,2,0,"div",9),m.Tb(),m.Ub(103,"div",6),m.Ub(104,"label",46),m.Lc(105,"Mobile phone extension"),m.Tb(),m.Pb(106,"input",47),m.Jc(107,D,2,0,"div",9),m.Tb(),m.Ub(108,"div",29),m.Ub(109,"div",30),m.Ub(110,"button",31),m.fc("click",(function(){m.Bc(n);var t=m.xc(5);return e.goBack(t)})),m.Lc(111,"Back"),m.Tb(),m.Tb(),m.Ub(112,"div",30),m.Ub(113,"button",48),m.Lc(114,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(5),m.pc("completed",e.customerDataForm.valid),m.Bb(1),m.pc("formGroup",e.customerDataForm),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.name.touched&&e.customerDataForm.controls.name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.address_line_1.touched&&e.customerDataForm.controls.address_line_1.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.address_line_2.touched&&e.customerDataForm.controls.address_line_2.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(8),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.customerDataForm.controls.city_id.touched&&e.customerDataForm.controls.city_id.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedState]),m.Bb(5),m.Gb("is-invalid",e.customerDataForm.controls.zip.touched&&e.customerDataForm.controls.zip.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.main_phone.touched&&e.customerDataForm.controls.main_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.main_phone_extension.touched&&e.customerDataForm.controls.main_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.fax.touched&&e.customerDataForm.controls.fax.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(9),m.pc("formGroup",e.primaryContactForm),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.first_name.touched&&e.primaryContactForm.controls.first_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.last_name.touched&&e.primaryContactForm.controls.last_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.email.touched&&e.primaryContactForm.controls.email.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.office_phone.touched&&e.primaryContactForm.controls.office_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.office_phone_extension.touched&&e.primaryContactForm.controls.office_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.fax.touched&&e.primaryContactForm.controls.fax.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone.touched&&e.primaryContactForm.controls.mobile_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone_extension.touched&&e.primaryContactForm.controls.mobile_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0))},directives:[r.n,f.a,f.b,b.x,b.p,b.i,b.d,b.o,b.g,b.r,b.w,r.m,v.a,b.u,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-customer-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),J);function E(t,e){1&t&&(m.Ub(0,"div",51),m.Pb(1,"mat-spinner",52),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function A(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function G(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function R(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function j(t,e){if(1&t&&(m.Ub(0,"option",54),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.code),m.Bb(1),m.Mc(n.name)}}function q(t,e){if(1&t&&(m.Ub(0,"option",54),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.id),m.Bb(1),m.Mc(n.name)}}function $(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function V(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function H(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function Q(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function X(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function K(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function Z(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function W(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function Y(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function tt(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function et(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function nt(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}var ot,it=((ot=function(){function e(n,o,i,r,a,c){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.customerService=r,this.geoService=a,this.notificationService=c,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e)}},{key:"buildForms",value:function(){this.customerDataForm=this.fb.group({name:["",[b.v.required]],address_line_1:["",[b.v.required]],address_line_2:["",[]],city_id:["",[b.v.required,b.v.pattern(d.a.mongoId)]],zip:["",[b.v.required,b.v.pattern(d.a.zip)]],main_phone:["",[b.v.required,b.v.pattern(d.a.numbers)]],main_phone_extension:["",[b.v.pattern(d.a.numbers)]],fax:["",[b.v.pattern(d.a.numbers)]]}),this.primaryContactForm=this.fb.group({first_name:["",[]],last_name:["",[]],email:["",[,b.v.email]],office_phone:["",[b.v.pattern(d.a.numbers)]],office_phone_extension:["",[b.v.pattern(d.a.numbers)]],fax:["",[b.v.pattern(d.a.numbers)]],mobile_phone:["",[b.v.pattern(d.a.numbers)]],mobile_phone_extension:["",[b.v.pattern(d.a.numbers)]]})}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerDataForm.controls.city_id.reset()}},{key:"goBack",value:function(t){t.previous()}},{key:"saveFirst",value:function(t){if(this.customerDataForm.invalid)return Object.values(this.customerDataForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));t.next()}},{key:"onSubmit",value:function(){var t=this;if(this.primaryContactForm.invalid)return Object.values(this.primaryContactForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0;var e=Object.assign(Object.assign({},this.customerDataForm.value),{primary_contact:this.primaryContactForm.value});this.customerService.saveCustomer(e).subscribe((function(e){t.isLoading=!1,t.notificationService.success("Customer added"),t.dialogRef.close()}),(function(e){t.notificationService.error(),t.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||ot)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(u.a),m.Ob(p.a),m.Ob(g.a))},ot.\u0275cmp=m.Ib({type:ot,selectors:[["app-new-customer-dialog"]],decls:115,vars:53,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","Customer data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form","custom-scroll",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"col-12","col-md-6","mb-3"],["for","address1",1,"text-dark","text-base"],["id","address1","name","address1","type","text","formControlName","address_line_1",1,"form-control"],["for","address2",1,"text-dark","text-base"],["id","address2","name","address2","type","text","formControlName","address_line_2",1,"form-control"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city_id",1,"text-dark","text-base"],["formControlName","city_id",1,"custom-select","form-control"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","main_phone",1,"form-control"],["for","phone_extension",1,"text-dark","text-base"],["id","phone_extension","name","phone_extension","type","text","formControlName","main_phone_extension",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Primary contact"],[1,"col-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","office_phone_extension",1,"text-dark","text-base"],["id","office_phone_extension","name","office_phone_extension","type","text","formControlName","office_phone_extension",1,"form-control"],["for","mobile_phone",1,"text-dark","text-base"],["id","mobile_phone","name","mobile_phone","type","text","formControlName","mobile_phone",1,"form-control"],["for","mobile_phone_extension",1,"text-dark","text-base"],["id","mobile_phone_extension","name","mobile_phone_extension","type","text","formControlName","mobile_phone_extension",1,"form-control"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Jc(1,E,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"New Customer"),m.Tb(),m.Ub(4,"mat-horizontal-stepper",2,3),m.Ub(6,"mat-step",4),m.Ub(7,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.saveFirst(t)})),m.Ub(8,"div",6),m.Ub(9,"label",7),m.Lc(10,"Customer name"),m.Tb(),m.Pb(11,"input",8),m.Jc(12,A,2,0,"div",9),m.Tb(),m.Ub(13,"div",10),m.Ub(14,"label",11),m.Lc(15,"Address Line 1"),m.Tb(),m.Pb(16,"input",12),m.Jc(17,G,2,0,"div",9),m.Tb(),m.Ub(18,"div",10),m.Ub(19,"label",13),m.Lc(20,"Address Line 2"),m.Tb(),m.Pb(21,"input",14),m.Jc(22,R,2,0,"div",9),m.Tb(),m.Ub(23,"div",10),m.Ub(24,"label",15),m.Lc(25,"State"),m.Tb(),m.Ub(26,"div",16),m.Ub(27,"select",17),m.fc("change",(function(t){return e.onStateChange(t)})),m.Ub(28,"option",18),m.Lc(29,"Select state..."),m.Tb(),m.Jc(30,j,2,2,"option",19),m.Tb(),m.Pb(31,"mat-icon",20),m.Tb(),m.Tb(),m.Ub(32,"div",10),m.Ub(33,"label",21),m.Lc(34,"City"),m.Tb(),m.Ub(35,"div",16),m.Ub(36,"select",22),m.Jc(37,q,2,2,"option",19),m.Tb(),m.Pb(38,"mat-icon",20),m.Tb(),m.Tb(),m.Ub(39,"div",6),m.Ub(40,"label",23),m.Lc(41,"Zip"),m.Tb(),m.Pb(42,"input",24),m.Jc(43,$,2,0,"div",9),m.Tb(),m.Ub(44,"div",6),m.Ub(45,"label",25),m.Lc(46,"Main phone"),m.Tb(),m.Pb(47,"input",26),m.Jc(48,V,2,0,"div",9),m.Tb(),m.Ub(49,"div",6),m.Ub(50,"label",27),m.Lc(51,"Main phone extension"),m.Tb(),m.Pb(52,"input",28),m.Jc(53,H,2,0,"div",9),m.Tb(),m.Ub(54,"div",6),m.Ub(55,"label",29),m.Lc(56,"Fax"),m.Tb(),m.Pb(57,"input",30),m.Jc(58,Q,2,0,"div",9),m.Tb(),m.Ub(59,"div",31),m.Ub(60,"div",32),m.Ub(61,"button",33),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(62,"Cancel"),m.Tb(),m.Tb(),m.Ub(63,"div",32),m.Ub(64,"button",34),m.Lc(65,"Next"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(66,"mat-step",35),m.Ub(67,"form",5),m.fc("ngSubmit",(function(){return e.onSubmit()})),m.Ub(68,"div",36),m.Ub(69,"label",37),m.Lc(70,"First name"),m.Tb(),m.Pb(71,"input",38),m.Jc(72,X,2,0,"div",9),m.Tb(),m.Ub(73,"div",36),m.Ub(74,"label",39),m.Lc(75,"Last name"),m.Tb(),m.Pb(76,"input",40),m.Jc(77,K,2,0,"div",9),m.Tb(),m.Ub(78,"div",6),m.Ub(79,"label",39),m.Lc(80,"Email"),m.Tb(),m.Pb(81,"input",41),m.Jc(82,Z,2,0,"div",9),m.Tb(),m.Ub(83,"div",6),m.Ub(84,"label",42),m.Lc(85,"Office phone"),m.Tb(),m.Pb(86,"input",43),m.Jc(87,W,2,0,"div",9),m.Tb(),m.Ub(88,"div",6),m.Ub(89,"label",44),m.Lc(90,"Office phone extension"),m.Tb(),m.Pb(91,"input",45),m.Jc(92,Y,2,0,"div",9),m.Tb(),m.Ub(93,"div",6),m.Ub(94,"label",29),m.Lc(95,"Fax"),m.Tb(),m.Pb(96,"input",30),m.Jc(97,tt,2,0,"div",9),m.Tb(),m.Ub(98,"div",6),m.Ub(99,"label",46),m.Lc(100,"Mobile phone"),m.Tb(),m.Pb(101,"input",47),m.Jc(102,et,2,0,"div",9),m.Tb(),m.Ub(103,"div",6),m.Ub(104,"label",48),m.Lc(105,"Mobile phone extension"),m.Tb(),m.Pb(106,"input",49),m.Jc(107,nt,2,0,"div",9),m.Tb(),m.Ub(108,"div",31),m.Ub(109,"div",32),m.Ub(110,"button",33),m.fc("click",(function(){m.Bc(n);var t=m.xc(5);return e.goBack(t)})),m.Lc(111,"Back"),m.Tb(),m.Tb(),m.Ub(112,"div",32),m.Ub(113,"button",50),m.Lc(114,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(5),m.pc("completed",e.customerDataForm.valid),m.Bb(1),m.pc("formGroup",e.customerDataForm),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.name.touched&&e.customerDataForm.controls.name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.address_line_1.touched&&e.customerDataForm.controls.address_line_1.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.address_line_2.touched&&e.customerDataForm.controls.address_line_2.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(8),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.customerDataForm.controls.city_id.touched&&e.customerDataForm.controls.city_id.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedState]),m.Bb(5),m.Gb("is-invalid",e.customerDataForm.controls.zip.touched&&e.customerDataForm.controls.zip.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.main_phone.touched&&e.customerDataForm.controls.main_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.main_phone_extension.touched&&e.customerDataForm.controls.main_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.customerDataForm.controls.fax.touched&&e.customerDataForm.controls.fax.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(9),m.pc("formGroup",e.primaryContactForm),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.first_name.touched&&e.primaryContactForm.controls.first_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.last_name.touched&&e.primaryContactForm.controls.last_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.email.touched&&e.primaryContactForm.controls.email.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.office_phone.touched&&e.primaryContactForm.controls.office_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.office_phone_extension.touched&&e.primaryContactForm.controls.office_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.fax.touched&&e.primaryContactForm.controls.fax.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone.touched&&e.primaryContactForm.controls.mobile_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone_extension.touched&&e.primaryContactForm.controls.mobile_phone_extension.invalid),m.Bb(1),m.pc("ngIf",!0))},directives:[r.n,f.a,f.b,b.x,b.p,b.i,b.d,b.o,b.g,b.r,b.w,r.m,v.a,b.u,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}[_nghost-%COMP%]{position:relative}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-customer-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),ot),rt=i("Espg");function at(t,e){1&t&&(m.Ub(0,"div",24),m.Pb(1,"mat-spinner",25),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function ct(t,e){1&t&&(m.Ub(0,"th",26),m.Lc(1,"Name"),m.Tb())}function lt(t,e){if(1&t&&(m.Ub(0,"td",27),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.name)}}function bt(t,e){1&t&&(m.Ub(0,"th",26),m.Lc(1,"Address"),m.Tb())}function st(t,e){if(1&t&&(m.Ub(0,"td",27),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.address_line_1)}}function dt(t,e){1&t&&(m.Ub(0,"th",26),m.Lc(1,"Contact name"),m.Tb())}function mt(t,e){if(1&t&&(m.Ub(0,"td",27),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Nc(" ",(null==n.primary_contact?null:n.primary_contact.first_name)+" "+(null==n.primary_contact?null:n.primary_contact.last_name)," ")}}function ut(t,e){1&t&&(m.Ub(0,"th",26),m.Lc(1,"Actions"),m.Tb())}function pt(t,e){if(1&t){var n=m.Vb();m.Ub(0,"td",27),m.Ub(1,"div",28),m.Ub(2,"button",29),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().openEditDialog(t)})),m.Pb(3,"i",30),m.Tb(),m.Ub(4,"button",31),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().onDelete(t)})),m.Pb(5,"i",32),m.Tb(),m.Tb(),m.Tb()}}function gt(t,e){1&t&&m.Pb(0,"tr",33)}function ft(t,e){1&t&&m.Pb(0,"tr",34)}function vt(t,e){1&t&&(m.Ub(0,"div",35),m.Lc(1,"No customers found"),m.Tb())}var ht,_t=((ht=function(){function e(n,o,i,r){var a=this;t(this,e),this.dialog=n,this.dialogService=o,this.customerService=i,this.notificationService=r,this.displayedColumns=["name","address","contact_name","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.items=new l.k([]);var c=i.customers.subscribe((function(t){a.customers=t,a.items.data=t}));this.subscriptions.push(c)}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.dialogService.showLoader(),this.customerService.fetchCustomers().finally((function(){t.dialogService.hideLoader()})),this.items.filterPredicate=function(t,e){var n,o,i,r;return-1!==(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e))||-1!==(null===(o=t.address_line_1)||void 0===o?void 0:o.toLowerCase().indexOf(e))||-1!==(null===(i=t.primary_contact)||void 0===i?void 0:i.first_name.toString().toLowerCase().indexOf(e))||-1!==(null===(r=t.primary_contact)||void 0===r?void 0:r.last_name.toString().toLowerCase().indexOf(e))}}},{key:"applyFilter",value:function(t){this.items.filter=t.trim().toLocaleLowerCase()}},{key:"openNewDialog",value:function(){this.dialog.open(it,{width:"700px"})}},{key:"openEditDialog",value:function(t){this.dialog.open(N,{width:"700px",data:{customer:t}})}},{key:"onDelete",value:function(t){var e=this;this.dialogService.showConfirm({title:"Delete customer",msg:"Are you sure?"},(function(){e.loading=!0,e.customerService.deleteCustomer(t.id).subscribe((function(t){e.loading=!1,e.notificationService.success("Customer deleted")}),(function(t){e.loading=!1,e.notificationService.error()}))}))}},{key:"ngAfterViewInit",value:function(){this.items.sort=this.sort,this.items.paginator=this.paginator}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||ht)(m.Ob(s.b),m.Ob(rt.a),m.Ob(u.a),m.Ob(g.a))},ht.\u0275cmp=m.Ib({type:ht,selectors:[["app-customers"]],viewQuery:function(t,e){var n;1&t&&(m.Qc(c.a,!0),m.Qc(a.a,!0)),2&t&&(m.wc(n=m.gc())&&(e.sort=n.first),m.wc(n=m.gc())&&(e.paginator=n.first))},decls:32,vars:6,consts:[[1,"px-2","px-md-5","py-3","position-relative"],["class","loader",4,"ngIf"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","contact_name"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center border py-3 mt-n3 table-width",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],[1,"loader"],[3,"diameter"],["mat-header-cell",""],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"text-center","border","py-3","mt-n3","table-width"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Jc(1,at,2,1,"div",1),m.Ub(2,"div",2),m.Ub(3,"h1",3),m.Lc(4,"Customers"),m.Tb(),m.Ub(5,"div",4),m.Ub(6,"div",5),m.Ub(7,"div",6),m.Ub(8,"span",7),m.Pb(9,"i",8),m.Tb(),m.Tb(),m.Ub(10,"input",9),m.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),m.Tb(),m.Tb(),m.Ub(11,"button",10),m.fc("click",(function(){return e.openNewDialog()})),m.Lc(12,"+Add"),m.Tb(),m.Tb(),m.Tb(),m.Ub(13,"div",11),m.Ub(14,"div",12),m.Ub(15,"table",13),m.Sb(16,14),m.Jc(17,ct,2,0,"th",15),m.Jc(18,lt,2,1,"td",16),m.Rb(),m.Sb(19,17),m.Jc(20,bt,2,0,"th",15),m.Jc(21,st,2,1,"td",16),m.Rb(),m.Sb(22,18),m.Jc(23,dt,2,0,"th",15),m.Jc(24,mt,2,1,"td",16),m.Rb(),m.Sb(25,19),m.Jc(26,ut,2,0,"th",15),m.Jc(27,pt,6,0,"td",16),m.Rb(),m.Jc(28,gt,1,0,"tr",20),m.Jc(29,ft,1,0,"tr",21),m.Tb(),m.Jc(30,vt,2,0,"div",22),m.Pb(31,"mat-paginator",23),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(1),m.pc("ngIf",e.loading),m.Bb(14),m.pc("dataSource",e.items),m.Bb(13),m.pc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.pc("matRowDefColumns",e.displayedColumns),m.Bb(1),m.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),m.Bb(1),m.pc("pageSizeOptions",e.pageSizeOptions))},directives:[r.n,l.j,c.a,l.c,l.e,l.b,l.g,l.i,a.a,h.b,l.d,l.a,l.f,l.h],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}"]}),ht),Ct=i("mrSG"),xt=i("82aN"),Ot=i("tyNb"),Pt=i("9Ku7");function yt(t,e){1&t&&(m.Ub(0,"div",38),m.Pb(1,"mat-spinner",39),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function Mt(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function Tt(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function wt(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function Ut(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function kt(t,e){if(1&t&&(m.Ub(0,"option",41),m.Lc(1),m.Tb()),2&t){var n=e.$implicit,o=m.jc();m.pc("value",n.code)("selected",n.code===(null==o.company?null:o.company.city.state_code)),m.Bb(1),m.Nc(" ",n.name," ")}}function Lt(t,e){if(1&t&&(m.Ub(0,"option",42),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.id),m.Bb(1),m.Mc(n.name)}}function Ft(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function Bt(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function St(t,e){1&t&&(m.Ub(0,"div",40),m.Lc(1,"Invalid field"),m.Tb())}function It(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",43),m.Ub(1,"div",44),m.Ub(2,"button",45),m.fc("click",(function(){return m.Bc(n),m.jc().onCancel()})),m.Lc(3,"Cancel"),m.Tb(),m.Tb(),m.Ub(4,"div",44),m.Ub(5,"button",46),m.Lc(6,"Save"),m.Tb(),m.Tb(),m.Tb()}if(2&t){var o=m.jc();m.Bb(5),m.pc("disabled",!o.isEditionAble)}}var zt,Dt=((zt=function(){function e(n,o,i,r,a,c){var l=this;t(this,e),this.companyService=n,this.fb=o,this.geoService=i,this.notificationService=r,this.router=a,this.authService=c,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.isEditionAble=!1,this.isEditionAble=this.authService.isAdmin(),this.buildForm();var b=this.companyService.company.subscribe((function(t){l.company=t,t&&l.loadFormData()}));this.subscriptions.push(b)}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.company||this.companyService.fetchCompany(),this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e)}},{key:"buildForm",value:function(){var t,e,n,o,i,r,a,c,l;this.profileForm=this.fb.group({name:[{value:(null===(t=this.company)||void 0===t?void 0:t.name)||"",disabled:!this.isEditionAble},[b.v.required]],contact_name:[{value:(null===(e=this.company)||void 0===e?void 0:e.contact_name)||"",disabled:!this.isEditionAble},[b.v.required]],address_line_1:[{value:(null===(n=this.company)||void 0===n?void 0:n.address_line_1)||"",disabled:!this.isEditionAble},[b.v.required]],address_line_2:[{value:(null===(o=this.company)||void 0===o?void 0:o.address_line_2)||"",disabled:!this.isEditionAble},[]],zip:[{value:(null===(i=this.company)||void 0===i?void 0:i.zip)||"",disabled:!this.isEditionAble},[b.v.required]],office_phone:[{value:(null===(r=this.company)||void 0===r?void 0:r.office_phone)||"",disabled:!this.isEditionAble},[b.v.required]],fax:[{value:(null===(a=this.company)||void 0===a?void 0:a.fax)||"",disabled:!this.isEditionAble},[b.v.required]],city:[{value:(null===(c=this.company)||void 0===c?void 0:c.city.id)||"",disabled:!this.isEditionAble},[b.v.required]],starting_invoice_number:[{value:(null===(l=this.company)||void 0===l?void 0:l.starting_invoice_number)||"",disabled:!0}]})}},{key:"loadFormData",value:function(){var t,e,n;this.company&&(this.profileForm.setValue({name:this.company.name,contact_name:this.company.contact_name,address_line_1:this.company.address_line_1,address_line_2:null!==(t=this.company.address_line_2)&&void 0!==t?t:"",zip:this.company.zip,office_phone:null!==(e=this.company.office_phone)&&void 0!==e?e:"",fax:null!==(n=this.company.fax)&&void 0!==n?n:"",city:this.company.city.id,starting_invoice_number:this.company.starting_invoice_number}),this.selectedState=this.company.city.state_code,this.geoService.fetchCitiesByState(this.company.city.state_code))}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.profileForm.controls.city.reset()}},{key:"onCancel",value:function(){this.router.navigate(["/"])}},{key:"onSubmit",value:function(){var t=this;if(this.profileForm.invalid)return Object.values(this.profileForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0;var e=this.profileForm.value,n=Object(Ct.b)(e,["starting_invoice_number"]);this.companyService.updateCompany(n).subscribe((function(e){t.isLoading=!1,t.notificationService.success("Profile updated")}),(function(e){t.notificationService.error(),t.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||zt)(m.Ob(xt.a),m.Ob(b.e),m.Ob(p.a),m.Ob(g.a),m.Ob(Ot.b),m.Ob(Pt.a))},zt.\u0275cmp=m.Ib({type:zt,selectors:[["app-profile"]],decls:67,vars:29,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"mb-4"],[1,"w-100","border-primary-2","rounded-xl"],[1,"w-100","p-3","bg-primary","text-white","font-bold"],[1,"w-100","p-3","loader-container"],["class","loader",4,"ngIf"],[1,"form-group","row","mt-4","profile-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","contact_name",1,"text-dark","text-base"],["id","contact_name","name","contact_name","type","text","formControlName","contact_name",1,"form-control"],[1,"col-12","col-md-6","mb-3"],["for","address_line_1",1,"text-dark","text-base"],["id","address_line_1","name","address_line_1","type","text","formControlName","address_line_1",1,"form-control"],["for","address_line_2",1,"text-dark","text-base"],["id","address_line_2","name","address_line_2","type","text","formControlName","address_line_2",1,"form-control"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["id","state",1,"custom-select","form-control",3,"disabled","change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city",1,"text-dark","text-base"],["id","city","formControlName","city",1,"custom-select","form-control"],[3,"value",4,"ngFor","ngForOf"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","starting_invoice_number",1,"text-dark","text-base"],["id","starting_invoice_number","name","starting_invoice_number","type","text","formControlName","starting_invoice_number",1,"form-control"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-between mt-2",4,"ngIf"],[1,"loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"],[3,"value"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success",3,"disabled"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"div",1),m.Ub(2,"h1",2),m.Lc(3,"Company Profile"),m.Tb(),m.Tb(),m.Ub(4,"div",3),m.Ub(5,"div",4),m.Ub(6,"div",5),m.Lc(7,"Profile info"),m.Tb(),m.Ub(8,"div",6),m.Jc(9,yt,2,1,"div",7),m.Ub(10,"form",8),m.fc("ngSubmit",(function(){return e.onSubmit()})),m.Ub(11,"div",9),m.Ub(12,"label",10),m.Lc(13,"Company name"),m.Tb(),m.Pb(14,"input",11),m.Jc(15,Mt,2,0,"div",12),m.Tb(),m.Ub(16,"div",9),m.Ub(17,"label",13),m.Lc(18,"Company contact name"),m.Tb(),m.Pb(19,"input",14),m.Jc(20,Tt,2,0,"div",12),m.Tb(),m.Ub(21,"div",15),m.Ub(22,"label",16),m.Lc(23,"Address Line 1"),m.Tb(),m.Pb(24,"input",17),m.Jc(25,wt,2,0,"div",12),m.Tb(),m.Ub(26,"div",15),m.Ub(27,"label",18),m.Lc(28,"Address Line 2"),m.Tb(),m.Pb(29,"input",19),m.Jc(30,Ut,2,0,"div",12),m.Tb(),m.Ub(31,"div",15),m.Ub(32,"label",20),m.Lc(33,"State"),m.Tb(),m.Ub(34,"div",21),m.Ub(35,"select",22),m.fc("change",(function(t){return e.onStateChange(t)})),m.Ub(36,"option",23),m.Lc(37,"Select state..."),m.Tb(),m.Jc(38,kt,2,3,"option",24),m.Tb(),m.Pb(39,"mat-icon",25),m.Tb(),m.Tb(),m.Ub(40,"div",15),m.Ub(41,"label",26),m.Lc(42,"City"),m.Tb(),m.Ub(43,"div",21),m.Ub(44,"select",27),m.Jc(45,Lt,2,2,"option",28),m.Tb(),m.Pb(46,"mat-icon",25),m.Tb(),m.Tb(),m.Ub(47,"div",15),m.Ub(48,"label",29),m.Lc(49,"Zip"),m.Tb(),m.Pb(50,"input",30),m.Jc(51,Ft,2,0,"div",12),m.Tb(),m.Ub(52,"div",15),m.Ub(53,"label",31),m.Lc(54,"Fax"),m.Tb(),m.Pb(55,"input",32),m.Jc(56,Bt,2,0,"div",12),m.Tb(),m.Ub(57,"div",9),m.Ub(58,"label",33),m.Lc(59,"Office phone"),m.Tb(),m.Pb(60,"input",34),m.Jc(61,St,2,0,"div",12),m.Tb(),m.Ub(62,"div",9),m.Ub(63,"label",35),m.Lc(64,"Starting invoice number"),m.Tb(),m.Pb(65,"input",36),m.Tb(),m.Jc(66,It,7,1,"div",37),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(9),m.pc("ngIf",e.isLoading),m.Bb(1),m.pc("formGroup",e.profileForm),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.name.touched&&e.profileForm.controls.name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.contact_name.touched&&e.profileForm.controls.contact_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.address_line_1.touched&&e.profileForm.controls.address_line_1.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.address_line_2.touched&&e.profileForm.controls.address_line_2.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(5),m.pc("disabled",!e.isEditionAble),m.Bb(3),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.profileForm.controls.city.touched&&e.profileForm.controls.city.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedState]),m.Bb(5),m.Gb("is-invalid",e.profileForm.controls.zip.touched&&e.profileForm.controls.zip.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.fax.touched&&e.profileForm.controls.fax.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.profileForm.controls.office_phone.touched&&e.profileForm.controls.office_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(5),m.pc("ngIf",e.isEditionAble))},directives:[r.n,b.x,b.p,b.i,b.d,b.o,b.g,b.r,b.w,r.m,v.a,b.u,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.profile-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),zt),Jt=i("nUUR");function Nt(t,e){1&t&&(m.Ub(0,"div",19),m.Pb(1,"mat-spinner",20),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function Et(t,e){1&t&&(m.Ub(0,"div",21),m.Lc(1,"Invalid field"),m.Tb())}var At,Gt=((At=function(){function e(n,o,i,r,a){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.rateService=r,this.notificationService=a,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.rate=this.data.rate,this.buildForms()}return n(e,[{key:"buildForms",value:function(){this.rateForm=this.fb.group({amount:[this.rate.amount,[b.v.required]]})}},{key:"onSubmit",value:function(){var t=this;if(this.rateForm.invalid)return Object.values(this.rateForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0,this.rateService.updateRate(this.rateForm.value,this.rate.id).subscribe((function(e){t.isLoading=!1,t.notificationService.success("Rate updated"),t.dialogRef.close()}),(function(e){t.notificationService.error(),t.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||At)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(Jt.a),m.Ob(g.a))},At.\u0275cmp=m.Ib({type:At,selectors:[["app-edit-rate-dialog"]],decls:53,vars:9,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],[1,"form-group","row","mt-4","new-rate-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["disabled","",1,"custom-select","form-control"],["value","","selected",""],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","amount","name","amount","type","number","formControlName","amount",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Jc(1,Nt,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"Edit Rate"),m.Tb(),m.Ub(4,"form",2),m.fc("ngSubmit",(function(){return e.onSubmit()})),m.Ub(5,"div",3),m.Ub(6,"label",4),m.Lc(7,"Origination state"),m.Tb(),m.Ub(8,"div",5),m.Ub(9,"select",6),m.Ub(10,"option",7),m.Lc(11),m.Tb(),m.Tb(),m.Pb(12,"mat-icon",8),m.Tb(),m.Tb(),m.Ub(13,"div",3),m.Ub(14,"label",4),m.Lc(15,"Origination city"),m.Tb(),m.Ub(16,"div",5),m.Ub(17,"select",6),m.Ub(18,"option",7),m.Lc(19),m.Tb(),m.Tb(),m.Pb(20,"mat-icon",8),m.Tb(),m.Tb(),m.Ub(21,"div",3),m.Ub(22,"label",4),m.Lc(23,"Destination state"),m.Tb(),m.Ub(24,"div",5),m.Ub(25,"select",6),m.Ub(26,"option",7),m.Lc(27),m.Tb(),m.Tb(),m.Pb(28,"mat-icon",8),m.Tb(),m.Tb(),m.Ub(29,"div",3),m.Ub(30,"label",4),m.Lc(31,"Destination city"),m.Tb(),m.Ub(32,"div",5),m.Ub(33,"select",6),m.Ub(34,"option",7),m.Lc(35),m.Tb(),m.Tb(),m.Pb(36,"mat-icon",8),m.Tb(),m.Tb(),m.Ub(37,"div",3),m.Ub(38,"label",9),m.Lc(39,"Amount"),m.Tb(),m.Ub(40,"div",10),m.Ub(41,"div",11),m.Ub(42,"span",12),m.Lc(43,"$"),m.Tb(),m.Tb(),m.Pb(44,"input",13),m.Jc(45,Et,2,0,"div",14),m.Tb(),m.Tb(),m.Ub(46,"div",15),m.Ub(47,"div",16),m.Ub(48,"button",17),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(49,"Cancel"),m.Tb(),m.Tb(),m.Ub(50,"div",16),m.Ub(51,"button",18),m.Lc(52,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(3),m.pc("formGroup",e.rateForm),m.Bb(7),m.Mc(e.rate.origination_city.state_name),m.Bb(8),m.Mc(e.rate.origination_city.name),m.Bb(8),m.Mc(e.rate.destination_city.state_name),m.Bb(8),m.Mc(e.rate.destination_city.name),m.Bb(9),m.Gb("is-invalid",e.rateForm.controls.amount.touched&&e.rateForm.controls.amount.invalid),m.Bb(1),m.pc("ngIf",!0))},directives:[r.n,b.x,b.p,b.i,b.r,b.w,v.a,b.s,b.d,b.o,b.g,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-rate-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),At);function Rt(t,e){1&t&&(m.Ub(0,"div",22),m.Pb(1,"mat-spinner",23),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function jt(t,e){if(1&t&&(m.Ub(0,"option",24),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.code),m.Bb(1),m.Mc(n.name)}}function qt(t,e){if(1&t&&(m.Ub(0,"option",24),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.id),m.Bb(1),m.Mc(n.name)}}function $t(t,e){if(1&t&&(m.Ub(0,"option",24),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.code),m.Bb(1),m.Mc(n.name)}}function Vt(t,e){if(1&t&&(m.Ub(0,"option",24),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.id),m.Bb(1),m.Mc(n.name)}}function Ht(t,e){1&t&&(m.Ub(0,"div",25),m.Lc(1,"Invalid field"),m.Tb())}var Qt,Xt=((Qt=function(){function e(n,o,i,r,a,c){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.rateService=r,this.geoService=a,this.notificationService=c,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e)}},{key:"buildForms",value:function(){this.rateForm=this.fb.group({origination_city_id:["",[b.v.required]],destination_city_id:["",[b.v.required]],amount:[0,[b.v.required]]})}},{key:"onStateChange",value:function(t,e){var n=t.target.value;"orig"===e?(this.selectedOrigState=n,this.rateForm.controls.origination_city_id.reset()):(this.selectedDestState=n,this.rateForm.controls.destination_city_id.reset()),this.geoService.fetchCitiesByState(n)}},{key:"onSubmit",value:function(){var t=this;if(this.rateForm.invalid)return Object.values(this.rateForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0,this.rateService.saveRate(this.rateForm.value).subscribe((function(e){t.isLoading=!1,t.notificationService.success("Rate added"),t.dialogRef.close()}),(function(e){var n,o;(null===(o=null===(n=e.error)||void 0===n?void 0:n.message)||void 0===o?void 0:o.includes("Rate already exists"))?t.notificationService.error(e.error.message):t.notificationService.error(),t.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||Qt)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(Jt.a),m.Ob(p.a),m.Ob(g.a))},Qt.\u0275cmp=m.Ib({type:Qt,selectors:[["app-new-rate-dialog"]],decls:53,vars:13,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],[1,"form-group","row","mt-4","new-rate-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","origination_city_id",1,"custom-select","form-control"],["formControlName","destination_city_id",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","amount","name","amount","type","number","formControlName","amount",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[3,"value"],[1,"form-text","invalid-feedback"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Jc(1,Rt,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"New Rate"),m.Tb(),m.Ub(4,"form",2),m.fc("ngSubmit",(function(){return e.onSubmit()})),m.Ub(5,"div",3),m.Ub(6,"label",4),m.Lc(7,"Origination state"),m.Tb(),m.Ub(8,"div",5),m.Ub(9,"select",6),m.fc("change",(function(t){return e.onStateChange(t,"orig")})),m.Ub(10,"option",7),m.Lc(11,"Select state..."),m.Tb(),m.Jc(12,jt,2,2,"option",8),m.Tb(),m.Pb(13,"mat-icon",9),m.Tb(),m.Tb(),m.Ub(14,"div",3),m.Ub(15,"label",4),m.Lc(16,"Origination city"),m.Tb(),m.Ub(17,"div",5),m.Ub(18,"select",10),m.Jc(19,qt,2,2,"option",8),m.Tb(),m.Pb(20,"mat-icon",9),m.Tb(),m.Tb(),m.Ub(21,"div",3),m.Ub(22,"label",4),m.Lc(23,"Destination state"),m.Tb(),m.Ub(24,"div",5),m.Ub(25,"select",6),m.fc("change",(function(t){return e.onStateChange(t,"dest")})),m.Ub(26,"option",7),m.Lc(27,"Select state..."),m.Tb(),m.Jc(28,$t,2,2,"option",8),m.Tb(),m.Pb(29,"mat-icon",9),m.Tb(),m.Tb(),m.Ub(30,"div",3),m.Ub(31,"label",4),m.Lc(32,"Destination city"),m.Tb(),m.Ub(33,"div",5),m.Ub(34,"select",11),m.Jc(35,Vt,2,2,"option",8),m.Tb(),m.Pb(36,"mat-icon",9),m.Tb(),m.Tb(),m.Ub(37,"div",3),m.Ub(38,"label",12),m.Lc(39,"Amount"),m.Tb(),m.Ub(40,"div",13),m.Ub(41,"div",14),m.Ub(42,"span",15),m.Lc(43,"$"),m.Tb(),m.Tb(),m.Pb(44,"input",16),m.Jc(45,Ht,2,0,"div",17),m.Tb(),m.Tb(),m.Ub(46,"div",18),m.Ub(47,"div",19),m.Ub(48,"button",20),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(49,"Cancel"),m.Tb(),m.Tb(),m.Ub(50,"div",19),m.Ub(51,"button",21),m.Lc(52,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(3),m.pc("formGroup",e.rateForm),m.Bb(8),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.rateForm.controls.origination_city_id.touched&&e.rateForm.controls.origination_city_id.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedOrigState]),m.Bb(9),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.rateForm.controls.destination_city_id.touched&&e.rateForm.controls.destination_city_id.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedDestState]),m.Bb(9),m.Gb("is-invalid",e.rateForm.controls.amount.touched&&e.rateForm.controls.amount.invalid),m.Bb(1),m.pc("ngIf",!0))},directives:[r.n,b.x,b.p,b.i,b.r,b.w,r.m,v.a,b.u,b.o,b.g,b.s,b.d,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-rate-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),Qt);function Kt(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Origination state"),m.Tb())}function Zt(t,e){if(1&t&&(m.Ub(0,"td",26),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Oc("",n.origination_city.state_name,", ",n.origination_city.state_code,"")}}function Wt(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Origination city"),m.Tb())}function Yt(t,e){if(1&t&&(m.Ub(0,"td",26),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.origination_city.name)}}function te(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Destination state"),m.Tb())}function ee(t,e){if(1&t&&(m.Ub(0,"td",26),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Oc("",n.destination_city.state_name,", ",n.destination_city.state_code,"")}}function ne(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Destination city"),m.Tb())}function oe(t,e){if(1&t&&(m.Ub(0,"td",26),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.destination_city.name)}}function ie(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Amount"),m.Tb())}function re(t,e){if(1&t&&(m.Ub(0,"td",26),m.Lc(1),m.kc(2,"currency"),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(m.lc(2,1,n.amount))}}function ae(t,e){1&t&&(m.Ub(0,"th",25),m.Lc(1,"Actions"),m.Tb())}function ce(t,e){if(1&t){var n=m.Vb();m.Ub(0,"td",26),m.Ub(1,"div",27),m.Ub(2,"button",28),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().openEditDialog(t)})),m.Pb(3,"i",29),m.Tb(),m.Ub(4,"button",30),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().onDelete(t)})),m.Pb(5,"i",31),m.Tb(),m.Tb(),m.Tb()}}function le(t,e){1&t&&m.Pb(0,"tr",32)}function be(t,e){1&t&&m.Pb(0,"tr",33)}function se(t,e){1&t&&(m.Ub(0,"div",34),m.Lc(1,"No rates found"),m.Tb())}var de,me=((de=function(){function e(n,o,i,r){var a=this;t(this,e),this.dialog=n,this.dialogService=o,this.rateService=i,this.notificationService=r,this.displayedColumns=["origination_state","origination_city","destination_state","destination_city","amount","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.items=new l.k([]);var c=i.rates.subscribe((function(t){a.rates=t,a.items.data=t}));this.subscriptions.push(c)}return n(e,[{key:"ngOnInit",value:function(){var t,e=this;(null===(t=this.rates)||void 0===t?void 0:t.length)||(this.dialogService.showLoader(),this.rateService.fetchRates().finally((function(){e.dialogService.hideLoader()})))}},{key:"openNewDialog",value:function(){this.dialog.open(Xt,{width:"700px"})}},{key:"openEditDialog",value:function(t){this.dialog.open(Gt,{width:"700px",data:{rate:t}})}},{key:"onDelete",value:function(t){var e=this;this.dialogService.showConfirm({title:"Delete rate",msg:"Are you sure?"},(function(){e.rateService.deleteRate(t.id).subscribe((function(t){e.notificationService.success("Rate deleted")}),(function(t){e.notificationService.error()}))}))}},{key:"ngAfterViewInit",value:function(){this.items.sort=this.sort,this.items.paginator=this.paginator}},{key:"applyFilter",value:function(t){this.items.filter=t.trim().toLocaleLowerCase()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||de)(m.Ob(s.b),m.Ob(rt.a),m.Ob(Jt.a),m.Ob(g.a))},de.\u0275cmp=m.Ib({type:de,selectors:[["app-rates"]],viewQuery:function(t,e){var n;1&t&&(m.Qc(c.a,!0),m.Qc(a.a,!0)),2&t&&(m.wc(n=m.gc())&&(e.sort=n.first),m.wc(n=m.gc())&&(e.paginator=n.first))},decls:37,vars:5,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","origination_state"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","origination_city"],["matColumnDef","destination_state"],["matColumnDef","destination_city"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"div",1),m.Ub(2,"h1",2),m.Lc(3,"Rates"),m.Tb(),m.Ub(4,"div",3),m.Ub(5,"div",4),m.Ub(6,"div",5),m.Ub(7,"span",6),m.Pb(8,"i",7),m.Tb(),m.Tb(),m.Ub(9,"input",8),m.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),m.Tb(),m.Tb(),m.Ub(10,"button",9),m.fc("click",(function(){return e.openNewDialog()})),m.Lc(11,"+Add"),m.Tb(),m.Tb(),m.Tb(),m.Ub(12,"div",10),m.Ub(13,"div",11),m.Ub(14,"table",12),m.Sb(15,13),m.Jc(16,Kt,2,0,"th",14),m.Jc(17,Zt,2,2,"td",15),m.Rb(),m.Sb(18,16),m.Jc(19,Wt,2,0,"th",14),m.Jc(20,Yt,2,1,"td",15),m.Rb(),m.Sb(21,17),m.Jc(22,te,2,0,"th",14),m.Jc(23,ee,2,2,"td",15),m.Rb(),m.Sb(24,18),m.Jc(25,ne,2,0,"th",14),m.Jc(26,oe,2,1,"td",15),m.Rb(),m.Sb(27,19),m.Jc(28,ie,2,0,"th",14),m.Jc(29,re,3,3,"td",15),m.Rb(),m.Sb(30,20),m.Jc(31,ae,2,0,"th",14),m.Jc(32,ce,6,0,"td",15),m.Rb(),m.Jc(33,le,1,0,"tr",21),m.Jc(34,be,1,0,"tr",22),m.Tb(),m.Jc(35,se,2,0,"div",23),m.Pb(36,"mat-paginator",24),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(14),m.pc("dataSource",e.items),m.Bb(19),m.pc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.pc("matRowDefColumns",e.displayedColumns),m.Bb(1),m.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),m.Bb(1),m.pc("pageSizeOptions",e.pageSizeOptions))},directives:[l.j,c.a,l.c,l.e,l.b,l.g,l.i,r.n,a.a,l.d,l.a,l.f,l.h],pipes:[r.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}"]}),de),ue=i("RaVz");function pe(t,e){1&t&&(m.Ub(0,"div",51),m.Pb(1,"mat-spinner",52),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function ge(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function fe(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function ve(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function he(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function _e(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}function Ce(t,e){if(1&t&&(m.Ub(0,"option",54),m.Lc(1),m.Tb()),2&t){var n=e.$implicit,o=m.jc();m.pc("value",n.code)("selected",n.code===o.user.city.state_code),m.Bb(1),m.Nc(" ",n.name," ")}}function xe(t,e){if(1&t&&(m.Ub(0,"option",54),m.Lc(1),m.Tb()),2&t){var n=e.$implicit,o=m.jc();m.pc("value",n.id)("selected",n.id===o.user.city.id),m.Bb(1),m.Nc(" ",n.name," ")}}function Oe(t,e){1&t&&(m.Ub(0,"div",53),m.Lc(1,"Invalid field"),m.Tb())}var Pe,ye=((Pe=function(){function e(n,o,i,r,a,c){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.userService=r,this.geoService=a,this.notificationService=c,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.user=o.user,this.buildForms()}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e),this.selectedState=this.user.city.state_code,this.geoService.fetchCitiesByState(this.user.city.state_code)}},{key:"buildForms",value:function(){var t,e,n,o,i;this.userForm=this.fb.group({email:[this.user.email,[b.v.required,b.v.email]],first_name:[this.user.first_name,[b.v.required]],last_name:[this.user.last_name,[b.v.required]],phone:[this.user.phone,[b.v.required,b.v.pattern(d.a.numbers)]],office_phone:[this.user.office_phone,[b.v.pattern(d.a.numbers)]],city:[this.user.city.id,[b.v.required,b.v.pattern(d.a.mongoId)]],commission:[this.user.commission,[b.v.required]]}),this.options=this.fb.group({canEmailInvoices:[null===(t=this.user.roles)||void 0===t?void 0:t.includes("INVOICE_EMAIL")],canModifyCustomers:[null===(e=this.user.roles)||void 0===e?void 0:e.includes("HANDLE_CUSTOMERS")],isManager:[null===(n=this.user.roles)||void 0===n?void 0:n.includes("MANAGER")],isAdmin:[null===(o=this.user.roles)||void 0===o?void 0:o.includes("ADMIN")],isDriver:[null===(i=this.user.roles)||void 0===i?void 0:i.includes("USER")],receiveEmail:[!1]})}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.userForm.controls.city.reset()}},{key:"goBack",value:function(t){t.previous()}},{key:"saveFirst",value:function(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));t.next()}},{key:"onSubmit",value:function(t){var e=this;if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0;var n=Object.assign(Object.assign({},this.userForm.value),{options:this.options.value});this.userService.updateUser(n,this.user.id).subscribe((function(t){e.isLoading=!1,e.notificationService.success("User updated"),e.dialogRef.close()}),(function(n){var o,i;"Email already taken"===(null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)?(e.notificationService.error(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message),e.userForm.controls.email.setErrors({alreadyTaken:!0}),e.goBack(t)):e.notificationService.error(),e.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||Pe)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(ue.a),m.Ob(p.a),m.Ob(g.a))},Pe.\u0275cmp=m.Ib({type:Pe,selectors:[["app-edit-user-dialog"]],decls:105,vars:26,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","User data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","col-md-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],[1,"col-12","mb-3"],["for","email",1,"text-dark","text-base"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","phone",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city",1,"custom-select","form-control"],["for","driver_commission",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","commission","name","commission","type","text","formControlName","commission",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Permissions"],[1,"col-12","px-2","py-2"],[1,"custom-control","custom-switch"],["type","checkbox","id","canEmailInvoices","formControlName","canEmailInvoices",1,"custom-control-input"],["for","canEmailInvoices",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","canModifyCustomers","formControlName","canModifyCustomers",1,"custom-control-input"],["for","canModifyCustomers",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isManager","formControlName","isManager",1,"custom-control-input"],["for","isManager",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isAdmin","formControlName","isAdmin",1,"custom-control-input"],["for","isAdmin",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isDriver","formControlName","isDriver","disabled","",1,"custom-control-input"],["for","isDriver",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","receiveEmail","formControlName","receiveEmail",1,"custom-control-input"],["for","receiveEmail",1,"custom-control-label","cursor-pointer"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Jc(1,pe,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"Edit User"),m.Tb(),m.Ub(4,"mat-horizontal-stepper",2,3),m.Ub(6,"mat-step",4),m.Ub(7,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.saveFirst(t)})),m.Ub(8,"div",6),m.Ub(9,"label",7),m.Lc(10,"First name"),m.Tb(),m.Pb(11,"input",8),m.Jc(12,ge,2,0,"div",9),m.Tb(),m.Ub(13,"div",6),m.Ub(14,"label",10),m.Lc(15,"Last name"),m.Tb(),m.Pb(16,"input",11),m.Jc(17,fe,2,0,"div",9),m.Tb(),m.Ub(18,"div",12),m.Ub(19,"label",13),m.Lc(20,"Email address"),m.Tb(),m.Pb(21,"input",14),m.Jc(22,ve,2,0,"div",9),m.Tb(),m.Ub(23,"div",12),m.Ub(24,"label",15),m.Lc(25,"Mobile phone"),m.Tb(),m.Pb(26,"input",16),m.Jc(27,he,2,0,"div",9),m.Tb(),m.Ub(28,"div",12),m.Ub(29,"label",17),m.Lc(30,"Office phone"),m.Tb(),m.Pb(31,"input",18),m.Jc(32,_e,2,0,"div",9),m.Tb(),m.Ub(33,"div",6),m.Ub(34,"label",19),m.Lc(35,"State"),m.Tb(),m.Ub(36,"div",20),m.Ub(37,"select",21),m.fc("change",(function(t){return e.onStateChange(t)})),m.Ub(38,"option",22),m.Lc(39,"Select state..."),m.Tb(),m.Jc(40,Ce,2,3,"option",23),m.Tb(),m.Pb(41,"mat-icon",24),m.Tb(),m.Tb(),m.Ub(42,"div",6),m.Ub(43,"label",19),m.Lc(44,"City"),m.Tb(),m.Ub(45,"div",20),m.Ub(46,"select",25),m.Jc(47,xe,2,3,"option",23),m.Tb(),m.Pb(48,"mat-icon",24),m.Tb(),m.Tb(),m.Ub(49,"div",12),m.Ub(50,"label",26),m.Lc(51,"Driver commission"),m.Tb(),m.Ub(52,"div",27),m.Ub(53,"div",28),m.Ub(54,"span",29),m.Lc(55,"%"),m.Tb(),m.Tb(),m.Pb(56,"input",30),m.Jc(57,Oe,2,0,"div",9),m.Tb(),m.Tb(),m.Ub(58,"div",31),m.Ub(59,"div",32),m.Ub(60,"button",33),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(61,"Cancel"),m.Tb(),m.Tb(),m.Ub(62,"div",32),m.Ub(63,"button",34),m.Lc(64,"Next"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(65,"mat-step",35),m.Ub(66,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.onSubmit(t)})),m.Ub(67,"div",36),m.Ub(68,"div",12),m.Ub(69,"div",37),m.Pb(70,"input",38),m.Ub(71,"label",39),m.Lc(72,"Can Email Invoices?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(73,"div",12),m.Ub(74,"div",37),m.Pb(75,"input",40),m.Ub(76,"label",41),m.Lc(77,"Can Modify Customer List?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(78,"div",12),m.Ub(79,"div",37),m.Pb(80,"input",42),m.Ub(81,"label",43),m.Lc(82,"Is Manager?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(83,"div",12),m.Ub(84,"div",37),m.Pb(85,"input",44),m.Ub(86,"label",45),m.Lc(87,"Is Admin?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(88,"div",12),m.Ub(89,"div",37),m.Pb(90,"input",46),m.Ub(91,"label",47),m.Lc(92,"Is Driver?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(93,"div",12),m.Ub(94,"div",37),m.Pb(95,"input",48),m.Ub(96,"label",49),m.Lc(97,"Receive Email After Submit "),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(98,"div",31),m.Ub(99,"div",32),m.Ub(100,"button",33),m.fc("click",(function(){m.Bc(n);var t=m.xc(5);return e.goBack(t)})),m.Lc(101,"Back"),m.Tb(),m.Tb(),m.Ub(102,"div",32),m.Ub(103,"button",50),m.Lc(104,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(5),m.pc("completed",e.userForm.valid),m.Bb(1),m.pc("formGroup",e.userForm),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.first_name.touched&&e.userForm.controls.first_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.last_name.touched&&e.userForm.controls.last_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.email.touched&&e.userForm.controls.email.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.phone.touched&&e.userForm.controls.phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.office_phone.touched&&e.userForm.controls.office_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(8),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.userForm.controls.city.touched&&e.userForm.controls.city.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedState]),m.Bb(9),m.Gb("is-invalid",e.userForm.controls.commission.touched&&e.userForm.controls.commission.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(9),m.pc("formGroup",e.options))},directives:[r.n,f.a,f.b,b.x,b.p,b.i,b.d,b.o,b.g,b.r,b.w,r.m,v.a,b.u,b.a,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-user-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),Pe),Me=i("PmMJ");function Te(t,e){1&t&&(m.Ub(0,"div",55),m.Pb(1,"mat-spinner",56),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function we(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}function Ue(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}function ke(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}function Le(t,e){if(1&t&&(m.Ub(0,"div",57),m.Lc(1),m.Tb()),2&t){var n=m.jc();m.Bb(1),m.Nc(" ",null!=n.userForm.controls.password.errors&&n.userForm.controls.password.errors.minlength||null!=n.userForm.controls.password.errors&&n.userForm.controls.password.errors.maxlength?"Min 8 characters and max 20":"Invalid field"," ")}}function Fe(t,e){if(1&t&&(m.Ub(0,"div",57),m.Lc(1),m.Tb()),2&t){var n=m.jc();m.Bb(1),m.Nc(" ",null!=n.userForm.controls.confirm_password.errors&&n.userForm.controls.confirm_password.errors.minlength||null!=n.userForm.controls.confirm_password.errors&&n.userForm.controls.confirm_password.errors.maxlength?"Min 8 characters and max 20":"Invalid field"," ")}}function Be(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}function Se(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}function Ie(t,e){if(1&t&&(m.Ub(0,"option",58),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.code),m.Bb(1),m.Mc(n.name)}}function ze(t,e){if(1&t&&(m.Ub(0,"option",58),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.pc("value",n.id),m.Bb(1),m.Mc(n.name)}}function De(t,e){1&t&&(m.Ub(0,"div",57),m.Lc(1,"Invalid field"),m.Tb())}var Je,Ne=((Je=function(){function e(n,o,i,r,a,c,l){t(this,e),this.dialogRef=n,this.data=o,this.fb=i,this.userService=r,this.geoService=a,this.notificationService=c,this.validatorsService=l,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){t.cities=e}));this.subscriptions.push(e)}},{key:"buildForms",value:function(){this.userForm=this.fb.group({email:["",[b.v.required,b.v.email]],password:["",[b.v.required,b.v.minLength(8),b.v.maxLength(20)]],confirm_password:["",[b.v.required,b.v.minLength(8),b.v.maxLength(20)]],first_name:["",[b.v.required]],last_name:["",[b.v.required]],phone:["",[b.v.required,b.v.pattern(d.a.numbers)]],office_phone:["",[b.v.pattern(d.a.numbers)]],city:["",[b.v.required,b.v.pattern(d.a.mongoId)]],commission:[""]},{validators:this.validatorsService.equalPasswords("password","confirm_password")}),this.options=this.fb.group({canEmailInvoices:[!1],canModifyCustomers:[!1],isManager:[!1],isAdmin:[!1],isDriver:[!0],receiveEmail:[!1]})}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.userForm.controls.city.reset()}},{key:"goBack",value:function(t){t.previous()}},{key:"saveFirst",value:function(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));t.next()}},{key:"onSubmit",value:function(t){var e=this;if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach((function(t){t instanceof b.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));this.isLoading=!0;var n=Object.assign(Object.assign({},this.userForm.value),{commission:this.userForm.value.commission>0?this.userForm.value.commission:0,options:this.options.value});delete n.confirm_password,this.userService.saveUser(n).subscribe((function(t){e.isLoading=!1,e.notificationService.success("User added"),e.dialogRef.close()}),(function(n){var o,i;"Email already taken"===(null===(o=null==n?void 0:n.error)||void 0===o?void 0:o.message)?(e.notificationService.error(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message),e.userForm.controls.email.setErrors({alreadyTaken:!0}),e.goBack(t)):e.notificationService.error(),e.isLoading=!1}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||Je)(m.Ob(s.e),m.Ob(s.a),m.Ob(b.e),m.Ob(ue.a),m.Ob(p.a),m.Ob(g.a),m.Ob(Me.a))},Je.\u0275cmp=m.Ib({type:Je,selectors:[["app-new-user-dialog"]],decls:115,vars:32,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","User data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","col-md-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],[1,"col-12","mb-3"],["for","email",1,"text-dark","text-base"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","password",1,"text-dark","text-base"],["id","password","name","password","type","password","formControlName","password",1,"form-control"],["for","confirm_password",1,"text-dark","text-base"],["id","confirm_password","name","confirm_password","type","password","formControlName","confirm_password",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","phone",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city",1,"custom-select","form-control"],["for","driver_commission",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","commission","name","commission","type","text","formControlName","commission",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Permissions"],[1,"col-12","px-2","py-2"],[1,"custom-control","custom-switch"],["type","checkbox","id","canEmailInvoices","formControlName","canEmailInvoices",1,"custom-control-input"],["for","canEmailInvoices",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","canModifyCustomers","formControlName","canModifyCustomers",1,"custom-control-input"],["for","canModifyCustomers",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isManager","formControlName","isManager",1,"custom-control-input"],["for","isManager",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isAdmin","formControlName","isAdmin",1,"custom-control-input"],["for","isAdmin",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isDriver","formControlName","isDriver","disabled","",1,"custom-control-input"],["for","isDriver",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","receiveEmail","formControlName","receiveEmail",1,"custom-control-input"],["for","receiveEmail",1,"custom-control-label","cursor-pointer"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){if(1&t){var n=m.Vb();m.Ub(0,"div",0),m.Jc(1,Te,2,1,"div",1),m.Ub(2,"h3"),m.Lc(3,"New User"),m.Tb(),m.Ub(4,"mat-horizontal-stepper",2,3),m.Ub(6,"mat-step",4),m.Ub(7,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.saveFirst(t)})),m.Ub(8,"div",6),m.Ub(9,"label",7),m.Lc(10,"First name"),m.Tb(),m.Pb(11,"input",8),m.Jc(12,we,2,0,"div",9),m.Tb(),m.Ub(13,"div",6),m.Ub(14,"label",10),m.Lc(15,"Last name"),m.Tb(),m.Pb(16,"input",11),m.Jc(17,Ue,2,0,"div",9),m.Tb(),m.Ub(18,"div",12),m.Ub(19,"label",13),m.Lc(20,"Email address"),m.Tb(),m.Pb(21,"input",14),m.Jc(22,ke,2,0,"div",9),m.Tb(),m.Ub(23,"div",6),m.Ub(24,"label",15),m.Lc(25,"Password"),m.Tb(),m.Pb(26,"input",16),m.Jc(27,Le,2,1,"div",9),m.Tb(),m.Ub(28,"div",6),m.Ub(29,"label",17),m.Lc(30,"Confirm password"),m.Tb(),m.Pb(31,"input",18),m.Jc(32,Fe,2,1,"div",9),m.Tb(),m.Ub(33,"div",12),m.Ub(34,"label",19),m.Lc(35,"Mobile phone"),m.Tb(),m.Pb(36,"input",20),m.Jc(37,Be,2,0,"div",9),m.Tb(),m.Ub(38,"div",12),m.Ub(39,"label",21),m.Lc(40,"Office phone"),m.Tb(),m.Pb(41,"input",22),m.Jc(42,Se,2,0,"div",9),m.Tb(),m.Ub(43,"div",6),m.Ub(44,"label",23),m.Lc(45,"State"),m.Tb(),m.Ub(46,"div",24),m.Ub(47,"select",25),m.fc("change",(function(t){return e.onStateChange(t)})),m.Ub(48,"option",26),m.Lc(49,"Select state..."),m.Tb(),m.Jc(50,Ie,2,2,"option",27),m.Tb(),m.Pb(51,"mat-icon",28),m.Tb(),m.Tb(),m.Ub(52,"div",6),m.Ub(53,"label",23),m.Lc(54,"City"),m.Tb(),m.Ub(55,"div",24),m.Ub(56,"select",29),m.Jc(57,ze,2,2,"option",27),m.Tb(),m.Pb(58,"mat-icon",28),m.Tb(),m.Tb(),m.Ub(59,"div",12),m.Ub(60,"label",30),m.Lc(61,"Driver commission"),m.Tb(),m.Ub(62,"div",31),m.Ub(63,"div",32),m.Ub(64,"span",33),m.Lc(65,"%"),m.Tb(),m.Tb(),m.Pb(66,"input",34),m.Jc(67,De,2,0,"div",9),m.Tb(),m.Tb(),m.Ub(68,"div",35),m.Ub(69,"div",36),m.Ub(70,"button",37),m.fc("click",(function(){return e.dialogRef.close()})),m.Lc(71,"Cancel"),m.Tb(),m.Tb(),m.Ub(72,"div",36),m.Ub(73,"button",38),m.Lc(74,"Next"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(75,"mat-step",39),m.Ub(76,"form",5),m.fc("ngSubmit",(function(){m.Bc(n);var t=m.xc(5);return e.onSubmit(t)})),m.Ub(77,"div",40),m.Ub(78,"div",12),m.Ub(79,"div",41),m.Pb(80,"input",42),m.Ub(81,"label",43),m.Lc(82,"Can Email Invoices?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(83,"div",12),m.Ub(84,"div",41),m.Pb(85,"input",44),m.Ub(86,"label",45),m.Lc(87,"Can Modify Customer List?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(88,"div",12),m.Ub(89,"div",41),m.Pb(90,"input",46),m.Ub(91,"label",47),m.Lc(92,"Is Manager?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(93,"div",12),m.Ub(94,"div",41),m.Pb(95,"input",48),m.Ub(96,"label",49),m.Lc(97,"Is Admin?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(98,"div",12),m.Ub(99,"div",41),m.Pb(100,"input",50),m.Ub(101,"label",51),m.Lc(102,"Is Driver?"),m.Tb(),m.Tb(),m.Tb(),m.Ub(103,"div",12),m.Ub(104,"div",41),m.Pb(105,"input",52),m.Ub(106,"label",53),m.Lc(107,"Receive Email After Submit "),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(108,"div",35),m.Ub(109,"div",36),m.Ub(110,"button",37),m.fc("click",(function(){m.Bc(n);var t=m.xc(5);return e.goBack(t)})),m.Lc(111,"Back"),m.Tb(),m.Tb(),m.Ub(112,"div",36),m.Ub(113,"button",54),m.Lc(114,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Bb(1),m.pc("ngIf",e.isLoading),m.Bb(5),m.pc("completed",e.userForm.valid),m.Bb(1),m.pc("formGroup",e.userForm),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.first_name.touched&&e.userForm.controls.first_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.last_name.touched&&e.userForm.controls.last_name.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.email.touched&&e.userForm.controls.email.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.password.touched&&e.userForm.controls.password.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.confirm_password.touched&&e.userForm.controls.confirm_password.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.phone.touched&&e.userForm.controls.phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(4),m.Gb("is-invalid",e.userForm.controls.office_phone.touched&&e.userForm.controls.office_phone.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(8),m.pc("ngForOf",e.states),m.Bb(6),m.Gb("is-invalid",e.userForm.controls.city.touched&&e.userForm.controls.city.invalid),m.Bb(1),m.pc("ngForOf",e.cities[e.selectedState]),m.Bb(9),m.Gb("is-invalid",e.userForm.controls.commission.touched&&e.userForm.controls.commission.invalid),m.Bb(1),m.pc("ngIf",!0),m.Bb(9),m.pc("formGroup",e.options))},directives:[r.n,f.a,f.b,b.x,b.p,b.i,b.d,b.o,b.g,b.r,b.w,r.m,v.a,b.u,b.a,h.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-user-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),Je);function Ee(t,e){1&t&&(m.Ub(0,"div",26),m.Pb(1,"mat-spinner",27),m.Tb()),2&t&&(m.Bb(1),m.pc("diameter",50))}function Ae(t,e){1&t&&(m.Ub(0,"th",28),m.Lc(1,"First name"),m.Tb())}function Ge(t,e){if(1&t&&(m.Ub(0,"td",29),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.first_name)}}function Re(t,e){1&t&&(m.Ub(0,"th",28),m.Lc(1,"Last name"),m.Tb())}function je(t,e){if(1&t&&(m.Ub(0,"td",29),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.last_name)}}function qe(t,e){1&t&&(m.Ub(0,"th",28),m.Lc(1,"Email address"),m.Tb())}function $e(t,e){if(1&t&&(m.Ub(0,"td",30),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.email)}}function Ve(t,e){1&t&&(m.Ub(0,"th",28),m.Lc(1,"Role"),m.Tb())}function He(t,e){if(1&t&&(m.Ub(0,"td",30),m.Lc(1),m.Tb()),2&t){var n=e.$implicit;m.Bb(1),m.Mc(n.mainRole)}}function Qe(t,e){1&t&&(m.Ub(0,"th",28),m.Lc(1,"Actions"),m.Tb())}function Xe(t,e){if(1&t){var n=m.Vb();m.Ub(0,"td",30),m.Ub(1,"div",31),m.Ub(2,"button",32),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().openEditDialog(t)})),m.Pb(3,"i",33),m.Tb(),m.Ub(4,"button",34),m.fc("click",(function(){m.Bc(n);var t=e.$implicit;return m.jc().onDelete(t)})),m.Pb(5,"i",35),m.Tb(),m.Tb(),m.Tb()}if(2&t){var o=m.jc();m.Bb(1),m.Gb("text-dark",o.isEditionAble)("text-secondary",!o.isEditionAble),m.Bb(1),m.pc("disabled",!o.isEditionAble),m.Bb(2),m.pc("disabled",!o.isEditionAble)}}function Ke(t,e){1&t&&m.Pb(0,"tr",36)}function Ze(t,e){1&t&&m.Pb(0,"tr",37)}function We(t,e){1&t&&(m.Ub(0,"div",38),m.Lc(1,"No users found"),m.Tb())}var Ye,tn,en=((Ye=function(){function e(n,o,i,r,a){var c=this;t(this,e),this.dialog=n,this.dialogService=o,this.userService=i,this.notificationService=r,this.authService=a,this.displayedColumns=["first_name","last_name","email","role","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.loading=!1,this.isEditionAble=!1,this.isEditionAble=this.authService.isAdmin(),this.items=new l.k([]);var b=i.users.subscribe((function(t){var e;t&&(c.users=t.map((function(t){return Object.assign(Object.assign({},t),{mainRole:t.roles.includes("ADMIN")?"Admin":t.roles.includes("MANAGER")?"Manager":"Driver"})})),c.items.data=null===(e=c.users)||void 0===e?void 0:e.sort((function(t,e){return t.updatedAt<e.updatedAt?1:t.updatedAt>e.updatedAt?-1:0})))}));this.subscriptions.push(b)}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.dialogService.showLoader(),this.userService.fetchUsers().finally((function(){t.dialogService.hideLoader()}))}},{key:"applyFilter",value:function(t){this.items.filter=t.trim().toLocaleLowerCase()}},{key:"openNewDialog",value:function(){this.isEditionAble&&this.dialog.open(Ne,{width:"700px"})}},{key:"openEditDialog",value:function(t){this.isEditionAble&&this.dialog.open(ye,{width:"700px",data:{user:t}})}},{key:"onDelete",value:function(t){var e=this;this.isEditionAble&&this.dialogService.showConfirm({title:"Delete user",msg:"Are you sure?"},(function(){e.loading=!0,e.userService.deleteUser(t.id).subscribe((function(t){e.loading=!1,e.notificationService.success("User deleted")}),(function(t){e.loading=!1,e.notificationService.error()}))}))}},{key:"ngAfterViewInit",value:function(){this.items.sort=this.sort,this.items.paginator=this.paginator}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||Ye)(m.Ob(s.b),m.Ob(rt.a),m.Ob(ue.a),m.Ob(g.a),m.Ob(Pt.a))},Ye.\u0275cmp=m.Ib({type:Ye,selectors:[["app-users"]],viewQuery:function(t,e){var n;1&t&&(m.Qc(c.a,!0),m.Qc(a.a,!0)),2&t&&(m.wc(n=m.gc())&&(e.sort=n.first),m.wc(n=m.gc())&&(e.paginator=n.first))},decls:35,vars:7,consts:[[1,"px-2","px-md-5","py-3"],["class","loader",4,"ngIf"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"disabled","click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","first_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capitalize",4,"matCellDef"],["matColumnDef","last_name"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],[1,"loader"],[3,"diameter"],["mat-header-cell",""],["mat-cell","",1,"capitalize"],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"mr-4",3,"disabled","click"],[1,"fas","fa-user-edit","text-xl"],["aria-label","edit",3,"disabled","click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Jc(1,Ee,2,1,"div",1),m.Ub(2,"div",2),m.Ub(3,"h1",3),m.Lc(4,"Users"),m.Tb(),m.Ub(5,"div",4),m.Ub(6,"div",5),m.Ub(7,"div",6),m.Ub(8,"span",7),m.Pb(9,"i",8),m.Tb(),m.Tb(),m.Ub(10,"input",9),m.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),m.Tb(),m.Tb(),m.Ub(11,"button",10),m.fc("click",(function(){return e.openNewDialog()})),m.Lc(12,"+Add"),m.Tb(),m.Tb(),m.Tb(),m.Ub(13,"div",11),m.Ub(14,"div",12),m.Ub(15,"table",13),m.Sb(16,14),m.Jc(17,Ae,2,0,"th",15),m.Jc(18,Ge,2,1,"td",16),m.Rb(),m.Sb(19,17),m.Jc(20,Re,2,0,"th",15),m.Jc(21,je,2,1,"td",16),m.Rb(),m.Sb(22,18),m.Jc(23,qe,2,0,"th",15),m.Jc(24,$e,2,1,"td",19),m.Rb(),m.Sb(25,20),m.Jc(26,Ve,2,0,"th",15),m.Jc(27,He,2,1,"td",19),m.Rb(),m.Sb(28,21),m.Jc(29,Qe,2,0,"th",15),m.Jc(30,Xe,6,6,"td",19),m.Rb(),m.Jc(31,Ke,1,0,"tr",22),m.Jc(32,Ze,1,0,"tr",23),m.Tb(),m.Jc(33,We,2,0,"div",24),m.Pb(34,"mat-paginator",25),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Bb(1),m.pc("ngIf",e.loading),m.Bb(10),m.pc("disabled",!e.isEditionAble),m.Bb(4),m.pc("dataSource",e.items),m.Bb(16),m.pc("matHeaderRowDef",e.displayedColumns),m.Bb(1),m.pc("matRowDefColumns",e.displayedColumns),m.Bb(1),m.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),m.Bb(1),m.pc("pageSizeOptions",e.pageSizeOptions))},directives:[r.n,l.j,c.a,l.c,l.e,l.b,l.g,l.i,a.a,h.b,l.d,l.a,l.f,l.h],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.nav-wrapper[_ngcontent-%COMP%]{width:100%;border:3px solid rgb(var(--palette-blue-main-rgb));border-radius:10px}.nav-wrapper[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600}"]}),Ye),nn=i("PCNd"),on=[{path:"",redirectTo:"customers"},{path:"customers",component:_t},{path:"profile",component:Dt},{path:"rates",component:me},{path:"users",component:en}],rn=((tn=n((function e(){t(this,e)}))).\u0275mod=m.Mb({type:tn}),tn.\u0275inj=m.Lb({factory:function(t){return new(t||tn)},imports:[[r.c,Ot.e.forChild(on),nn.a]]}),tn)}}])}();
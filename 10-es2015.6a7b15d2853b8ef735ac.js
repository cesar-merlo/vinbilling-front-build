(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{M4UK:function(t,e,n){"use strict";n.r(e),n.d(e,"companyRoutes",(function(){return qe})),n.d(e,"CompanyModule",(function(){return $e}));var o=n("ofXK"),i=n("M9IT"),r=n("Dh3D"),a=n("+0xr"),c=n("3Pt+"),s=n("0IaG"),b=n("AJa1"),l=n("fXoL"),d=n("Sdjb"),m=n("U12X"),p=n("38VU"),g=n("xHqg"),u=n("NFeN"),f=n("Xa2L");function h(t,e){1&t&&(l.Ub(0,"div",49),l.Pb(1,"mat-spinner",50),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function v(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function _(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function C(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function x(t,e){if(1&t&&(l.Ub(0,"option",52),l.Lc(1),l.Tb()),2&t){const t=e.$implicit,n=l.jc();l.pc("value",t.code)("selected",t.code===n.customer.city.state_code),l.Bb(1),l.Nc(" ",t.name," ")}}function O(t,e){if(1&t&&(l.Ub(0,"option",52),l.Lc(1),l.Tb()),2&t){const t=e.$implicit,n=l.jc();l.pc("value",t.id)("selected",t.id===n.customer.city.id),l.Bb(1),l.Nc(" ",t.name," ")}}function P(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function M(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function T(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function U(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function y(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function w(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function k(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function L(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function F(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function B(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function S(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}function I(t,e){1&t&&(l.Ub(0,"div",51),l.Lc(1,"Invalid field"),l.Tb())}let z=(()=>{class t{constructor(t,e,n,o,i,r){this.dialogRef=t,this.data=e,this.fb=n,this.customerService=o,this.geoService=i,this.notificationService=r,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.customer=this.data.customer,this.buildForms()}ngOnInit(){this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t),this.selectedState=this.customer.city.state_code,this.geoService.fetchCitiesByState(this.customer.city.state_code)}buildForms(){var t;this.customerDataForm=this.fb.group({name:[this.customer.name,[c.v.required]],address_line_1:[this.customer.address_line_1,[c.v.required]],address_line_2:[null!==(t=this.customer.address_line_2)&&void 0!==t?t:"",[]],city_id:[this.customer.city.id,[c.v.required]],zip:[this.customer.zip,[c.v.required,c.v.pattern(b.a.zip)]],main_phone:[this.customer.main_phone,[c.v.required,c.v.pattern(b.a.numbers)]],main_phone_extension:[this.customer.main_phone_extension,[c.v.pattern(b.a.numbers)]],fax:[this.customer.fax,[c.v.pattern(b.a.numbers)]]}),this.primaryContactForm=this.fb.group({first_name:[this.customer.primary_contact.first_name,[]],last_name:[this.customer.primary_contact.last_name,[]],email:[this.customer.primary_contact.email,[,c.v.email]],office_phone:[this.customer.primary_contact.office_phone,[c.v.pattern(b.a.numbers)]],office_phone_extension:[this.customer.primary_contact.office_phone_extension,[c.v.pattern(b.a.numbers)]],fax:[this.customer.primary_contact.fax,[c.v.pattern(b.a.numbers)]],mobile_phone:[this.customer.primary_contact.mobile_phone,[c.v.pattern(b.a.numbers)]],mobile_phone_extension:[this.customer.primary_contact.mobile_phone_extension,[c.v.pattern(b.a.numbers)]]})}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerDataForm.controls.city_id.reset()}goBack(t){t.previous()}saveFirst(t){if(this.customerDataForm.invalid)return Object.values(this.customerDataForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});t.next()}onSubmit(){if(this.primaryContactForm.invalid)return Object.values(this.primaryContactForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{this.isLoading=!0;const t=Object.assign(Object.assign({},this.customerDataForm.value),{primary_contact:this.primaryContactForm.value});this.customerService.updateCustomer(t,this.customer.id).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Customer updated"),this.dialogRef.close()},t=>{this.notificationService.error(),this.isLoading=!1})}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(d.a),l.Ob(m.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-edit-customer-dialog"]],decls:115,vars:53,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","Customer data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"col-12","col-md-6","mb-3"],["for","address1",1,"text-dark","text-base"],["id","address1","name","address1","type","text","formControlName","address_line_1",1,"form-control"],["for","address2",1,"text-dark","text-base"],["id","address2","name","address2","type","text","formControlName","address_line_2",1,"form-control"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city_id",1,"custom-select","form-control"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","main_phone",1,"form-control"],["for","phone_extension",1,"text-dark","text-base"],["id","phone_extension","name","phone_extension","type","text","formControlName","main_phone_extension",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Primary contact"],[1,"col-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","office_phone_extension",1,"text-dark","text-base"],["id","office_phone_extension","name","office_phone_extension","type","text","formControlName","office_phone_extension",1,"form-control"],["for","mobile_phone",1,"text-dark","text-base"],["id","mobile_phone","name","mobile_phone","type","text","formControlName","mobile_phone",1,"form-control"],["for","mobile_phone_extension",1,"text-dark","text-base"],["id","mobile_phone_extension","name","mobile_phone_extension","type","text","formControlName","mobile_phone_extension",1,"form-control"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",0),l.Jc(1,h,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"Edit Customer"),l.Tb(),l.Ub(4,"mat-horizontal-stepper",2,3),l.Ub(6,"mat-step",4),l.Ub(7,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.saveFirst(n)})),l.Ub(8,"div",6),l.Ub(9,"label",7),l.Lc(10,"Customer name"),l.Tb(),l.Pb(11,"input",8),l.Jc(12,v,2,0,"div",9),l.Tb(),l.Ub(13,"div",10),l.Ub(14,"label",11),l.Lc(15,"Address Line 1"),l.Tb(),l.Pb(16,"input",12),l.Jc(17,_,2,0,"div",9),l.Tb(),l.Ub(18,"div",10),l.Ub(19,"label",13),l.Lc(20,"Address Line 2"),l.Tb(),l.Pb(21,"input",14),l.Jc(22,C,2,0,"div",9),l.Tb(),l.Ub(23,"div",10),l.Ub(24,"label",13),l.Lc(25,"State"),l.Tb(),l.Ub(26,"div",15),l.Ub(27,"select",16),l.fc("change",(function(t){return e.onStateChange(t)})),l.Ub(28,"option",17),l.Lc(29,"Select state..."),l.Tb(),l.Jc(30,x,2,3,"option",18),l.Tb(),l.Pb(31,"mat-icon",19),l.Tb(),l.Tb(),l.Ub(32,"div",10),l.Ub(33,"label",13),l.Lc(34,"City"),l.Tb(),l.Ub(35,"div",15),l.Ub(36,"select",20),l.Jc(37,O,2,3,"option",18),l.Tb(),l.Pb(38,"mat-icon",19),l.Tb(),l.Tb(),l.Ub(39,"div",6),l.Ub(40,"label",21),l.Lc(41,"Zip"),l.Tb(),l.Pb(42,"input",22),l.Jc(43,P,2,0,"div",9),l.Tb(),l.Ub(44,"div",6),l.Ub(45,"label",23),l.Lc(46,"Main phone"),l.Tb(),l.Pb(47,"input",24),l.Jc(48,M,2,0,"div",9),l.Tb(),l.Ub(49,"div",6),l.Ub(50,"label",25),l.Lc(51,"Main phone extension"),l.Tb(),l.Pb(52,"input",26),l.Jc(53,T,2,0,"div",9),l.Tb(),l.Ub(54,"div",6),l.Ub(55,"label",27),l.Lc(56,"Fax"),l.Tb(),l.Pb(57,"input",28),l.Jc(58,U,2,0,"div",9),l.Tb(),l.Ub(59,"div",29),l.Ub(60,"div",30),l.Ub(61,"button",31),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(62,"Cancel"),l.Tb(),l.Tb(),l.Ub(63,"div",30),l.Ub(64,"button",32),l.Lc(65,"Next"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(66,"mat-step",33),l.Ub(67,"form",5),l.fc("ngSubmit",(function(){return e.onSubmit()})),l.Ub(68,"div",34),l.Ub(69,"label",35),l.Lc(70,"First name"),l.Tb(),l.Pb(71,"input",36),l.Jc(72,y,2,0,"div",9),l.Tb(),l.Ub(73,"div",34),l.Ub(74,"label",37),l.Lc(75,"Last name"),l.Tb(),l.Pb(76,"input",38),l.Jc(77,w,2,0,"div",9),l.Tb(),l.Ub(78,"div",6),l.Ub(79,"label",37),l.Lc(80,"Email"),l.Tb(),l.Pb(81,"input",39),l.Jc(82,k,2,0,"div",9),l.Tb(),l.Ub(83,"div",6),l.Ub(84,"label",40),l.Lc(85,"Office phone"),l.Tb(),l.Pb(86,"input",41),l.Jc(87,L,2,0,"div",9),l.Tb(),l.Ub(88,"div",6),l.Ub(89,"label",42),l.Lc(90,"Office phone extension"),l.Tb(),l.Pb(91,"input",43),l.Jc(92,F,2,0,"div",9),l.Tb(),l.Ub(93,"div",6),l.Ub(94,"label",27),l.Lc(95,"Fax"),l.Tb(),l.Pb(96,"input",28),l.Jc(97,B,2,0,"div",9),l.Tb(),l.Ub(98,"div",6),l.Ub(99,"label",44),l.Lc(100,"Mobile phone"),l.Tb(),l.Pb(101,"input",45),l.Jc(102,S,2,0,"div",9),l.Tb(),l.Ub(103,"div",6),l.Ub(104,"label",46),l.Lc(105,"Mobile phone extension"),l.Tb(),l.Pb(106,"input",47),l.Jc(107,I,2,0,"div",9),l.Tb(),l.Ub(108,"div",29),l.Ub(109,"div",30),l.Ub(110,"button",31),l.fc("click",(function(){l.Bc(t);const n=l.xc(5);return e.goBack(n)})),l.Lc(111,"Back"),l.Tb(),l.Tb(),l.Ub(112,"div",30),l.Ub(113,"button",48),l.Lc(114,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(5),l.pc("completed",e.customerDataForm.valid),l.Bb(1),l.pc("formGroup",e.customerDataForm),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.name.touched&&e.customerDataForm.controls.name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.address_line_1.touched&&e.customerDataForm.controls.address_line_1.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.address_line_2.touched&&e.customerDataForm.controls.address_line_2.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(8),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.customerDataForm.controls.city_id.touched&&e.customerDataForm.controls.city_id.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedState]),l.Bb(5),l.Gb("is-invalid",e.customerDataForm.controls.zip.touched&&e.customerDataForm.controls.zip.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.main_phone.touched&&e.customerDataForm.controls.main_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.main_phone_extension.touched&&e.customerDataForm.controls.main_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.fax.touched&&e.customerDataForm.controls.fax.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(9),l.pc("formGroup",e.primaryContactForm),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.first_name.touched&&e.primaryContactForm.controls.first_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.last_name.touched&&e.primaryContactForm.controls.last_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.email.touched&&e.primaryContactForm.controls.email.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.office_phone.touched&&e.primaryContactForm.controls.office_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.office_phone_extension.touched&&e.primaryContactForm.controls.office_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.fax.touched&&e.primaryContactForm.controls.fax.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone.touched&&e.primaryContactForm.controls.mobile_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone_extension.touched&&e.primaryContactForm.controls.mobile_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0))},directives:[o.n,g.a,g.b,c.x,c.p,c.i,c.d,c.o,c.g,c.r,c.w,o.m,u.a,c.u,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-customer-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();function D(t,e){1&t&&(l.Ub(0,"div",51),l.Pb(1,"mat-spinner",52),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function J(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function N(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function E(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function A(t,e){if(1&t&&(l.Ub(0,"option",54),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.code),l.Bb(1),l.Mc(t.name)}}function G(t,e){if(1&t&&(l.Ub(0,"option",54),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.id),l.Bb(1),l.Mc(t.name)}}function R(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function j(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function q(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function $(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function V(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function H(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function Q(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function X(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function K(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function Z(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function W(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function Y(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}let tt=(()=>{class t{constructor(t,e,n,o,i,r){this.dialogRef=t,this.data=e,this.fb=n,this.customerService=o,this.geoService=i,this.notificationService=r,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}ngOnInit(){this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t)}buildForms(){this.customerDataForm=this.fb.group({name:["",[c.v.required]],address_line_1:["",[c.v.required]],address_line_2:["",[]],city_id:["",[c.v.required,c.v.pattern(b.a.mongoId)]],zip:["",[c.v.required,c.v.pattern(b.a.zip)]],main_phone:["",[c.v.required,c.v.pattern(b.a.numbers)]],main_phone_extension:["",[c.v.pattern(b.a.numbers)]],fax:["",[c.v.pattern(b.a.numbers)]]}),this.primaryContactForm=this.fb.group({first_name:["",[]],last_name:["",[]],email:["",[,c.v.email]],office_phone:["",[c.v.pattern(b.a.numbers)]],office_phone_extension:["",[c.v.pattern(b.a.numbers)]],fax:["",[c.v.pattern(b.a.numbers)]],mobile_phone:["",[c.v.pattern(b.a.numbers)]],mobile_phone_extension:["",[c.v.pattern(b.a.numbers)]]})}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerDataForm.controls.city_id.reset()}goBack(t){t.previous()}saveFirst(t){if(this.customerDataForm.invalid)return Object.values(this.customerDataForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});t.next()}onSubmit(){if(this.primaryContactForm.invalid)return Object.values(this.primaryContactForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{this.isLoading=!0;const t=Object.assign(Object.assign({},this.customerDataForm.value),{primary_contact:this.primaryContactForm.value});this.customerService.saveCustomer(t).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Customer added"),this.dialogRef.close()},t=>{this.notificationService.error(),this.isLoading=!1})}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(d.a),l.Ob(m.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-new-customer-dialog"]],decls:115,vars:53,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","Customer data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form","custom-scroll",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"col-12","col-md-6","mb-3"],["for","address1",1,"text-dark","text-base"],["id","address1","name","address1","type","text","formControlName","address_line_1",1,"form-control"],["for","address2",1,"text-dark","text-base"],["id","address2","name","address2","type","text","formControlName","address_line_2",1,"form-control"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city_id",1,"text-dark","text-base"],["formControlName","city_id",1,"custom-select","form-control"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","main_phone",1,"form-control"],["for","phone_extension",1,"text-dark","text-base"],["id","phone_extension","name","phone_extension","type","text","formControlName","main_phone_extension",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Primary contact"],[1,"col-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","office_phone_extension",1,"text-dark","text-base"],["id","office_phone_extension","name","office_phone_extension","type","text","formControlName","office_phone_extension",1,"form-control"],["for","mobile_phone",1,"text-dark","text-base"],["id","mobile_phone","name","mobile_phone","type","text","formControlName","mobile_phone",1,"form-control"],["for","mobile_phone_extension",1,"text-dark","text-base"],["id","mobile_phone_extension","name","mobile_phone_extension","type","text","formControlName","mobile_phone_extension",1,"form-control"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",0),l.Jc(1,D,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"New Customer"),l.Tb(),l.Ub(4,"mat-horizontal-stepper",2,3),l.Ub(6,"mat-step",4),l.Ub(7,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.saveFirst(n)})),l.Ub(8,"div",6),l.Ub(9,"label",7),l.Lc(10,"Customer name"),l.Tb(),l.Pb(11,"input",8),l.Jc(12,J,2,0,"div",9),l.Tb(),l.Ub(13,"div",10),l.Ub(14,"label",11),l.Lc(15,"Address Line 1"),l.Tb(),l.Pb(16,"input",12),l.Jc(17,N,2,0,"div",9),l.Tb(),l.Ub(18,"div",10),l.Ub(19,"label",13),l.Lc(20,"Address Line 2"),l.Tb(),l.Pb(21,"input",14),l.Jc(22,E,2,0,"div",9),l.Tb(),l.Ub(23,"div",10),l.Ub(24,"label",15),l.Lc(25,"State"),l.Tb(),l.Ub(26,"div",16),l.Ub(27,"select",17),l.fc("change",(function(t){return e.onStateChange(t)})),l.Ub(28,"option",18),l.Lc(29,"Select state..."),l.Tb(),l.Jc(30,A,2,2,"option",19),l.Tb(),l.Pb(31,"mat-icon",20),l.Tb(),l.Tb(),l.Ub(32,"div",10),l.Ub(33,"label",21),l.Lc(34,"City"),l.Tb(),l.Ub(35,"div",16),l.Ub(36,"select",22),l.Jc(37,G,2,2,"option",19),l.Tb(),l.Pb(38,"mat-icon",20),l.Tb(),l.Tb(),l.Ub(39,"div",6),l.Ub(40,"label",23),l.Lc(41,"Zip"),l.Tb(),l.Pb(42,"input",24),l.Jc(43,R,2,0,"div",9),l.Tb(),l.Ub(44,"div",6),l.Ub(45,"label",25),l.Lc(46,"Main phone"),l.Tb(),l.Pb(47,"input",26),l.Jc(48,j,2,0,"div",9),l.Tb(),l.Ub(49,"div",6),l.Ub(50,"label",27),l.Lc(51,"Main phone extension"),l.Tb(),l.Pb(52,"input",28),l.Jc(53,q,2,0,"div",9),l.Tb(),l.Ub(54,"div",6),l.Ub(55,"label",29),l.Lc(56,"Fax"),l.Tb(),l.Pb(57,"input",30),l.Jc(58,$,2,0,"div",9),l.Tb(),l.Ub(59,"div",31),l.Ub(60,"div",32),l.Ub(61,"button",33),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(62,"Cancel"),l.Tb(),l.Tb(),l.Ub(63,"div",32),l.Ub(64,"button",34),l.Lc(65,"Next"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(66,"mat-step",35),l.Ub(67,"form",5),l.fc("ngSubmit",(function(){return e.onSubmit()})),l.Ub(68,"div",36),l.Ub(69,"label",37),l.Lc(70,"First name"),l.Tb(),l.Pb(71,"input",38),l.Jc(72,V,2,0,"div",9),l.Tb(),l.Ub(73,"div",36),l.Ub(74,"label",39),l.Lc(75,"Last name"),l.Tb(),l.Pb(76,"input",40),l.Jc(77,H,2,0,"div",9),l.Tb(),l.Ub(78,"div",6),l.Ub(79,"label",39),l.Lc(80,"Email"),l.Tb(),l.Pb(81,"input",41),l.Jc(82,Q,2,0,"div",9),l.Tb(),l.Ub(83,"div",6),l.Ub(84,"label",42),l.Lc(85,"Office phone"),l.Tb(),l.Pb(86,"input",43),l.Jc(87,X,2,0,"div",9),l.Tb(),l.Ub(88,"div",6),l.Ub(89,"label",44),l.Lc(90,"Office phone extension"),l.Tb(),l.Pb(91,"input",45),l.Jc(92,K,2,0,"div",9),l.Tb(),l.Ub(93,"div",6),l.Ub(94,"label",29),l.Lc(95,"Fax"),l.Tb(),l.Pb(96,"input",30),l.Jc(97,Z,2,0,"div",9),l.Tb(),l.Ub(98,"div",6),l.Ub(99,"label",46),l.Lc(100,"Mobile phone"),l.Tb(),l.Pb(101,"input",47),l.Jc(102,W,2,0,"div",9),l.Tb(),l.Ub(103,"div",6),l.Ub(104,"label",48),l.Lc(105,"Mobile phone extension"),l.Tb(),l.Pb(106,"input",49),l.Jc(107,Y,2,0,"div",9),l.Tb(),l.Ub(108,"div",31),l.Ub(109,"div",32),l.Ub(110,"button",33),l.fc("click",(function(){l.Bc(t);const n=l.xc(5);return e.goBack(n)})),l.Lc(111,"Back"),l.Tb(),l.Tb(),l.Ub(112,"div",32),l.Ub(113,"button",50),l.Lc(114,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(5),l.pc("completed",e.customerDataForm.valid),l.Bb(1),l.pc("formGroup",e.customerDataForm),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.name.touched&&e.customerDataForm.controls.name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.address_line_1.touched&&e.customerDataForm.controls.address_line_1.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.address_line_2.touched&&e.customerDataForm.controls.address_line_2.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(8),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.customerDataForm.controls.city_id.touched&&e.customerDataForm.controls.city_id.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedState]),l.Bb(5),l.Gb("is-invalid",e.customerDataForm.controls.zip.touched&&e.customerDataForm.controls.zip.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.main_phone.touched&&e.customerDataForm.controls.main_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.main_phone_extension.touched&&e.customerDataForm.controls.main_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.customerDataForm.controls.fax.touched&&e.customerDataForm.controls.fax.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(9),l.pc("formGroup",e.primaryContactForm),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.first_name.touched&&e.primaryContactForm.controls.first_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.last_name.touched&&e.primaryContactForm.controls.last_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.email.touched&&e.primaryContactForm.controls.email.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.office_phone.touched&&e.primaryContactForm.controls.office_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.office_phone_extension.touched&&e.primaryContactForm.controls.office_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.fax.touched&&e.primaryContactForm.controls.fax.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone.touched&&e.primaryContactForm.controls.mobile_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.primaryContactForm.controls.mobile_phone_extension.touched&&e.primaryContactForm.controls.mobile_phone_extension.invalid),l.Bb(1),l.pc("ngIf",!0))},directives:[o.n,g.a,g.b,c.x,c.p,c.i,c.d,c.o,c.g,c.r,c.w,o.m,u.a,c.u,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}[_nghost-%COMP%]{position:relative}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-customer-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();var et=n("Espg");function nt(t,e){1&t&&(l.Ub(0,"div",24),l.Pb(1,"mat-spinner",25),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function ot(t,e){1&t&&(l.Ub(0,"th",26),l.Lc(1,"Name"),l.Tb())}function it(t,e){if(1&t&&(l.Ub(0,"td",27),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.name)}}function rt(t,e){1&t&&(l.Ub(0,"th",26),l.Lc(1,"Address"),l.Tb())}function at(t,e){if(1&t&&(l.Ub(0,"td",27),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.address_line_1)}}function ct(t,e){1&t&&(l.Ub(0,"th",26),l.Lc(1,"Contact name"),l.Tb())}function st(t,e){if(1&t&&(l.Ub(0,"td",27),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Nc(" ",(null==t.primary_contact?null:t.primary_contact.first_name)+" "+(null==t.primary_contact?null:t.primary_contact.last_name)," ")}}function bt(t,e){1&t&&(l.Ub(0,"th",26),l.Lc(1,"Actions"),l.Tb())}function lt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",27),l.Ub(1,"div",28),l.Ub(2,"button",29),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().openEditDialog(n)})),l.Pb(3,"i",30),l.Tb(),l.Ub(4,"button",31),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().onDelete(n)})),l.Pb(5,"i",32),l.Tb(),l.Tb(),l.Tb()}}function dt(t,e){1&t&&l.Pb(0,"tr",33)}function mt(t,e){1&t&&l.Pb(0,"tr",34)}function pt(t,e){1&t&&(l.Ub(0,"div",35),l.Lc(1,"No customers found"),l.Tb())}let gt=(()=>{class t{constructor(t,e,n,o){this.dialog=t,this.dialogService=e,this.customerService=n,this.notificationService=o,this.displayedColumns=["name","address","contact_name","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.items=new a.k([]);const i=n.customers.subscribe(t=>{this.customers=t,this.items.data=t});this.subscriptions.push(i)}ngOnInit(){this.dialogService.showLoader(),this.customerService.fetchCustomers().finally(()=>{this.dialogService.hideLoader()}),this.items.filterPredicate=(t,e)=>{var n,o,i,r;return-1!==(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e))||-1!==(null===(o=t.address_line_1)||void 0===o?void 0:o.toLowerCase().indexOf(e))||-1!==(null===(i=t.primary_contact)||void 0===i?void 0:i.first_name.toString().toLowerCase().indexOf(e))||-1!==(null===(r=t.primary_contact)||void 0===r?void 0:r.last_name.toString().toLowerCase().indexOf(e))}}applyFilter(t){this.items.filter=t.trim().toLocaleLowerCase()}openNewDialog(){this.dialog.open(tt,{width:"700px"})}openEditDialog(t){this.dialog.open(z,{width:"700px",data:{customer:t}})}onDelete(t){this.dialogService.showConfirm({title:"Delete customer",msg:"Are you sure?"},()=>{this.loading=!0,this.customerService.deleteCustomer(t.id).subscribe(t=>{this.loading=!1,this.notificationService.success("Customer deleted")},t=>{this.loading=!1,this.notificationService.error()})})}ngAfterViewInit(){this.items.sort=this.sort,this.items.paginator=this.paginator}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.b),l.Ob(et.a),l.Ob(d.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-customers"]],viewQuery:function(t,e){var n;1&t&&(l.Qc(r.a,!0),l.Qc(i.a,!0)),2&t&&(l.wc(n=l.gc())&&(e.sort=n.first),l.wc(n=l.gc())&&(e.paginator=n.first))},decls:32,vars:6,consts:[[1,"px-2","px-md-5","py-3","position-relative"],["class","loader",4,"ngIf"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","contact_name"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center border py-3 mt-n3 table-width",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],[1,"loader"],[3,"diameter"],["mat-header-cell",""],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"text-center","border","py-3","mt-n3","table-width"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Jc(1,nt,2,1,"div",1),l.Ub(2,"div",2),l.Ub(3,"h1",3),l.Lc(4,"Customers"),l.Tb(),l.Ub(5,"div",4),l.Ub(6,"div",5),l.Ub(7,"div",6),l.Ub(8,"span",7),l.Pb(9,"i",8),l.Tb(),l.Tb(),l.Ub(10,"input",9),l.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),l.Tb(),l.Tb(),l.Ub(11,"button",10),l.fc("click",(function(){return e.openNewDialog()})),l.Lc(12,"+Add"),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"div",11),l.Ub(14,"div",12),l.Ub(15,"table",13),l.Sb(16,14),l.Jc(17,ot,2,0,"th",15),l.Jc(18,it,2,1,"td",16),l.Rb(),l.Sb(19,17),l.Jc(20,rt,2,0,"th",15),l.Jc(21,at,2,1,"td",16),l.Rb(),l.Sb(22,18),l.Jc(23,ct,2,0,"th",15),l.Jc(24,st,2,1,"td",16),l.Rb(),l.Sb(25,19),l.Jc(26,bt,2,0,"th",15),l.Jc(27,lt,6,0,"td",16),l.Rb(),l.Jc(28,dt,1,0,"tr",20),l.Jc(29,mt,1,0,"tr",21),l.Tb(),l.Jc(30,pt,2,0,"div",22),l.Pb(31,"mat-paginator",23),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.pc("ngIf",e.loading),l.Bb(14),l.pc("dataSource",e.items),l.Bb(13),l.pc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.pc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),l.Bb(1),l.pc("pageSizeOptions",e.pageSizeOptions))},directives:[o.n,a.j,r.a,a.c,a.e,a.b,a.g,a.i,i.a,f.b,a.d,a.a,a.f,a.h],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}"]}),t})();var ut=n("mrSG"),ft=n("82aN"),ht=n("tyNb"),vt=n("9Ku7");function _t(t,e){1&t&&(l.Ub(0,"div",38),l.Pb(1,"mat-spinner",39),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function Ct(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function xt(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function Ot(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function Pt(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function Mt(t,e){if(1&t&&(l.Ub(0,"option",41),l.Lc(1),l.Tb()),2&t){const t=e.$implicit,n=l.jc();l.pc("value",t.code)("selected",t.code===(null==n.company?null:n.company.city.state_code)),l.Bb(1),l.Nc(" ",t.name," ")}}function Tt(t,e){if(1&t&&(l.Ub(0,"option",42),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.id),l.Bb(1),l.Mc(t.name)}}function Ut(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function yt(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function wt(t,e){1&t&&(l.Ub(0,"div",40),l.Lc(1,"Invalid field"),l.Tb())}function kt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",43),l.Ub(1,"div",44),l.Ub(2,"button",45),l.fc("click",(function(){return l.Bc(t),l.jc().onCancel()})),l.Lc(3,"Cancel"),l.Tb(),l.Tb(),l.Ub(4,"div",44),l.Ub(5,"button",46),l.Lc(6,"Save"),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.jc();l.Bb(5),l.pc("disabled",!t.isEditionAble)}}let Lt=(()=>{class t{constructor(t,e,n,o,i,r){this.companyService=t,this.fb=e,this.geoService=n,this.notificationService=o,this.router=i,this.authService=r,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.isEditionAble=!1,this.isEditionAble=this.authService.isAdmin(),this.buildForm();const a=this.companyService.company.subscribe(t=>{this.company=t,t&&this.loadFormData()});this.subscriptions.push(a)}ngOnInit(){this.company||this.companyService.fetchCompany(),this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t)}buildForm(){var t,e,n,o,i,r,a,s,b;this.profileForm=this.fb.group({name:[{value:(null===(t=this.company)||void 0===t?void 0:t.name)||"",disabled:!this.isEditionAble},[c.v.required]],contact_name:[{value:(null===(e=this.company)||void 0===e?void 0:e.contact_name)||"",disabled:!this.isEditionAble},[c.v.required]],address_line_1:[{value:(null===(n=this.company)||void 0===n?void 0:n.address_line_1)||"",disabled:!this.isEditionAble},[c.v.required]],address_line_2:[{value:(null===(o=this.company)||void 0===o?void 0:o.address_line_2)||"",disabled:!this.isEditionAble},[]],zip:[{value:(null===(i=this.company)||void 0===i?void 0:i.zip)||"",disabled:!this.isEditionAble},[c.v.required]],office_phone:[{value:(null===(r=this.company)||void 0===r?void 0:r.office_phone)||"",disabled:!this.isEditionAble},[c.v.required]],fax:[{value:(null===(a=this.company)||void 0===a?void 0:a.fax)||"",disabled:!this.isEditionAble},[c.v.required]],city:[{value:(null===(s=this.company)||void 0===s?void 0:s.city.id)||"",disabled:!this.isEditionAble},[c.v.required]],starting_invoice_number:[{value:(null===(b=this.company)||void 0===b?void 0:b.starting_invoice_number)||"",disabled:!0}]})}loadFormData(){var t,e,n;this.company&&(this.profileForm.setValue({name:this.company.name,contact_name:this.company.contact_name,address_line_1:this.company.address_line_1,address_line_2:null!==(t=this.company.address_line_2)&&void 0!==t?t:"",zip:this.company.zip,office_phone:null!==(e=this.company.office_phone)&&void 0!==e?e:"",fax:null!==(n=this.company.fax)&&void 0!==n?n:"",city:this.company.city.id,starting_invoice_number:this.company.starting_invoice_number}),this.selectedState=this.company.city.state_code,this.geoService.fetchCitiesByState(this.company.city.state_code))}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.profileForm.controls.city.reset()}onCancel(){this.router.navigate(["/"])}onSubmit(){if(this.profileForm.invalid)return Object.values(this.profileForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{this.isLoading=!0;const t=this.profileForm.value,e=Object(ut.b)(t,["starting_invoice_number"]);this.companyService.updateCompany(e).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Profile updated")},t=>{this.notificationService.error(),this.isLoading=!1})}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(ft.a),l.Ob(c.e),l.Ob(m.a),l.Ob(p.a),l.Ob(ht.b),l.Ob(vt.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-profile"]],decls:67,vars:29,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"mb-4"],[1,"w-100","border-primary-2","rounded-xl"],[1,"w-100","p-3","bg-primary","text-white","font-bold"],[1,"w-100","p-3","loader-container"],["class","loader",4,"ngIf"],[1,"form-group","row","mt-4","profile-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","contact_name",1,"text-dark","text-base"],["id","contact_name","name","contact_name","type","text","formControlName","contact_name",1,"form-control"],[1,"col-12","col-md-6","mb-3"],["for","address_line_1",1,"text-dark","text-base"],["id","address_line_1","name","address_line_1","type","text","formControlName","address_line_1",1,"form-control"],["for","address_line_2",1,"text-dark","text-base"],["id","address_line_2","name","address_line_2","type","text","formControlName","address_line_2",1,"form-control"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["id","state",1,"custom-select","form-control",3,"disabled","change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city",1,"text-dark","text-base"],["id","city","formControlName","city",1,"custom-select","form-control"],[3,"value",4,"ngFor","ngForOf"],["for","zip",1,"text-dark","text-base"],["id","zip","name","zip","type","text","formControlName","zip",1,"form-control"],["for","fax",1,"text-dark","text-base"],["id","fax","name","fax","type","text","formControlName","fax",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","starting_invoice_number",1,"text-dark","text-base"],["id","starting_invoice_number","name","starting_invoice_number","type","text","formControlName","starting_invoice_number",1,"form-control"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-between mt-2",4,"ngIf"],[1,"loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"],[3,"value"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success",3,"disabled"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h1",2),l.Lc(3,"Company Profile"),l.Tb(),l.Tb(),l.Ub(4,"div",3),l.Ub(5,"div",4),l.Ub(6,"div",5),l.Lc(7,"Profile info"),l.Tb(),l.Ub(8,"div",6),l.Jc(9,_t,2,1,"div",7),l.Ub(10,"form",8),l.fc("ngSubmit",(function(){return e.onSubmit()})),l.Ub(11,"div",9),l.Ub(12,"label",10),l.Lc(13,"Company name"),l.Tb(),l.Pb(14,"input",11),l.Jc(15,Ct,2,0,"div",12),l.Tb(),l.Ub(16,"div",9),l.Ub(17,"label",13),l.Lc(18,"Company contact name"),l.Tb(),l.Pb(19,"input",14),l.Jc(20,xt,2,0,"div",12),l.Tb(),l.Ub(21,"div",15),l.Ub(22,"label",16),l.Lc(23,"Address Line 1"),l.Tb(),l.Pb(24,"input",17),l.Jc(25,Ot,2,0,"div",12),l.Tb(),l.Ub(26,"div",15),l.Ub(27,"label",18),l.Lc(28,"Address Line 2"),l.Tb(),l.Pb(29,"input",19),l.Jc(30,Pt,2,0,"div",12),l.Tb(),l.Ub(31,"div",15),l.Ub(32,"label",20),l.Lc(33,"State"),l.Tb(),l.Ub(34,"div",21),l.Ub(35,"select",22),l.fc("change",(function(t){return e.onStateChange(t)})),l.Ub(36,"option",23),l.Lc(37,"Select state..."),l.Tb(),l.Jc(38,Mt,2,3,"option",24),l.Tb(),l.Pb(39,"mat-icon",25),l.Tb(),l.Tb(),l.Ub(40,"div",15),l.Ub(41,"label",26),l.Lc(42,"City"),l.Tb(),l.Ub(43,"div",21),l.Ub(44,"select",27),l.Jc(45,Tt,2,2,"option",28),l.Tb(),l.Pb(46,"mat-icon",25),l.Tb(),l.Tb(),l.Ub(47,"div",15),l.Ub(48,"label",29),l.Lc(49,"Zip"),l.Tb(),l.Pb(50,"input",30),l.Jc(51,Ut,2,0,"div",12),l.Tb(),l.Ub(52,"div",15),l.Ub(53,"label",31),l.Lc(54,"Fax"),l.Tb(),l.Pb(55,"input",32),l.Jc(56,yt,2,0,"div",12),l.Tb(),l.Ub(57,"div",9),l.Ub(58,"label",33),l.Lc(59,"Office phone"),l.Tb(),l.Pb(60,"input",34),l.Jc(61,wt,2,0,"div",12),l.Tb(),l.Ub(62,"div",9),l.Ub(63,"label",35),l.Lc(64,"Starting invoice number"),l.Tb(),l.Pb(65,"input",36),l.Tb(),l.Jc(66,kt,7,1,"div",37),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(9),l.pc("ngIf",e.isLoading),l.Bb(1),l.pc("formGroup",e.profileForm),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.name.touched&&e.profileForm.controls.name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.contact_name.touched&&e.profileForm.controls.contact_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.address_line_1.touched&&e.profileForm.controls.address_line_1.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.address_line_2.touched&&e.profileForm.controls.address_line_2.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(5),l.pc("disabled",!e.isEditionAble),l.Bb(3),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.profileForm.controls.city.touched&&e.profileForm.controls.city.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedState]),l.Bb(5),l.Gb("is-invalid",e.profileForm.controls.zip.touched&&e.profileForm.controls.zip.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.fax.touched&&e.profileForm.controls.fax.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.profileForm.controls.office_phone.touched&&e.profileForm.controls.office_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(5),l.pc("ngIf",e.isEditionAble))},directives:[o.n,c.x,c.p,c.i,c.d,c.o,c.g,c.r,c.w,o.m,u.a,c.u,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.profile-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();var Ft=n("nUUR");function Bt(t,e){1&t&&(l.Ub(0,"div",19),l.Pb(1,"mat-spinner",20),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function St(t,e){1&t&&(l.Ub(0,"div",21),l.Lc(1,"Invalid field"),l.Tb())}let It=(()=>{class t{constructor(t,e,n,o,i){this.dialogRef=t,this.data=e,this.fb=n,this.rateService=o,this.notificationService=i,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.rate=this.data.rate,this.buildForms()}buildForms(){this.rateForm=this.fb.group({amount:[this.rate.amount,[c.v.required]]})}onSubmit(){if(this.rateForm.invalid)return Object.values(this.rateForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});this.isLoading=!0,this.rateService.updateRate(this.rateForm.value,this.rate.id).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Rate updated"),this.dialogRef.close()},t=>{this.notificationService.error(),this.isLoading=!1})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(Ft.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-edit-rate-dialog"]],decls:53,vars:9,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],[1,"form-group","row","mt-4","new-rate-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["disabled","",1,"custom-select","form-control"],["value","","selected",""],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","amount","name","amount","type","number","formControlName","amount",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Jc(1,Bt,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"Edit Rate"),l.Tb(),l.Ub(4,"form",2),l.fc("ngSubmit",(function(){return e.onSubmit()})),l.Ub(5,"div",3),l.Ub(6,"label",4),l.Lc(7,"Origination state"),l.Tb(),l.Ub(8,"div",5),l.Ub(9,"select",6),l.Ub(10,"option",7),l.Lc(11),l.Tb(),l.Tb(),l.Pb(12,"mat-icon",8),l.Tb(),l.Tb(),l.Ub(13,"div",3),l.Ub(14,"label",4),l.Lc(15,"Origination city"),l.Tb(),l.Ub(16,"div",5),l.Ub(17,"select",6),l.Ub(18,"option",7),l.Lc(19),l.Tb(),l.Tb(),l.Pb(20,"mat-icon",8),l.Tb(),l.Tb(),l.Ub(21,"div",3),l.Ub(22,"label",4),l.Lc(23,"Destination state"),l.Tb(),l.Ub(24,"div",5),l.Ub(25,"select",6),l.Ub(26,"option",7),l.Lc(27),l.Tb(),l.Tb(),l.Pb(28,"mat-icon",8),l.Tb(),l.Tb(),l.Ub(29,"div",3),l.Ub(30,"label",4),l.Lc(31,"Destination city"),l.Tb(),l.Ub(32,"div",5),l.Ub(33,"select",6),l.Ub(34,"option",7),l.Lc(35),l.Tb(),l.Tb(),l.Pb(36,"mat-icon",8),l.Tb(),l.Tb(),l.Ub(37,"div",3),l.Ub(38,"label",9),l.Lc(39,"Amount"),l.Tb(),l.Ub(40,"div",10),l.Ub(41,"div",11),l.Ub(42,"span",12),l.Lc(43,"$"),l.Tb(),l.Tb(),l.Pb(44,"input",13),l.Jc(45,St,2,0,"div",14),l.Tb(),l.Tb(),l.Ub(46,"div",15),l.Ub(47,"div",16),l.Ub(48,"button",17),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(49,"Cancel"),l.Tb(),l.Tb(),l.Ub(50,"div",16),l.Ub(51,"button",18),l.Lc(52,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(3),l.pc("formGroup",e.rateForm),l.Bb(7),l.Mc(e.rate.origination_city.state_name),l.Bb(8),l.Mc(e.rate.origination_city.name),l.Bb(8),l.Mc(e.rate.destination_city.state_name),l.Bb(8),l.Mc(e.rate.destination_city.name),l.Bb(9),l.Gb("is-invalid",e.rateForm.controls.amount.touched&&e.rateForm.controls.amount.invalid),l.Bb(1),l.pc("ngIf",!0))},directives:[o.n,c.x,c.p,c.i,c.r,c.w,u.a,c.s,c.d,c.o,c.g,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-rate-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();function zt(t,e){1&t&&(l.Ub(0,"div",22),l.Pb(1,"mat-spinner",23),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function Dt(t,e){if(1&t&&(l.Ub(0,"option",24),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.code),l.Bb(1),l.Mc(t.name)}}function Jt(t,e){if(1&t&&(l.Ub(0,"option",24),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.id),l.Bb(1),l.Mc(t.name)}}function Nt(t,e){if(1&t&&(l.Ub(0,"option",24),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.code),l.Bb(1),l.Mc(t.name)}}function Et(t,e){if(1&t&&(l.Ub(0,"option",24),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.id),l.Bb(1),l.Mc(t.name)}}function At(t,e){1&t&&(l.Ub(0,"div",25),l.Lc(1,"Invalid field"),l.Tb())}let Gt=(()=>{class t{constructor(t,e,n,o,i,r){this.dialogRef=t,this.data=e,this.fb=n,this.rateService=o,this.geoService=i,this.notificationService=r,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}ngOnInit(){this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t)}buildForms(){this.rateForm=this.fb.group({origination_city_id:["",[c.v.required]],destination_city_id:["",[c.v.required]],amount:[0,[c.v.required]]})}onStateChange(t,e){const n=t.target.value;"orig"===e?(this.selectedOrigState=n,this.rateForm.controls.origination_city_id.reset()):(this.selectedDestState=n,this.rateForm.controls.destination_city_id.reset()),this.geoService.fetchCitiesByState(n)}onSubmit(){if(this.rateForm.invalid)return Object.values(this.rateForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});this.isLoading=!0,this.rateService.saveRate(this.rateForm.value).subscribe(t=>{this.isLoading=!1,this.notificationService.success("Rate added"),this.dialogRef.close()},t=>{var e,n;(null===(n=null===(e=t.error)||void 0===e?void 0:e.message)||void 0===n?void 0:n.includes("Rate already exists"))?this.notificationService.error(t.error.message):this.notificationService.error(),this.isLoading=!1})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(Ft.a),l.Ob(m.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-new-rate-dialog"]],decls:53,vars:13,consts:[[1,"dialog-content"],["class","dialog-loader",4,"ngIf"],[1,"form-group","row","mt-4","new-rate-form",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","origination_city_id",1,"custom-select","form-control"],["formControlName","destination_city_id",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","amount","name","amount","type","number","formControlName","amount",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[3,"value"],[1,"form-text","invalid-feedback"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Jc(1,zt,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"New Rate"),l.Tb(),l.Ub(4,"form",2),l.fc("ngSubmit",(function(){return e.onSubmit()})),l.Ub(5,"div",3),l.Ub(6,"label",4),l.Lc(7,"Origination state"),l.Tb(),l.Ub(8,"div",5),l.Ub(9,"select",6),l.fc("change",(function(t){return e.onStateChange(t,"orig")})),l.Ub(10,"option",7),l.Lc(11,"Select state..."),l.Tb(),l.Jc(12,Dt,2,2,"option",8),l.Tb(),l.Pb(13,"mat-icon",9),l.Tb(),l.Tb(),l.Ub(14,"div",3),l.Ub(15,"label",4),l.Lc(16,"Origination city"),l.Tb(),l.Ub(17,"div",5),l.Ub(18,"select",10),l.Jc(19,Jt,2,2,"option",8),l.Tb(),l.Pb(20,"mat-icon",9),l.Tb(),l.Tb(),l.Ub(21,"div",3),l.Ub(22,"label",4),l.Lc(23,"Destination state"),l.Tb(),l.Ub(24,"div",5),l.Ub(25,"select",6),l.fc("change",(function(t){return e.onStateChange(t,"dest")})),l.Ub(26,"option",7),l.Lc(27,"Select state..."),l.Tb(),l.Jc(28,Nt,2,2,"option",8),l.Tb(),l.Pb(29,"mat-icon",9),l.Tb(),l.Tb(),l.Ub(30,"div",3),l.Ub(31,"label",4),l.Lc(32,"Destination city"),l.Tb(),l.Ub(33,"div",5),l.Ub(34,"select",11),l.Jc(35,Et,2,2,"option",8),l.Tb(),l.Pb(36,"mat-icon",9),l.Tb(),l.Tb(),l.Ub(37,"div",3),l.Ub(38,"label",12),l.Lc(39,"Amount"),l.Tb(),l.Ub(40,"div",13),l.Ub(41,"div",14),l.Ub(42,"span",15),l.Lc(43,"$"),l.Tb(),l.Tb(),l.Pb(44,"input",16),l.Jc(45,At,2,0,"div",17),l.Tb(),l.Tb(),l.Ub(46,"div",18),l.Ub(47,"div",19),l.Ub(48,"button",20),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(49,"Cancel"),l.Tb(),l.Tb(),l.Ub(50,"div",19),l.Ub(51,"button",21),l.Lc(52,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(3),l.pc("formGroup",e.rateForm),l.Bb(8),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.rateForm.controls.origination_city_id.touched&&e.rateForm.controls.origination_city_id.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedOrigState]),l.Bb(9),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.rateForm.controls.destination_city_id.touched&&e.rateForm.controls.destination_city_id.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedDestState]),l.Bb(9),l.Gb("is-invalid",e.rateForm.controls.amount.touched&&e.rateForm.controls.amount.invalid),l.Bb(1),l.pc("ngIf",!0))},directives:[o.n,c.x,c.p,c.i,c.r,c.w,o.m,u.a,c.u,c.o,c.g,c.s,c.d,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-rate-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();function Rt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Origination state"),l.Tb())}function jt(t,e){if(1&t&&(l.Ub(0,"td",26),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Oc("",t.origination_city.state_name,", ",t.origination_city.state_code,"")}}function qt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Origination city"),l.Tb())}function $t(t,e){if(1&t&&(l.Ub(0,"td",26),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.origination_city.name)}}function Vt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Destination state"),l.Tb())}function Ht(t,e){if(1&t&&(l.Ub(0,"td",26),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Oc("",t.destination_city.state_name,", ",t.destination_city.state_code,"")}}function Qt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Destination city"),l.Tb())}function Xt(t,e){if(1&t&&(l.Ub(0,"td",26),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.destination_city.name)}}function Kt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Amount"),l.Tb())}function Zt(t,e){if(1&t&&(l.Ub(0,"td",26),l.Lc(1),l.kc(2,"currency"),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(l.lc(2,1,t.amount))}}function Wt(t,e){1&t&&(l.Ub(0,"th",25),l.Lc(1,"Actions"),l.Tb())}function Yt(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",26),l.Ub(1,"div",27),l.Ub(2,"button",28),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().openEditDialog(n)})),l.Pb(3,"i",29),l.Tb(),l.Ub(4,"button",30),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().onDelete(n)})),l.Pb(5,"i",31),l.Tb(),l.Tb(),l.Tb()}}function te(t,e){1&t&&l.Pb(0,"tr",32)}function ee(t,e){1&t&&l.Pb(0,"tr",33)}function ne(t,e){1&t&&(l.Ub(0,"div",34),l.Lc(1,"No rates found"),l.Tb())}let oe=(()=>{class t{constructor(t,e,n,o){this.dialog=t,this.dialogService=e,this.rateService=n,this.notificationService=o,this.displayedColumns=["origination_state","origination_city","destination_state","destination_city","amount","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.items=new a.k([]);const i=n.rates.subscribe(t=>{this.rates=t,this.items.data=t});this.subscriptions.push(i)}ngOnInit(){var t;(null===(t=this.rates)||void 0===t?void 0:t.length)||(this.dialogService.showLoader(),this.rateService.fetchRates().finally(()=>{this.dialogService.hideLoader()}))}openNewDialog(){this.dialog.open(Gt,{width:"700px"})}openEditDialog(t){this.dialog.open(It,{width:"700px",data:{rate:t}})}onDelete(t){this.dialogService.showConfirm({title:"Delete rate",msg:"Are you sure?"},()=>{this.rateService.deleteRate(t.id).subscribe(t=>{this.notificationService.success("Rate deleted")},t=>{this.notificationService.error()})})}ngAfterViewInit(){this.items.sort=this.sort,this.items.paginator=this.paginator}applyFilter(t){this.items.filter=t.trim().toLocaleLowerCase()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.b),l.Ob(et.a),l.Ob(Ft.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-rates"]],viewQuery:function(t,e){var n;1&t&&(l.Qc(r.a,!0),l.Qc(i.a,!0)),2&t&&(l.wc(n=l.gc())&&(e.sort=n.first),l.wc(n=l.gc())&&(e.paginator=n.first))},decls:37,vars:5,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","origination_state"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","origination_city"],["matColumnDef","destination_state"],["matColumnDef","destination_city"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h1",2),l.Lc(3,"Rates"),l.Tb(),l.Ub(4,"div",3),l.Ub(5,"div",4),l.Ub(6,"div",5),l.Ub(7,"span",6),l.Pb(8,"i",7),l.Tb(),l.Tb(),l.Ub(9,"input",8),l.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),l.Tb(),l.Tb(),l.Ub(10,"button",9),l.fc("click",(function(){return e.openNewDialog()})),l.Lc(11,"+Add"),l.Tb(),l.Tb(),l.Tb(),l.Ub(12,"div",10),l.Ub(13,"div",11),l.Ub(14,"table",12),l.Sb(15,13),l.Jc(16,Rt,2,0,"th",14),l.Jc(17,jt,2,2,"td",15),l.Rb(),l.Sb(18,16),l.Jc(19,qt,2,0,"th",14),l.Jc(20,$t,2,1,"td",15),l.Rb(),l.Sb(21,17),l.Jc(22,Vt,2,0,"th",14),l.Jc(23,Ht,2,2,"td",15),l.Rb(),l.Sb(24,18),l.Jc(25,Qt,2,0,"th",14),l.Jc(26,Xt,2,1,"td",15),l.Rb(),l.Sb(27,19),l.Jc(28,Kt,2,0,"th",14),l.Jc(29,Zt,3,3,"td",15),l.Rb(),l.Sb(30,20),l.Jc(31,Wt,2,0,"th",14),l.Jc(32,Yt,6,0,"td",15),l.Rb(),l.Jc(33,te,1,0,"tr",21),l.Jc(34,ee,1,0,"tr",22),l.Tb(),l.Jc(35,ne,2,0,"div",23),l.Pb(36,"mat-paginator",24),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(14),l.pc("dataSource",e.items),l.Bb(19),l.pc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.pc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),l.Bb(1),l.pc("pageSizeOptions",e.pageSizeOptions))},directives:[a.j,r.a,a.c,a.e,a.b,a.g,a.i,o.n,i.a,a.d,a.a,a.f,a.h],pipes:[o.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}"]}),t})();var ie=n("RaVz");function re(t,e){1&t&&(l.Ub(0,"div",51),l.Pb(1,"mat-spinner",52),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function ae(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function ce(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function se(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function be(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function le(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}function de(t,e){if(1&t&&(l.Ub(0,"option",54),l.Lc(1),l.Tb()),2&t){const t=e.$implicit,n=l.jc();l.pc("value",t.code)("selected",t.code===n.user.city.state_code),l.Bb(1),l.Nc(" ",t.name," ")}}function me(t,e){if(1&t&&(l.Ub(0,"option",54),l.Lc(1),l.Tb()),2&t){const t=e.$implicit,n=l.jc();l.pc("value",t.id)("selected",t.id===n.user.city.id),l.Bb(1),l.Nc(" ",t.name," ")}}function pe(t,e){1&t&&(l.Ub(0,"div",53),l.Lc(1,"Invalid field"),l.Tb())}let ge=(()=>{class t{constructor(t,e,n,o,i,r){this.dialogRef=t,this.data=e,this.fb=n,this.userService=o,this.geoService=i,this.notificationService=r,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.user=e.user,this.buildForms()}ngOnInit(){this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t),this.selectedState=this.user.city.state_code,this.geoService.fetchCitiesByState(this.user.city.state_code)}buildForms(){var t,e,n,o,i;this.userForm=this.fb.group({email:[this.user.email,[c.v.required,c.v.email]],first_name:[this.user.first_name,[c.v.required]],last_name:[this.user.last_name,[c.v.required]],phone:[this.user.phone,[c.v.required,c.v.pattern(b.a.numbers)]],office_phone:[this.user.office_phone,[c.v.pattern(b.a.numbers)]],city:[this.user.city.id,[c.v.required,c.v.pattern(b.a.mongoId)]],commission:[this.user.commission,[c.v.required]]}),this.options=this.fb.group({canEmailInvoices:[null===(t=this.user.roles)||void 0===t?void 0:t.includes("INVOICE_EMAIL")],canModifyCustomers:[null===(e=this.user.roles)||void 0===e?void 0:e.includes("HANDLE_CUSTOMERS")],isManager:[null===(n=this.user.roles)||void 0===n?void 0:n.includes("MANAGER")],isAdmin:[null===(o=this.user.roles)||void 0===o?void 0:o.includes("ADMIN")],isDriver:[null===(i=this.user.roles)||void 0===i?void 0:i.includes("USER")],receiveEmail:[!1]})}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.userForm.controls.city.reset()}goBack(t){t.previous()}saveFirst(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});t.next()}onSubmit(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{this.isLoading=!0;const e=Object.assign(Object.assign({},this.userForm.value),{options:this.options.value});this.userService.updateUser(e,this.user.id).subscribe(t=>{this.isLoading=!1,this.notificationService.success("User updated"),this.dialogRef.close()},e=>{var n,o;"Email already taken"===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)?(this.notificationService.error(null===(o=null==e?void 0:e.error)||void 0===o?void 0:o.message),this.userForm.controls.email.setErrors({alreadyTaken:!0}),this.goBack(t)):this.notificationService.error(),this.isLoading=!1})}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(ie.a),l.Ob(m.a),l.Ob(p.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-edit-user-dialog"]],decls:105,vars:26,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","User data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","col-md-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],[1,"col-12","mb-3"],["for","email",1,"text-dark","text-base"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","phone",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city",1,"custom-select","form-control"],["for","driver_commission",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","commission","name","commission","type","text","formControlName","commission",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Permissions"],[1,"col-12","px-2","py-2"],[1,"custom-control","custom-switch"],["type","checkbox","id","canEmailInvoices","formControlName","canEmailInvoices",1,"custom-control-input"],["for","canEmailInvoices",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","canModifyCustomers","formControlName","canModifyCustomers",1,"custom-control-input"],["for","canModifyCustomers",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isManager","formControlName","isManager",1,"custom-control-input"],["for","isManager",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isAdmin","formControlName","isAdmin",1,"custom-control-input"],["for","isAdmin",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isDriver","formControlName","isDriver","disabled","",1,"custom-control-input"],["for","isDriver",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","receiveEmail","formControlName","receiveEmail",1,"custom-control-input"],["for","receiveEmail",1,"custom-control-label","cursor-pointer"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",0),l.Jc(1,re,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"Edit User"),l.Tb(),l.Ub(4,"mat-horizontal-stepper",2,3),l.Ub(6,"mat-step",4),l.Ub(7,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.saveFirst(n)})),l.Ub(8,"div",6),l.Ub(9,"label",7),l.Lc(10,"First name"),l.Tb(),l.Pb(11,"input",8),l.Jc(12,ae,2,0,"div",9),l.Tb(),l.Ub(13,"div",6),l.Ub(14,"label",10),l.Lc(15,"Last name"),l.Tb(),l.Pb(16,"input",11),l.Jc(17,ce,2,0,"div",9),l.Tb(),l.Ub(18,"div",12),l.Ub(19,"label",13),l.Lc(20,"Email address"),l.Tb(),l.Pb(21,"input",14),l.Jc(22,se,2,0,"div",9),l.Tb(),l.Ub(23,"div",12),l.Ub(24,"label",15),l.Lc(25,"Mobile phone"),l.Tb(),l.Pb(26,"input",16),l.Jc(27,be,2,0,"div",9),l.Tb(),l.Ub(28,"div",12),l.Ub(29,"label",17),l.Lc(30,"Office phone"),l.Tb(),l.Pb(31,"input",18),l.Jc(32,le,2,0,"div",9),l.Tb(),l.Ub(33,"div",6),l.Ub(34,"label",19),l.Lc(35,"State"),l.Tb(),l.Ub(36,"div",20),l.Ub(37,"select",21),l.fc("change",(function(t){return e.onStateChange(t)})),l.Ub(38,"option",22),l.Lc(39,"Select state..."),l.Tb(),l.Jc(40,de,2,3,"option",23),l.Tb(),l.Pb(41,"mat-icon",24),l.Tb(),l.Tb(),l.Ub(42,"div",6),l.Ub(43,"label",19),l.Lc(44,"City"),l.Tb(),l.Ub(45,"div",20),l.Ub(46,"select",25),l.Jc(47,me,2,3,"option",23),l.Tb(),l.Pb(48,"mat-icon",24),l.Tb(),l.Tb(),l.Ub(49,"div",12),l.Ub(50,"label",26),l.Lc(51,"Driver commission"),l.Tb(),l.Ub(52,"div",27),l.Ub(53,"div",28),l.Ub(54,"span",29),l.Lc(55,"%"),l.Tb(),l.Tb(),l.Pb(56,"input",30),l.Jc(57,pe,2,0,"div",9),l.Tb(),l.Tb(),l.Ub(58,"div",31),l.Ub(59,"div",32),l.Ub(60,"button",33),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(61,"Cancel"),l.Tb(),l.Tb(),l.Ub(62,"div",32),l.Ub(63,"button",34),l.Lc(64,"Next"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(65,"mat-step",35),l.Ub(66,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.onSubmit(n)})),l.Ub(67,"div",36),l.Ub(68,"div",12),l.Ub(69,"div",37),l.Pb(70,"input",38),l.Ub(71,"label",39),l.Lc(72,"Can Email Invoices?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(73,"div",12),l.Ub(74,"div",37),l.Pb(75,"input",40),l.Ub(76,"label",41),l.Lc(77,"Can Modify Customer List?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(78,"div",12),l.Ub(79,"div",37),l.Pb(80,"input",42),l.Ub(81,"label",43),l.Lc(82,"Is Manager?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(83,"div",12),l.Ub(84,"div",37),l.Pb(85,"input",44),l.Ub(86,"label",45),l.Lc(87,"Is Admin?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(88,"div",12),l.Ub(89,"div",37),l.Pb(90,"input",46),l.Ub(91,"label",47),l.Lc(92,"Is Driver?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(93,"div",12),l.Ub(94,"div",37),l.Pb(95,"input",48),l.Ub(96,"label",49),l.Lc(97,"Receive Email After Submit "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(98,"div",31),l.Ub(99,"div",32),l.Ub(100,"button",33),l.fc("click",(function(){l.Bc(t);const n=l.xc(5);return e.goBack(n)})),l.Lc(101,"Back"),l.Tb(),l.Tb(),l.Ub(102,"div",32),l.Ub(103,"button",50),l.Lc(104,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(5),l.pc("completed",e.userForm.valid),l.Bb(1),l.pc("formGroup",e.userForm),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.first_name.touched&&e.userForm.controls.first_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.last_name.touched&&e.userForm.controls.last_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.email.touched&&e.userForm.controls.email.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.phone.touched&&e.userForm.controls.phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.office_phone.touched&&e.userForm.controls.office_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(8),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.userForm.controls.city.touched&&e.userForm.controls.city.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedState]),l.Bb(9),l.Gb("is-invalid",e.userForm.controls.commission.touched&&e.userForm.controls.commission.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(9),l.pc("formGroup",e.options))},directives:[o.n,g.a,g.b,c.x,c.p,c.i,c.d,c.o,c.g,c.r,c.w,o.m,u.a,c.u,c.a,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-user-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();var ue=n("PmMJ");function fe(t,e){1&t&&(l.Ub(0,"div",55),l.Pb(1,"mat-spinner",56),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function he(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}function ve(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}function _e(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}function Ce(t,e){if(1&t&&(l.Ub(0,"div",57),l.Lc(1),l.Tb()),2&t){const t=l.jc();l.Bb(1),l.Nc(" ",null!=t.userForm.controls.password.errors&&t.userForm.controls.password.errors.minlength||null!=t.userForm.controls.password.errors&&t.userForm.controls.password.errors.maxlength?"Min 8 characters and max 20":"Invalid field"," ")}}function xe(t,e){if(1&t&&(l.Ub(0,"div",57),l.Lc(1),l.Tb()),2&t){const t=l.jc();l.Bb(1),l.Nc(" ",null!=t.userForm.controls.confirm_password.errors&&t.userForm.controls.confirm_password.errors.minlength||null!=t.userForm.controls.confirm_password.errors&&t.userForm.controls.confirm_password.errors.maxlength?"Min 8 characters and max 20":"Invalid field"," ")}}function Oe(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}function Pe(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}function Me(t,e){if(1&t&&(l.Ub(0,"option",58),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.code),l.Bb(1),l.Mc(t.name)}}function Te(t,e){if(1&t&&(l.Ub(0,"option",58),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.id),l.Bb(1),l.Mc(t.name)}}function Ue(t,e){1&t&&(l.Ub(0,"div",57),l.Lc(1,"Invalid field"),l.Tb())}let ye=(()=>{class t{constructor(t,e,n,o,i,r,a){this.dialogRef=t,this.data=e,this.fb=n,this.userService=o,this.geoService=i,this.notificationService=r,this.validatorsService=a,this.subscriptions=[],this.states=[],this.cities={},this.isLoading=!1,this.buildForms()}ngOnInit(){this.states=this.geoService.states;const t=this.geoService.currentCities.subscribe(t=>{this.cities=t});this.subscriptions.push(t)}buildForms(){this.userForm=this.fb.group({email:["",[c.v.required,c.v.email]],password:["",[c.v.required,c.v.minLength(8),c.v.maxLength(20)]],confirm_password:["",[c.v.required,c.v.minLength(8),c.v.maxLength(20)]],first_name:["",[c.v.required]],last_name:["",[c.v.required]],phone:["",[c.v.required,c.v.pattern(b.a.numbers)]],office_phone:["",[c.v.pattern(b.a.numbers)]],city:["",[c.v.required,c.v.pattern(b.a.mongoId)]],commission:[""]},{validators:this.validatorsService.equalPasswords("password","confirm_password")}),this.options=this.fb.group({canEmailInvoices:[!1],canModifyCustomers:[!1],isManager:[!1],isAdmin:[!1],isDriver:[!0],receiveEmail:[!1]})}onStateChange(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.userForm.controls.city.reset()}goBack(t){t.previous()}saveFirst(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});t.next()}onSubmit(t){if(this.userForm.invalid)return Object.values(this.userForm.controls).forEach(t=>{t instanceof c.h?Object.values(t.controls).forEach(t=>t.markAsTouched()):t.markAsTouched()});{this.isLoading=!0;const e=Object.assign(Object.assign({},this.userForm.value),{commission:this.userForm.value.commission>0?this.userForm.value.commission:0,options:this.options.value});delete e.confirm_password,this.userService.saveUser(e).subscribe(t=>{this.isLoading=!1,this.notificationService.success("User added"),this.dialogRef.close()},e=>{var n,o;"Email already taken"===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)?(this.notificationService.error(null===(o=null==e?void 0:e.error)||void 0===o?void 0:o.message),this.userForm.controls.email.setErrors({alreadyTaken:!0}),this.goBack(t)):this.notificationService.error(),this.isLoading=!1})}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.e),l.Ob(s.a),l.Ob(c.e),l.Ob(ie.a),l.Ob(m.a),l.Ob(p.a),l.Ob(ue.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-new-user-dialog"]],decls:115,vars:32,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],["linear",""],["stepper",""],["label","User data",3,"completed"],[1,"form-group","row","mt-4","new-customer-form",3,"formGroup","ngSubmit"],[1,"col-12","col-md-6","mb-3"],["for","first_name",1,"text-dark","text-base"],["id","first_name","name","first_name","type","text","formControlName","first_name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","last_name",1,"text-dark","text-base"],["id","last_name","name","last_name","type","text","formControlName","last_name",1,"form-control"],[1,"col-12","mb-3"],["for","email",1,"text-dark","text-base"],["id","email","name","email","type","email","formControlName","email",1,"form-control"],["for","password",1,"text-dark","text-base"],["id","password","name","password","type","password","formControlName","password",1,"form-control"],["for","confirm_password",1,"text-dark","text-base"],["id","confirm_password","name","confirm_password","type","password","formControlName","confirm_password",1,"form-control"],["for","phone",1,"text-dark","text-base"],["id","phone","name","phone","type","text","formControlName","phone",1,"form-control"],["for","office_phone",1,"text-dark","text-base"],["id","office_phone","name","office_phone","type","text","formControlName","office_phone",1,"form-control"],["for","address2",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["formControlName","city",1,"custom-select","form-control"],["for","driver_commission",1,"text-dark","text-base"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","commission","name","commission","type","text","formControlName","commission",1,"form-control"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-primary"],["label","Permissions"],[1,"col-12","px-2","py-2"],[1,"custom-control","custom-switch"],["type","checkbox","id","canEmailInvoices","formControlName","canEmailInvoices",1,"custom-control-input"],["for","canEmailInvoices",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","canModifyCustomers","formControlName","canModifyCustomers",1,"custom-control-input"],["for","canModifyCustomers",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isManager","formControlName","isManager",1,"custom-control-input"],["for","isManager",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isAdmin","formControlName","isAdmin",1,"custom-control-input"],["for","isAdmin",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","isDriver","formControlName","isDriver","disabled","",1,"custom-control-input"],["for","isDriver",1,"custom-control-label","cursor-pointer"],["type","checkbox","id","receiveEmail","formControlName","receiveEmail",1,"custom-control-input"],["for","receiveEmail",1,"custom-control-label","cursor-pointer"],["type","submit",1,"btn","w-100","btn-success"],[1,"dialog-loader"],[3,"diameter"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){if(1&t){const t=l.Vb();l.Ub(0,"div",0),l.Jc(1,fe,2,1,"div",1),l.Ub(2,"h3"),l.Lc(3,"New User"),l.Tb(),l.Ub(4,"mat-horizontal-stepper",2,3),l.Ub(6,"mat-step",4),l.Ub(7,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.saveFirst(n)})),l.Ub(8,"div",6),l.Ub(9,"label",7),l.Lc(10,"First name"),l.Tb(),l.Pb(11,"input",8),l.Jc(12,he,2,0,"div",9),l.Tb(),l.Ub(13,"div",6),l.Ub(14,"label",10),l.Lc(15,"Last name"),l.Tb(),l.Pb(16,"input",11),l.Jc(17,ve,2,0,"div",9),l.Tb(),l.Ub(18,"div",12),l.Ub(19,"label",13),l.Lc(20,"Email address"),l.Tb(),l.Pb(21,"input",14),l.Jc(22,_e,2,0,"div",9),l.Tb(),l.Ub(23,"div",6),l.Ub(24,"label",15),l.Lc(25,"Password"),l.Tb(),l.Pb(26,"input",16),l.Jc(27,Ce,2,1,"div",9),l.Tb(),l.Ub(28,"div",6),l.Ub(29,"label",17),l.Lc(30,"Confirm password"),l.Tb(),l.Pb(31,"input",18),l.Jc(32,xe,2,1,"div",9),l.Tb(),l.Ub(33,"div",12),l.Ub(34,"label",19),l.Lc(35,"Mobile phone"),l.Tb(),l.Pb(36,"input",20),l.Jc(37,Oe,2,0,"div",9),l.Tb(),l.Ub(38,"div",12),l.Ub(39,"label",21),l.Lc(40,"Office phone"),l.Tb(),l.Pb(41,"input",22),l.Jc(42,Pe,2,0,"div",9),l.Tb(),l.Ub(43,"div",6),l.Ub(44,"label",23),l.Lc(45,"State"),l.Tb(),l.Ub(46,"div",24),l.Ub(47,"select",25),l.fc("change",(function(t){return e.onStateChange(t)})),l.Ub(48,"option",26),l.Lc(49,"Select state..."),l.Tb(),l.Jc(50,Me,2,2,"option",27),l.Tb(),l.Pb(51,"mat-icon",28),l.Tb(),l.Tb(),l.Ub(52,"div",6),l.Ub(53,"label",23),l.Lc(54,"City"),l.Tb(),l.Ub(55,"div",24),l.Ub(56,"select",29),l.Jc(57,Te,2,2,"option",27),l.Tb(),l.Pb(58,"mat-icon",28),l.Tb(),l.Tb(),l.Ub(59,"div",12),l.Ub(60,"label",30),l.Lc(61,"Driver commission"),l.Tb(),l.Ub(62,"div",31),l.Ub(63,"div",32),l.Ub(64,"span",33),l.Lc(65,"%"),l.Tb(),l.Tb(),l.Pb(66,"input",34),l.Jc(67,Ue,2,0,"div",9),l.Tb(),l.Tb(),l.Ub(68,"div",35),l.Ub(69,"div",36),l.Ub(70,"button",37),l.fc("click",(function(){return e.dialogRef.close()})),l.Lc(71,"Cancel"),l.Tb(),l.Tb(),l.Ub(72,"div",36),l.Ub(73,"button",38),l.Lc(74,"Next"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(75,"mat-step",39),l.Ub(76,"form",5),l.fc("ngSubmit",(function(){l.Bc(t);const n=l.xc(5);return e.onSubmit(n)})),l.Ub(77,"div",40),l.Ub(78,"div",12),l.Ub(79,"div",41),l.Pb(80,"input",42),l.Ub(81,"label",43),l.Lc(82,"Can Email Invoices?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(83,"div",12),l.Ub(84,"div",41),l.Pb(85,"input",44),l.Ub(86,"label",45),l.Lc(87,"Can Modify Customer List?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(88,"div",12),l.Ub(89,"div",41),l.Pb(90,"input",46),l.Ub(91,"label",47),l.Lc(92,"Is Manager?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(93,"div",12),l.Ub(94,"div",41),l.Pb(95,"input",48),l.Ub(96,"label",49),l.Lc(97,"Is Admin?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(98,"div",12),l.Ub(99,"div",41),l.Pb(100,"input",50),l.Ub(101,"label",51),l.Lc(102,"Is Driver?"),l.Tb(),l.Tb(),l.Tb(),l.Ub(103,"div",12),l.Ub(104,"div",41),l.Pb(105,"input",52),l.Ub(106,"label",53),l.Lc(107,"Receive Email After Submit "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(108,"div",35),l.Ub(109,"div",36),l.Ub(110,"button",37),l.fc("click",(function(){l.Bc(t);const n=l.xc(5);return e.goBack(n)})),l.Lc(111,"Back"),l.Tb(),l.Tb(),l.Ub(112,"div",36),l.Ub(113,"button",54),l.Lc(114,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Bb(1),l.pc("ngIf",e.isLoading),l.Bb(5),l.pc("completed",e.userForm.valid),l.Bb(1),l.pc("formGroup",e.userForm),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.first_name.touched&&e.userForm.controls.first_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.last_name.touched&&e.userForm.controls.last_name.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.email.touched&&e.userForm.controls.email.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.password.touched&&e.userForm.controls.password.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.confirm_password.touched&&e.userForm.controls.confirm_password.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.phone.touched&&e.userForm.controls.phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(4),l.Gb("is-invalid",e.userForm.controls.office_phone.touched&&e.userForm.controls.office_phone.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(8),l.pc("ngForOf",e.states),l.Bb(6),l.Gb("is-invalid",e.userForm.controls.city.touched&&e.userForm.controls.city.invalid),l.Bb(1),l.pc("ngForOf",e.cities[e.selectedState]),l.Bb(9),l.Gb("is-invalid",e.userForm.controls.commission.touched&&e.userForm.controls.commission.invalid),l.Bb(1),l.pc("ngIf",!0),l.Bb(9),l.pc("formGroup",e.options))},directives:[o.n,g.a,g.b,c.x,c.p,c.i,c.d,c.o,c.g,c.r,c.w,o.m,u.a,c.u,c.a,f.b],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.new-user-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}"]}),t})();function we(t,e){1&t&&(l.Ub(0,"div",26),l.Pb(1,"mat-spinner",27),l.Tb()),2&t&&(l.Bb(1),l.pc("diameter",50))}function ke(t,e){1&t&&(l.Ub(0,"th",28),l.Lc(1,"First name"),l.Tb())}function Le(t,e){if(1&t&&(l.Ub(0,"td",29),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.first_name)}}function Fe(t,e){1&t&&(l.Ub(0,"th",28),l.Lc(1,"Last name"),l.Tb())}function Be(t,e){if(1&t&&(l.Ub(0,"td",29),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.last_name)}}function Se(t,e){1&t&&(l.Ub(0,"th",28),l.Lc(1,"Email address"),l.Tb())}function Ie(t,e){if(1&t&&(l.Ub(0,"td",30),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.email)}}function ze(t,e){1&t&&(l.Ub(0,"th",28),l.Lc(1,"Role"),l.Tb())}function De(t,e){if(1&t&&(l.Ub(0,"td",30),l.Lc(1),l.Tb()),2&t){const t=e.$implicit;l.Bb(1),l.Mc(t.mainRole)}}function Je(t,e){1&t&&(l.Ub(0,"th",28),l.Lc(1,"Actions"),l.Tb())}function Ne(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",30),l.Ub(1,"div",31),l.Ub(2,"button",32),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().openEditDialog(n)})),l.Pb(3,"i",33),l.Tb(),l.Ub(4,"button",34),l.fc("click",(function(){l.Bc(t);const n=e.$implicit;return l.jc().onDelete(n)})),l.Pb(5,"i",35),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=l.jc();l.Bb(1),l.Gb("text-dark",t.isEditionAble)("text-secondary",!t.isEditionAble),l.Bb(1),l.pc("disabled",!t.isEditionAble),l.Bb(2),l.pc("disabled",!t.isEditionAble)}}function Ee(t,e){1&t&&l.Pb(0,"tr",36)}function Ae(t,e){1&t&&l.Pb(0,"tr",37)}function Ge(t,e){1&t&&(l.Ub(0,"div",38),l.Lc(1,"No users found"),l.Tb())}let Re=(()=>{class t{constructor(t,e,n,o,i){this.dialog=t,this.dialogService=e,this.userService=n,this.notificationService=o,this.authService=i,this.displayedColumns=["first_name","last_name","email","role","actions"],this.pageSizeOptions=[12,24,50,100],this.subscriptions=[],this.loading=!1,this.isEditionAble=!1,this.isEditionAble=this.authService.isAdmin(),this.items=new a.k([]);const r=n.users.subscribe(t=>{var e;t&&(this.users=t.map(t=>Object.assign(Object.assign({},t),{mainRole:t.roles.includes("ADMIN")?"Admin":t.roles.includes("MANAGER")?"Manager":"Driver"})),this.items.data=null===(e=this.users)||void 0===e?void 0:e.sort((t,e)=>t.updatedAt<e.updatedAt?1:t.updatedAt>e.updatedAt?-1:0))});this.subscriptions.push(r)}ngOnInit(){this.dialogService.showLoader(),this.userService.fetchUsers().finally(()=>{this.dialogService.hideLoader()})}applyFilter(t){this.items.filter=t.trim().toLocaleLowerCase()}openNewDialog(){this.isEditionAble&&this.dialog.open(ye,{width:"700px"})}openEditDialog(t){this.isEditionAble&&this.dialog.open(ge,{width:"700px",data:{user:t}})}onDelete(t){this.isEditionAble&&this.dialogService.showConfirm({title:"Delete user",msg:"Are you sure?"},()=>{this.loading=!0,this.userService.deleteUser(t.id).subscribe(t=>{this.loading=!1,this.notificationService.success("User deleted")},t=>{this.loading=!1,this.notificationService.error()})})}ngAfterViewInit(){this.items.sort=this.sort,this.items.paginator=this.paginator}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(s.b),l.Ob(et.a),l.Ob(ie.a),l.Ob(p.a),l.Ob(vt.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-users"]],viewQuery:function(t,e){var n;1&t&&(l.Qc(r.a,!0),l.Qc(i.a,!0)),2&t&&(l.wc(n=l.gc())&&(e.sort=n.first),l.wc(n=l.gc())&&(e.paginator=n.first))},decls:35,vars:7,consts:[[1,"px-2","px-md-5","py-3"],["class","loader",4,"ngIf"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"disabled","click"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","first_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","capitalize",4,"matCellDef"],["matColumnDef","last_name"],["matColumnDef","email"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"pageSizeOptions"],[1,"loader"],[3,"diameter"],["mat-header-cell",""],["mat-cell","",1,"capitalize"],["mat-cell",""],[1,"action-buttons"],["aria-label","edit",1,"mr-4",3,"disabled","click"],[1,"fas","fa-user-edit","text-xl"],["aria-label","edit",3,"disabled","click"],[1,"fas","fa-trash-alt","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Jc(1,we,2,1,"div",1),l.Ub(2,"div",2),l.Ub(3,"h1",3),l.Lc(4,"Users"),l.Tb(),l.Ub(5,"div",4),l.Ub(6,"div",5),l.Ub(7,"div",6),l.Ub(8,"span",7),l.Pb(9,"i",8),l.Tb(),l.Tb(),l.Ub(10,"input",9),l.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),l.Tb(),l.Tb(),l.Ub(11,"button",10),l.fc("click",(function(){return e.openNewDialog()})),l.Lc(12,"+Add"),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"div",11),l.Ub(14,"div",12),l.Ub(15,"table",13),l.Sb(16,14),l.Jc(17,ke,2,0,"th",15),l.Jc(18,Le,2,1,"td",16),l.Rb(),l.Sb(19,17),l.Jc(20,Fe,2,0,"th",15),l.Jc(21,Be,2,1,"td",16),l.Rb(),l.Sb(22,18),l.Jc(23,Se,2,0,"th",15),l.Jc(24,Ie,2,1,"td",19),l.Rb(),l.Sb(25,20),l.Jc(26,ze,2,0,"th",15),l.Jc(27,De,2,1,"td",19),l.Rb(),l.Sb(28,21),l.Jc(29,Je,2,0,"th",15),l.Jc(30,Ne,6,6,"td",19),l.Rb(),l.Jc(31,Ee,1,0,"tr",22),l.Jc(32,Ae,1,0,"tr",23),l.Tb(),l.Jc(33,Ge,2,0,"div",24),l.Pb(34,"mat-paginator",25),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(1),l.pc("ngIf",e.loading),l.Bb(10),l.pc("disabled",!e.isEditionAble),l.Bb(4),l.pc("dataSource",e.items),l.Bb(16),l.pc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.pc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),l.Bb(1),l.pc("pageSizeOptions",e.pageSizeOptions))},directives:[o.n,a.j,r.a,a.c,a.e,a.b,a.g,a.i,i.a,f.b,a.d,a.a,a.f,a.h],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.nav-wrapper[_ngcontent-%COMP%]{width:100%;border:3px solid rgb(var(--palette-blue-main-rgb));border-radius:10px}.nav-wrapper[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-weight:600}"]}),t})();var je=n("PCNd");const qe=[{path:"",redirectTo:"customers"},{path:"customers",component:gt},{path:"profile",component:Lt},{path:"rates",component:oe},{path:"users",component:Re}];let $e=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[o.c,ht.e.forChild(qe),je.a]]}),t})()}}]);
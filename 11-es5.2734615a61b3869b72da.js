!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(y){l=function(t,e,n){return t[e]=n}}function s(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,r=Object.create(o.prototype),c=new P(i||[]);return r._invoke=function(t,e,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return x()}for(n.method=o,n.arg=r;;){var c=n.delegate;if(c){var a=C(c,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=b(t,e,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(t,n,c),r}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(y){return{type:"throw",arg:y}}}t.wrap=s;var u={};function d(){}function g(){}function v(){}var p={};l(p,r,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(k([])));m&&m!==n&&i.call(m,r)&&(p=m);var f=v.prototype=d.prototype=Object.create(p);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var n;this._invoke=function(o,r){function c(){return new e((function(n,c){!function n(o,r,c,a){var l=b(t[o],t,r);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,c,a)}),(function(t){n("throw",t,c,a)})):e.resolve(u).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,a)}))}a(l.arg)}(o,r,n,c)}))}return n=n?n.then(c,c):c()}}function C(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function k(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return g.prototype=v,l(f,"constructor",v),l(v,"constructor",g),g.displayName=l(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t},t.awrap=function(t){return{__await:t}},_(O.prototype),l(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,i,o,r){void 0===r&&(r=Promise);var c=new O(s(e,n,i,o),r);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},_(f),l(f,a,"Generator"),l(f,r,(function(){return this})),l(f,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=k,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return c.type="throw",c.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],c=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=i.call(r,"catchLoc"),l=i.call(r,"finallyLoc");if(a&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var c=r?r.completion:{};return c.type=t,c.arg=e,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{hdHI:function(i,r,c){"use strict";c.r(r),c.d(r,"routes",(function(){return ve})),c.d(r,"InvoiceModule",(function(){return pe}));var a=c("ofXK"),l=c("M9IT"),s=c("Dh3D"),b=c("+0xr"),u=c("mrSG"),d=c("3Pt+"),g=c("0IaG"),v=c("AJa1"),p=c("fXoL"),h=c("8zvB"),m=c("W7lO"),f=c("38VU"),_=c("nUUR"),O=c("NFeN");function C(t,e){if(1&t&&(p.Ub(0,"div",30),p.Lc(1),p.Tb()),2&t){var n=p.jc();p.Bb(1),p.Nc(" ",null!=n.vehicleForm.controls.vin.errors&&n.vehicleForm.controls.vin.errors.faliedSearch?"VIN not found":"Invalid VIN"," ")}}function w(t,e){if(1&t&&(p.Ub(0,"option",31),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}function M(t,e){if(1&t&&(p.Ub(0,"option",31),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}function P(t,e){if(1&t&&(p.Ub(0,"option",31),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}var k,x=((k=function(){function t(e,i,o,r,c,a,l){var s=this;n(this,t),this.dialogRef=e,this.data=i,this.fb=o,this.vehicleService=r,this.invoicesState=c,this.notificationService=a,this.rateService=l,this.subscriptions=[],this.years=[],this.makes=[],this.models=[],this.buildForm();var b=this.invoicesState.selectedInvoice$.subscribe((function(t){var e;s.selectedInvoice=t;var n=s.rateService.rates.subscribe((function(t){var e,n,i,o,r,c,a,l=null===(i=(null===(e=s.selectedInvoice)||void 0===e?void 0:e.ship_from)||(null===(n=s.selectedInvoice)||void 0===n?void 0:n.quick_ship_from))||void 0===i?void 0:i.city,b=null===(c=(null===(o=s.selectedInvoice)||void 0===o?void 0:o.ship_to)||(null===(r=s.selectedInvoice)||void 0===r?void 0:r.quick_ship_to))||void 0===c?void 0:c.city;s.rate=t.find((function(t){return"".concat(t.origination_city.name,"_").concat(t.origination_city.state_code,"_").concat(t.destination_city.name,"_").concat(t.destination_city.state_code)=="".concat(null==l?void 0:l.name,"_").concat(null==l?void 0:l.state_code,"_").concat(null==b?void 0:b.name,"_").concat(null==b?void 0:b.state_code)})),(null===(a=s.rate)||void 0===a?void 0:a.amount)&&s.vehicleForm.controls.amount.setValue(s.rate.amount)}));s.subscriptions.push(n),(null===(e=s.rateService.rates.value)||void 0===e?void 0:e.length)||s.rateService.fetchRates()}));this.subscriptions.push(b)}return o(t,[{key:"ngOnInit",value:function(){this.years=this.vehicleService.years}},{key:"onSelectYear",value:function(t){this.makes=this.vehicleService.makes}},{key:"onSelectMake",value:function(t){return Object(u.a)(this,void 0,void 0,e().mark((function n(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vehicleService.getModelsByMake(t.target.value);case 2:this.models=e.sent,this.vehicleForm.controls.model.setValue("");case 4:case"end":return e.stop()}}),n,this)})))}},{key:"buildForm",value:function(){this.vehicleForm=this.fb.group({vin:["",[d.v.required,d.v.pattern(v.a.vin)]],year:["",[d.v.required]],make:["",[d.v.required]],model:["",[d.v.required]],amount:["",[d.v.required]],weight:["",[]],comments:["",[]]})}},{key:"onSearchVin",value:function(t){var e=this;this.vehicleForm.controls.vin.valid&&this.vehicleService.searchVin(t.target.value.toUpperCase()).then((function(t){e.vehicleSearched=t,e.makes.push(t.make),e.models.push(t.model),e.vehicleForm.controls.year.setValue(t.year),e.vehicleForm.controls.make.setValue(t.make),e.vehicleForm.controls.model.setValue(t.model),e.vehicleForm.controls.weight.setValue(t.weight)})).catch((function(t){e.vehicleSearched=null,e.vehicleForm.controls.vin.setErrors({faliedSearch:!0}),e.vehicleForm.controls.vin.markAsTouched()}))}},{key:"onSubmit",value:function(){var t,e=this.vehicleForm.controls.vin;if(e.setValue(null===(t=e.value)||void 0===t?void 0:t.toUpperCase()),this.vehicleForm.invalid)return Object.values(this.vehicleForm.controls).forEach((function(t){t instanceof d.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));try{"edit"===this.data.action?this.invoicesState.addSelectedInvoiceVehicle(this.vehicleForm.value):this.invoicesState.addNewInvoiceVehicle(this.vehicleForm.value)}catch(n){return this.notificationService.error(n.message)}this.data.onBackToInvoice()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||k)(p.Ob(g.e),p.Ob(g.a),p.Ob(d.e),p.Ob(h.a),p.Ob(m.a),p.Ob(f.a),p.Ob(_.a))},k.\u0275cmp=p.Ib({type:k,selectors:[["app-add-vehicle-dialog"]],decls:63,vars:21,consts:[[1,"form-group",3,"formGroup","ngSubmit"],[1,"w-100","input-group","pt-2","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search VIN...","formControlName","vin",1,"form-control",3,"input"],["class","form-text invalid-feedback",4,"ngIf"],[1,"w-100","mb-3"],["for","year",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["formControlName","year",1,"custom-select","form-control",3,"change"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","make",1,"text-dark","text-base"],["formControlName","make",1,"custom-select","form-control",3,"change"],["for","model",1,"text-dark","text-base"],["formControlName","model",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],["type","number","placeholder","Amount...","formControlName","amount",1,"form-control"],["for","weight",1,"text-dark","text-base"],["type","number","placeholder","Weight...","formControlName","weight",1,"form-control"],[1,"w-100"],["for","comments",1,"text-dark","text-base"],["id","textarea","maxlength","256","rows","3","formControlName","comments",1,"form-control"],[1,"d-flex","w-100","px-4","pt-3","justify-content-between","mt-3"],[1,"col-5"],["type","button",1,"btn","w-100","btn-outline-secondary",3,"click"],[1,"btn","w-100","btn-success"],[1,"form-text","invalid-feedback"],[3,"value"]],template:function(t,e){1&t&&(p.Ub(0,"h3"),p.Lc(1,"Add vehicle"),p.Tb(),p.Ub(2,"form",0),p.fc("ngSubmit",(function(){return e.onSubmit()})),p.Ub(3,"div",1),p.Ub(4,"div",2),p.Ub(5,"span",3),p.Pb(6,"i",4),p.Tb(),p.Tb(),p.Ub(7,"input",5),p.fc("input",(function(t){return e.onSearchVin(t)})),p.Tb(),p.Jc(8,C,2,1,"div",6),p.Tb(),p.Ub(9,"div",7),p.Ub(10,"label",8),p.Lc(11,"Year"),p.Tb(),p.Ub(12,"div",9),p.Ub(13,"select",10),p.fc("change",(function(t){return e.onSelectYear(t)})),p.Ub(14,"option",11),p.Lc(15,"Select year..."),p.Tb(),p.Jc(16,w,2,2,"option",12),p.Tb(),p.Pb(17,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(18,"div",7),p.Ub(19,"label",14),p.Lc(20,"Make"),p.Tb(),p.Ub(21,"div",9),p.Ub(22,"select",15),p.fc("change",(function(t){return e.onSelectMake(t)})),p.Ub(23,"option",11),p.Lc(24,"Select make..."),p.Tb(),p.Jc(25,M,2,2,"option",12),p.Tb(),p.Pb(26,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(27,"div",7),p.Ub(28,"label",16),p.Lc(29,"Model"),p.Tb(),p.Ub(30,"div",9),p.Ub(31,"select",17),p.Ub(32,"option",11),p.Lc(33,"Select model..."),p.Tb(),p.Jc(34,P,2,2,"option",12),p.Tb(),p.Pb(35,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(36,"div",7),p.Ub(37,"label",18),p.Lc(38,"Amount"),p.Tb(),p.Ub(39,"div",19),p.Ub(40,"div",2),p.Ub(41,"span",3),p.Lc(42," $ "),p.Tb(),p.Tb(),p.Pb(43,"input",20),p.Tb(),p.Tb(),p.Ub(44,"div",7),p.Ub(45,"label",21),p.Lc(46,"Weight"),p.Tb(),p.Ub(47,"div",19),p.Ub(48,"div",2),p.Ub(49,"span",3),p.Lc(50," Lb "),p.Tb(),p.Tb(),p.Pb(51,"input",22),p.Tb(),p.Tb(),p.Ub(52,"div",23),p.Ub(53,"label",24),p.Lc(54,"Comments"),p.Tb(),p.Pb(55,"textarea",25),p.Tb(),p.Ub(56,"div",26),p.Ub(57,"div",27),p.Ub(58,"button",28),p.fc("click",(function(){return e.data.onBackToInvoice()})),p.Lc(59,"Cancel"),p.Tb(),p.Tb(),p.Ub(60,"div",27),p.Ub(61,"button",29),p.Lc(62,"Add"),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Bb(2),p.pc("formGroup",e.vehicleForm),p.Bb(5),p.Gb("is-invalid",e.vehicleForm.controls.vin.touched&&e.vehicleForm.controls.vin.invalid)("is-valid",!!e.vehicleSearched),p.Bb(1),p.pc("ngIf",!0),p.Bb(5),p.Gb("is-invalid",e.vehicleForm.controls.year.touched&&e.vehicleForm.controls.year.invalid),p.Bb(3),p.pc("ngForOf",e.years),p.Bb(6),p.Gb("is-invalid",e.vehicleForm.controls.make.touched&&e.vehicleForm.controls.make.invalid),p.Bb(3),p.pc("ngForOf",e.makes),p.Bb(6),p.Gb("is-invalid",e.vehicleForm.controls.model.touched&&e.vehicleForm.controls.model.invalid),p.Bb(3),p.pc("ngForOf",e.models),p.Bb(9),p.Gb("is-invalid",e.vehicleForm.controls.amount.touched&&e.vehicleForm.controls.amount.invalid),p.Bb(8),p.Gb("is-invalid",e.vehicleForm.controls.weight.touched&&e.vehicleForm.controls.weight.invalid),p.Bb(4),p.Gb("is-invalid",e.vehicleForm.controls.comments.touched&&e.vehicleForm.controls.comments.invalid))},directives:[d.x,d.p,d.i,d.d,d.o,d.g,a.n,d.u,d.r,d.w,a.m,O.a,d.s,d.k],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),k),y=c("Sdjb");function T(t,e){1&t&&(p.Ub(0,"div",13),p.Ub(1,"p",14),p.Lc(2,"No customers found"),p.Tb(),p.Tb())}function U(t,e){if(1&t){var n=p.Vb();p.Ub(0,"tr",15),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().onSelect(t)})),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Bb(2),p.Mc(i.name)}}function S(t,e){1&t&&(p.Ub(0,"div",13),p.Ub(1,"p",14),p.Lc(2,"No customers found"),p.Tb(),p.Tb())}function I(t,e){if(1&t){var n=p.Vb();p.Ub(0,"tr",15),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().onSelect(t)})),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Bb(2),p.Mc(i.name)}}var L,B,F,D=((L=function(){function t(e,i,o,r){n(this,t),this.dialogRef=e,this.data=i,this.customerService=o,this.invoicesState=r,this.subscriptions=[],this.foundCustomers=[],this.mostRecentsCustomers=[]}return o(t,[{key:"backToInvoice",value:function(){this.data.onBackToInvoice()}},{key:"ngOnInit",value:function(){var t=this,e=this.invoicesState.mostRecentsCustomers$.subscribe((function(e){t.mostRecentsCustomers=e}));this.subscriptions.push(e)}},{key:"searchCustomers",value:function(t){return Object(u.a)(this,void 0,void 0,e().mark((function n(){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.target.value,e.next=3,this.customerService.searchCustomers(i);case 3:this.foundCustomers=e.sent;case 4:case"end":return e.stop()}}),n,this)})))}},{key:"onSelect",value:function(t){"edit"===this.data.action?this.invoicesState.setSelectedInvoice({bill_to:t}):this.invoicesState.setNewInvoice({bill_to:t}),this.data.onBackToInvoice()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||L)(p.Ob(g.e),p.Ob(g.a),p.Ob(y.a),p.Ob(m.a))},L.\u0275cmp=p.Ib({type:L,selectors:[["app-bill-to-dialog"]],decls:30,vars:4,consts:[[1,"input-group","pt-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search customer...",1,"form-control",3,"input"],[1,"w-100","text-secondary","text-sm"],[1,"w-100","my-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","table-bordered"],["scope","col"],["class","w-100 text-center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"w-100","mt-3"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"w-100","text-center"],[1,"border","py-2"],[3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"h3"),p.Lc(1,"Bill to"),p.Tb(),p.Ub(2,"div",0),p.Ub(3,"div",1),p.Ub(4,"span",2),p.Pb(5,"i",3),p.Tb(),p.Tb(),p.Ub(6,"input",4),p.fc("input",(function(t){return e.searchCustomers(t)})),p.Tb(),p.Ub(7,"div",5),p.Lc(8,"Min 3 characters"),p.Tb(),p.Tb(),p.Ub(9,"div",6),p.Ub(10,"table",7),p.Ub(11,"thead"),p.Ub(12,"tr"),p.Ub(13,"th",8),p.Lc(14,"Customer list"),p.Tb(),p.Tb(),p.Tb(),p.Ub(15,"tbody"),p.Jc(16,T,3,0,"div",9),p.Jc(17,U,3,1,"tr",10),p.Tb(),p.Tb(),p.Tb(),p.Ub(18,"div",6),p.Ub(19,"table",7),p.Ub(20,"thead"),p.Ub(21,"tr"),p.Ub(22,"th",8),p.Lc(23,"Most recent"),p.Tb(),p.Tb(),p.Tb(),p.Ub(24,"tbody"),p.Jc(25,S,3,0,"div",9),p.Jc(26,I,3,1,"tr",10),p.Tb(),p.Tb(),p.Tb(),p.Ub(27,"div",11),p.Ub(28,"button",12),p.fc("click",(function(){return e.backToInvoice()})),p.Lc(29,"Back to invoice"),p.Tb(),p.Tb()),2&t&&(p.Bb(16),p.pc("ngIf",!(null!=e.foundCustomers&&e.foundCustomers.length)),p.Bb(1),p.pc("ngForOf",e.foundCustomers),p.Bb(8),p.pc("ngIf",!(null!=e.mostRecentsCustomers&&e.mostRecentsCustomers.length)),p.Bb(1),p.pc("ngForOf",e.mostRecentsCustomers))},directives:[a.n,a.m],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative;text-align:center}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}"]}),L),E=c("RaVz"),z=c("lJxs"),R=c("AytR"),j=c("tk/3"),V=((B=function(){function t(e,i){var o=this;n(this,t),this.http=e,this.invoicesState=i,this.baseUrl=R.a.apiUrl,this.currentLimit=0,this.currentPage=0,this.currentStatus="DRAFT",this.invoicesState.currentOptionsFetched$.subscribe((function(t){o.currentLimit=t.limit,o.currentPage=t.page,o.currentStatus=t.status}))}return o(t,[{key:"fetchInvoices",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.invoicesState.setCurrentOptionsFetched({limit:n,page:i,status:t}),new Promise((function(o,r){var c="".concat(e.baseUrl,"/invoices/admin?limit=").concat(n,"&page=").concat(i);c+=t?"&status=".concat(t):"&status=DRAFT&status=SUBMITTED_FOR_REVIEW&status=SUBMITTED_TO_CUSTOMER",e.http.get(c).subscribe((function(t){e.invoicesState.setInvoices(t.results),o(t)}),(function(t){r(t)}))}))}},{key:"saveInvoice",value:function(t){var e=this;return this.http.post("".concat(this.baseUrl,"/invoices/admin"),t).pipe(Object(z.a)((function(t){return e.fetchInvoices(e.currentStatus,e.currentLimit,e.currentPage),t})))}},{key:"updateInvoice",value:function(t,e){var n=this;return this.http.put("".concat(this.baseUrl,"/invoices/admin/").concat(e),t).pipe(Object(z.a)((function(t){return n.fetchInvoices(n.currentStatus,n.currentLimit,n.currentPage),t})))}},{key:"deleteInvoice",value:function(t){var e=this;return this.http.delete("".concat(this.baseUrl,"/invoices/admin/").concat(t)).pipe(Object(z.a)((function(t){return e.fetchInvoices(e.currentStatus,e.currentLimit,e.currentPage),t})))}},{key:"submitDraftInvoices",value:function(t){var e=this;return this.http.post("".concat(this.baseUrl,"/invoices/admin/submitToReview"),{invoices:t}).pipe(Object(z.a)((function(t){return e.fetchInvoices(e.currentStatus,e.currentLimit,e.currentPage),t})))}},{key:"submitInvoicesToQB",value:function(t){var e=this;return this.http.post("".concat(this.baseUrl,"/invoices/admin/submitToQB"),{invoices:t}).pipe(Object(z.a)((function(t){return e.fetchInvoices(e.currentStatus,e.currentLimit,e.currentPage),t})))}},{key:"submitInvoicesToPaid",value:function(t){var e=this;return this.http.post("".concat(this.baseUrl,"/invoices/admin/submitToPaid"),{invoices:t}).pipe(Object(z.a)((function(t){return e.fetchInvoices(e.currentStatus,e.currentLimit,e.currentPage),t})))}},{key:"exportToPdf",value:function(t){var e=this;return new Promise((function(n,i){e.http.post("".concat(e.baseUrl,"/invoices/exportToPdf"),{invoices:t.map((function(t){return t.id}))},{responseType:"arraybuffer"}).subscribe((function(t){var e=new Blob([t],{type:"application/zip"}),i=window.URL.createObjectURL(e),o=document.createElement("a");o.href=i,o.setAttribute("download","invoices.zip"),document.body.appendChild(o),o.click(),n(!0)}),(function(t){return i(!1)}))}))}}]),t}()).\u0275fac=function(t){return new(t||B)(p.cc(j.b),p.cc(m.a))},B.\u0275prov=p.Kb({token:B,factory:B.\u0275fac,providedIn:"root"}),B),q=c("Xa2L"),N=((F=function(){function t(){n(this,t)}return o(t,[{key:"transform",value:function(t){return"".concat(null==t?void 0:t.name,", ").concat(null==t?void 0:t.state_code)}}]),t}()).\u0275fac=function(t){return new(t||F)},F.\u0275pipe=p.Nb({name:"location",type:F,pure:!0}),F);function A(t,e){1&t&&(p.Ub(0,"div",33),p.Pb(1,"mat-spinner",34),p.Tb()),2&t&&(p.Bb(1),p.pc("diameter",50))}function J(t,e){1&t&&(p.Ub(0,"option",35),p.Lc(1,"Select driver..."),p.Tb())}function $(t,e){if(1&t&&(p.Ub(0,"option",36),p.Ub(1,"span"),p.Lc(2),p.kc(3,"titlecase"),p.kc(4,"titlecase"),p.Tb(),p.Lc(5),p.Tb()),2&t){var n=e.$implicit,i=p.jc();p.pc("value",n.id)("selected",n.id===(null==i.invoice?null:i.invoice.driver)),p.Bb(2),p.Oc("",p.lc(3,5,n.first_name)," ",p.lc(4,7,n.last_name),""),p.Bb(3),p.Nc(" - ",n.email," ")}}function G(t,e){if(1&t&&(p.Ub(0,"option",36),p.Lc(1),p.Tb()),2&t){var n=e.$implicit,i=p.jc();p.pc("value",n.value)("selected",(null==i.invoice?null:i.invoice.status)&&n.value===(null==i.invoice?null:i.invoice.status)),p.Bb(1),p.Nc(" ",n.label," ")}}function W(t,e){if(1&t){var n=p.Vb();p.Ub(0,"tr"),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Ub(3,"td"),p.Lc(4),p.Tb(),p.Ub(5,"td"),p.Lc(6),p.kc(7,"currency"),p.Tb(),p.Ub(8,"td",37),p.Ub(9,"button",38),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().data.onEditVehicle(t)})),p.Pb(10,"i",39),p.Tb(),p.Ub(11,"button",38),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().data.onDeleteVehicle(t)})),p.Pb(12,"i",40),p.Tb(),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Bb(2),p.Pc("",i.year," ",i.make," ",i.model,""),p.Bb(2),p.Mc(i.vin),p.Bb(2),p.Mc(p.lc(7,5,i.amount))}}function Q(t,e){1&t&&(p.Ub(0,"div",41),p.Ub(1,"p",42),p.Lc(2,"No vehicles added"),p.Tb(),p.Tb())}var Y,H=[{value:"DRAFT",label:"Draft"},{value:"SUBMITTED_FOR_REVIEW",label:"Submitted for review"}],X=((Y=function(){function t(e,i,o,r,c,a,l,s){var b=this;n(this,t),this.dialogRef=e,this.data=i,this.userService=o,this.invoicesState=r,this.rateService=c,this.notificationService=a,this.invoiceService=l,this.customerService=s,this.subscriptions=[],this.statuses=H,this.isLoading=!1;var u=this.userService.users.subscribe((function(t){b.drivers=t})),d=this.invoicesState.newInvoice$.subscribe((function(t){b.invoice=t}));this.subscriptions.push(u,d)}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.userService.fetchUsers();var e=this.customerService.getMostRecents().subscribe((function(e){t.invoicesState.setMostRecentsCustomers(e)}));this.subscriptions.push(e)}},{key:"onSelectDriver",value:function(t){this.invoicesState.setNewInvoice({driver:this.drivers.find((function(e){return e.id===t.target.value}))})}},{key:"onSelectStatus",value:function(t){this.invoicesState.setNewInvoice({status:t.target.value})}},{key:"onStepChange",value:function(t){var e,n,i,o,r,c,a,l,s=this;if(this.data.setCurrentStep(t.selectedIndex),1===t.selectedIndex){var b=null!==(n=null===(e=this.invoice)||void 0===e?void 0:e.ship_from)&&void 0!==n?n:{},u=null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_to)&&void 0!==o?o:{},d="".concat(null===(r=b.city)||void 0===r?void 0:r.name,"_").concat(null===(c=b.city)||void 0===c?void 0:c.state_code,"_").concat(null===(a=u.city)||void 0===a?void 0:a.name,"_").concat(null===(l=u.city)||void 0===l?void 0:l.state_code);this.rateService.getRateByCode(d).subscribe((function(t){s.invoicesState.setCurretRate(t)}))}}},{key:"getSubTotal",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=t.amount})),n}},{key:"getTotal",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=t.amount})),n}},{key:"getWeight",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=Number(t.weight)})),n}},{key:"getDriverCommissionAmount",value:function(){var t,e,n;return this.getSubTotal()*((null!==(n=null===(e=null===(t=this.invoice)||void 0===t?void 0:t.driver)||void 0===e?void 0:e.commission)&&void 0!==n?n:0)/100)}},{key:"onSubmit",value:function(){var t,e,n,i,o,r,c,a,l,s,b,d,g,v,p=this;if((null===(t=this.invoice)||void 0===t?void 0:t.driver)&&(null===(e=this.invoice)||void 0===e?void 0:e.status)&&(null===(n=this.invoice)||void 0===n?void 0:n.bill_to)&&(null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_from)&&void 0!==o?o:null===(r=this.invoice)||void 0===r?void 0:r.quick_ship_from)&&(null!==(a=null===(c=this.invoice)||void 0===c?void 0:c.ship_to)&&void 0!==a?a:null===(l=this.invoice)||void 0===l?void 0:l.quick_ship_to))if(null===(b=null===(s=this.invoice)||void 0===s?void 0:s.vehicles)||void 0===b?void 0:b.length){var h={bill_to:this.invoice.bill_to.id,ship_from:null===(d=this.invoice.ship_from)||void 0===d?void 0:d.id,ship_to:null===(g=this.invoice.ship_to)||void 0===g?void 0:g.id,quick_ship_from:this.invoice.quick_ship_from,quick_ship_to:this.invoice.quick_ship_to,driver_id:this.invoice.driver.id,status:this.invoice.status,vehicles:null===(v=this.invoice.vehicles)||void 0===v?void 0:v.map((function(t){return Object(u.b)(t,["_id"])}))};this.isLoading=!0,this.invoiceService.saveInvoice(h).subscribe((function(t){p.isLoading=!1,p.notificationService.success("Invoice saved"),p.dialogRef.close(),p.invoicesState.resetNewInvoice()}),(function(t){p.notificationService.error(),p.isLoading=!1}))}else this.notificationService.error("Missed vehicles required");else this.notificationService.error("Missed fields required")}},{key:"onCancel",value:function(){this.invoicesState.resetNewInvoice(),this.data.setCurrentStep(0),this.dialogRef.close()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||Y)(p.Ob(g.e),p.Ob(g.a),p.Ob(E.a),p.Ob(m.a),p.Ob(_.a),p.Ob(f.a),p.Ob(V),p.Ob(y.a))},Y.\u0275cmp=p.Ib({type:Y,selectors:[["app-new-invoice-dialog"]],decls:100,vars:24,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],[1,"form-group","w-100","mt-3","new-invoice-form","mb-2"],[1,"col-12","d-flex","justify-content-between","mb-3","text-xl"],[1,"col-12","mb-3"],["for","driver",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","disabled","","value","",4,"ngIf"],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","status",1,"text-dark","text-base"],[1,"mt-2","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center","mb-3"],["type","button",1,"flex-shrink-0","btn","btn-primary","mr-3","cust-btn",3,"click"],[1,"bg-grey-light","flex-grow-1","h-100","p-2","rounded-lg","w-100"],[1,"w-100","mb-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","mb-0","pb-5"],["scope","col"],[4,"ngFor","ngForOf"],["class","w-100 text-center",4,"ngIf"],[1,"flex-grow-1","bg-light","add-vehicle-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"w-100","bg-grey-light","p-4","rounded-lg"],[1,"row"],[1,"col-8","text-right"],[1,"col-4","text-right"],[1,"col-12","border","border-secondary","my-2",2,"opacity","0.25"],[1,"row","font-bold"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","mt-2"],[1,"col-5"],[1,"btn","w-100","btn-secondary",3,"click"],[1,"btn","w-100","btn-success",3,"click"],[1,"dialog-loader"],[3,"diameter"],["selected","","disabled","","value",""],[3,"value","selected"],[1,"action-buttons"],[3,"click"],[1,"fas","fa-edit","text-xl","mr-3"],[1,"fas","fa-trash-alt","text-xl"],[1,"w-100","text-center"],[1,"border","py-2"]],template:function(t,e){if(1&t&&(p.Ub(0,"div",0),p.Jc(1,A,2,1,"div",1),p.Ub(2,"h3"),p.Lc(3,"New Invoice"),p.Tb(),p.Ub(4,"form",2),p.Ub(5,"div",3),p.Ub(6,"span"),p.Lc(7," Invoice #: ----"),p.Tb(),p.Ub(8,"span"),p.Lc(9,"Date: ----"),p.Tb(),p.Tb(),p.Ub(10,"div",4),p.Ub(11,"label",5),p.Lc(12,"Driver"),p.Tb(),p.Ub(13,"div",6),p.Ub(14,"select",7),p.fc("change",(function(t){return e.onSelectDriver(t)})),p.Jc(15,J,2,0,"option",8),p.Jc(16,$,6,9,"option",9),p.Tb(),p.Pb(17,"mat-icon",10),p.Tb(),p.Tb(),p.Ub(18,"div",4),p.Ub(19,"label",11),p.Lc(20,"Status"),p.Tb(),p.Ub(21,"div",6),p.Ub(22,"select",7),p.fc("change",(function(t){return e.onSelectStatus(t)})),p.Jc(23,G,2,3,"option",9),p.Tb(),p.Pb(24,"mat-icon",10),p.Tb(),p.Tb(),p.Ub(25,"div",12),p.Ub(26,"div",13),p.Ub(27,"button",14),p.fc("click",(function(){return e.data.onBillTo()})),p.Lc(28,"Bill To"),p.Tb(),p.Ub(29,"span",15),p.Lc(30),p.kc(31,"location"),p.Tb(),p.Tb(),p.Ub(32,"div",13),p.Ub(33,"button",14),p.fc("click",(function(){return e.data.onShipFrom()})),p.Lc(34,"Ship From"),p.Tb(),p.Ub(35,"span",15),p.Lc(36),p.kc(37,"location"),p.Tb(),p.Tb(),p.Ub(38,"div",13),p.Ub(39,"button",14),p.fc("click",(function(){return e.data.onShipTo()})),p.Lc(40,"Ship To"),p.Tb(),p.Ub(41,"span",15),p.Lc(42),p.kc(43,"location"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(44,"div",16),p.Ub(45,"table",17),p.Ub(46,"thead"),p.Ub(47,"tr"),p.Ub(48,"th",18),p.Lc(49,"Vehicle"),p.Tb(),p.Ub(50,"th",18),p.Lc(51,"Vin"),p.Tb(),p.Ub(52,"th",18),p.Lc(53,"Amount"),p.Tb(),p.Pb(54,"th",18),p.Tb(),p.Tb(),p.Ub(55,"tbody"),p.Jc(56,W,13,7,"tr",19),p.Tb(),p.Tb(),p.Jc(57,Q,3,0,"div",20),p.Ub(58,"div",21),p.Ub(59,"button",22),p.fc("click",(function(){return e.data.onAddVehicle()})),p.Lc(60,"+ Add vehicle"),p.Tb(),p.Tb(),p.Tb(),p.Ub(61,"div",23),p.Ub(62,"div",24),p.Ub(63,"span",25),p.Lc(64,"Sub total:"),p.Tb(),p.Ub(65,"span",26),p.Lc(66),p.Tb(),p.Tb(),p.Ub(67,"div",24),p.Ub(68,"span",25),p.Lc(69,"Driver commission:"),p.Tb(),p.Ub(70,"span",26),p.Lc(71),p.Tb(),p.Tb(),p.Ub(72,"div",24),p.Ub(73,"span",25),p.Lc(74,"Driver commission amount:"),p.Tb(),p.Ub(75,"span",26),p.Lc(76),p.Tb(),p.Tb(),p.Ub(77,"div",24),p.Ub(78,"span",25),p.Lc(79,"Total units:"),p.Tb(),p.Ub(80,"span",26),p.Lc(81),p.Tb(),p.Tb(),p.Ub(82,"div",24),p.Ub(83,"span",25),p.Lc(84,"Weight:"),p.Tb(),p.Ub(85,"span",26),p.Lc(86),p.Tb(),p.Tb(),p.Pb(87,"div",27),p.Ub(88,"div",28),p.Ub(89,"span",25),p.Lc(90,"Total:"),p.Tb(),p.Ub(91,"span",26),p.Lc(92),p.Tb(),p.Tb(),p.Tb(),p.Ub(93,"div",29),p.Ub(94,"div",30),p.Ub(95,"button",31),p.fc("click",(function(){return e.onCancel()})),p.Lc(96,"Cancel"),p.Tb(),p.Tb(),p.Ub(97,"div",30),p.Ub(98,"button",32),p.fc("click",(function(){return e.onSubmit()})),p.Lc(99,"Save"),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t){var n=null,i=null,o=null,r=null;p.Bb(1),p.pc("ngIf",e.isLoading),p.Bb(14),p.pc("ngIf",!(null!=e.invoice&&e.invoice.driver)),p.Bb(1),p.pc("ngForOf",e.drivers),p.Bb(7),p.pc("ngForOf",e.statuses),p.Bb(7),p.Oc(" ",null!=e.invoice&&e.invoice.bill_to?null==e.invoice?null:e.invoice.bill_to.name:"----"," ",(null==e.invoice?null:e.invoice.bill_to)&&" - "+p.lc(31,18,null==e.invoice?null:e.invoice.bill_to.city)," "),p.Bb(6),p.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))&&" - "+p.lc(37,20,null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).city)," "),p.Bb(6),p.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))&&" - "+p.lc(43,22,null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).city)," "),p.Bb(14),p.pc("ngForOf",null==e.invoice?null:e.invoice.vehicles),p.Bb(1),p.pc("ngIf",!(null!=e.invoice&&null!=e.invoice.vehicles&&e.invoice.vehicles.length)),p.Bb(9),p.Nc("$",null==(n=e.getSubTotal())?null:n.toFixed(2),""),p.Bb(5),p.Nc("%",(null==e.invoice||null==e.invoice.driver?null:e.invoice.driver.commission)||0,""),p.Bb(5),p.Nc("$",null==(i=e.getDriverCommissionAmount())?null:i.toFixed(2),""),p.Bb(5),p.Mc((null==e.invoice||null==e.invoice.vehicles?null:e.invoice.vehicles.length)||0),p.Bb(5),p.Mc(null==(o=e.getWeight())?null:o.toFixed(2)),p.Bb(6),p.Nc("$",null==(r=e.getTotal())?null:r.toFixed(2),"")}},directives:[a.n,d.x,d.p,d.q,a.m,O.a,q.b,d.r,d.w],pipes:[N,a.w,a.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .add-vehicle-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.new-invoice-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.cust-btn[_ngcontent-%COMP%]{width:100%}@media (min-width:672px){.cust-btn[_ngcontent-%COMP%]{width:110px}}"]}),Y),K=c("U12X");function Z(t,e){1&t&&(p.Ub(0,"div",15),p.Ub(1,"p",16),p.Lc(2,"No customers found"),p.Tb(),p.Tb())}function tt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"tr",17),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().onSelect(t)})),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Bb(2),p.Mc(i.name)}}function et(t,e){1&t&&(p.Ub(0,"div",33),p.Lc(1,"Invalid field"),p.Tb())}function nt(t,e){if(1&t&&(p.Ub(0,"option",34),p.Lc(1),p.Tb()),2&t){var n=e.$implicit,i=p.jc(2);p.pc("value",n.code)("selected",n.code===(null==i.currentCity?null:i.currentCity.state_code)),p.Bb(1),p.Nc(" ",n.name," ")}}function it(t,e){if(1&t&&(p.Ub(0,"option",34),p.Lc(1),p.Tb()),2&t){var n=e.$implicit,i=p.jc(2);p.pc("value",n.id)("selected",n.name===(null==i.currentCity?null:i.currentCity.name)),p.Bb(1),p.Nc(" ",n.name," ")}}function ot(t,e){if(1&t){var n=p.Vb();p.Ub(0,"form",18),p.fc("ngSubmit",(function(){return p.Bc(n),p.jc().saveQuickEntry()})),p.Ub(1,"div",19),p.Ub(2,"label",20),p.Lc(3,"Name"),p.Tb(),p.Pb(4,"input",21),p.Jc(5,et,2,0,"div",22),p.Tb(),p.Ub(6,"div",19),p.Ub(7,"label",23),p.Lc(8,"State"),p.Tb(),p.Ub(9,"div",24),p.Ub(10,"select",25),p.fc("change",(function(t){return p.Bc(n),p.jc().onStateChange(t)})),p.Ub(11,"option",26),p.Lc(12,"Select state..."),p.Tb(),p.Jc(13,nt,2,3,"option",27),p.Tb(),p.Pb(14,"mat-icon",28),p.Tb(),p.Tb(),p.Ub(15,"div",19),p.Ub(16,"label",29),p.Lc(17,"City"),p.Tb(),p.Ub(18,"div",24),p.Ub(19,"select",30),p.Jc(20,it,2,3,"option",27),p.Tb(),p.Pb(21,"mat-icon",28),p.Tb(),p.Tb(),p.Ub(22,"div",31),p.Ub(23,"button",32),p.Lc(24,"Save"),p.Tb(),p.Tb(),p.Tb()}if(2&t){var i=p.jc();p.pc("formGroup",i.customerForm),p.Bb(4),p.Gb("is-invalid",i.customerForm.controls.name.touched&&i.customerForm.controls.name.invalid),p.Bb(1),p.pc("ngIf",!0),p.Bb(8),p.pc("ngForOf",i.states),p.Bb(6),p.Gb("is-invalid",i.customerForm.controls.city_id.touched&&i.customerForm.controls.city_id.invalid),p.Bb(1),p.pc("ngForOf",i.cities[i.selectedState])}}function rt(t,e){1&t&&(p.Ub(0,"div",15),p.Ub(1,"p",16),p.Lc(2,"No customers found"),p.Tb(),p.Tb())}function ct(t,e){if(1&t){var n=p.Vb();p.Ub(0,"tr",17),p.fc("click",(function(){p.Bc(n);var t=e.$implicit;return p.jc().onSelect(t)})),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Bb(2),p.Mc(i.name)}}var at,lt=((at=function(){function i(t,e,o,r,c,a){n(this,i),this.dialogRef=t,this.data=e,this.fb=o,this.invoicesState=r,this.customerService=c,this.geoService=a,this.subscriptions=[],this.foundCustomers=[],this.showQuickEntry=!1,this.states=[],this.cities={},this.mostRecentsCustomers=[]}return o(i,[{key:"ngOnInit",value:function(){var t=this;this.buildForm(),this.states=this.geoService.states;var e=this.geoService.currentCities.subscribe((function(e){var n,i;t.cities=e,t.currentCity&&(t.customerForm.controls.city_id.reset(),t.customerForm.controls.city_id.setValue(null===(i=null===(n=t.cities[t.selectedState])||void 0===n?void 0:n.find((function(e){return e.name===t.currentCity.name})))||void 0===i?void 0:i.id))}));if(this.subscriptions.push(e),"new"===this.data.action){var n=this.invoicesState.newInvoice$.subscribe((function(e){return t.handleEditQuickEntry(e)}));this.subscriptions.push(n)}if("edit"===this.data.action){var i=this.invoicesState.selectedInvoice$.subscribe((function(e){return t.handleEditQuickEntry(e)}));this.subscriptions.push(i)}var o=this.invoicesState.mostRecentsCustomers$.subscribe((function(e){t.mostRecentsCustomers=e}));this.subscriptions.push(o)}},{key:"handleEditQuickEntry",value:function(t){var e,n,i,o,r,c,a,l,s,b,u,d,g,v,p,h,m=this;t&&(this.selectedInvoice=t,("FROM"===this.data.type&&(null===(e=this.selectedInvoice)||void 0===e?void 0:e.quick_ship_from)||"TO"===this.data.type&&(null===(n=this.selectedInvoice)||void 0===n?void 0:n.quick_ship_to))&&("FROM"===this.data.type?(this.currentCity=null===(o=null===(i=this.selectedInvoice)||void 0===i?void 0:i.quick_ship_from)||void 0===o?void 0:o.city,this.selectedState=null===(c=null===(r=this.selectedInvoice)||void 0===r?void 0:r.quick_ship_from)||void 0===c?void 0:c.city.state_code,this.customerForm.controls.name.setValue(null===(l=null===(a=this.selectedInvoice)||void 0===a?void 0:a.quick_ship_from)||void 0===l?void 0:l.name)):(this.currentCity=null===(b=null===(s=this.selectedInvoice)||void 0===s?void 0:s.quick_ship_to)||void 0===b?void 0:b.city,this.selectedState=null===(d=null===(u=this.selectedInvoice)||void 0===u?void 0:u.quick_ship_to)||void 0===d?void 0:d.city.state_code,this.customerForm.controls.name.setValue(null===(v=null===(g=this.selectedInvoice)||void 0===g?void 0:g.quick_ship_to)||void 0===v?void 0:v.name)),this.geoService.fetchCitiesByState(this.selectedState),this.customerForm.controls.city_id.reset(),this.customerForm.controls.city_id.setValue(null===(h=null===(p=this.cities[this.selectedState])||void 0===p?void 0:p.find((function(t){return t.name===m.currentCity.name})))||void 0===h?void 0:h.id),this.showQuickEntry=!0))}},{key:"buildForm",value:function(){this.customerForm=this.fb.group({name:["",[d.v.required]],city_id:["",[d.v.required]]})}},{key:"backToInvoice",value:function(){this.data.onBackToInvoice()}},{key:"searchCustomers",value:function(t){return Object(u.a)(this,void 0,void 0,e().mark((function n(){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.target.value,e.next=3,this.customerService.searchCustomers(i);case 3:this.foundCustomers=e.sent;case 4:case"end":return e.stop()}}),n,this)})))}},{key:"onSelect",value:function(e){var n,i,o=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c="FROM"===this.data.type;("new"===this.data.action?function(t){return o.invoicesState.setNewInvoice(t)}:function(t){return o.invoicesState.setSelectedInvoice(t)})(r?(t(n={},c?"quick_ship_from":"quick_ship_to",e),t(n,c?"ship_from":"ship_to",null),n):(t(i={},c?"ship_from":"ship_to",e),t(i,c?"quick_ship_from":"quick_ship_to",null),i)),this.data.onBackToInvoice()}},{key:"onQuickEntry",value:function(t){t.target.blur(),this.customerForm.reset(),this.showQuickEntry=!this.showQuickEntry}},{key:"onStateChange",value:function(t){this.selectedState=t.target.value,this.geoService.fetchCitiesByState(this.selectedState),this.customerForm.controls.city_id.reset()}},{key:"saveQuickEntry",value:function(){var t,e=this;if(this.customerForm.invalid)return Object.values(this.customerForm.controls).forEach((function(t){t instanceof d.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));var n=null===(t=this.cities[this.selectedState])||void 0===t?void 0:t.find((function(t){return t.id===e.customerForm.controls.city_id.value}));this.onSelect({name:this.customerForm.controls.name.value,city:{name:null==n?void 0:n.name,state:null==n?void 0:n.state_name,state_code:null==n?void 0:n.state_code}},!0)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),i}()).\u0275fac=function(t){return new(t||at)(p.Ob(g.e),p.Ob(g.a),p.Ob(d.e),p.Ob(m.a),p.Ob(y.a),p.Ob(K.a))},at.\u0275cmp=p.Ib({type:at,selectors:[["app-ship-select-dialog"]],decls:34,vars:6,consts:[[1,"input-group","pt-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search customer...",1,"form-control",3,"input"],[1,"w-100","text-secondary","text-sm"],[1,"w-100","my-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","table-bordered"],["scope","col"],["class","w-100 text-center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[1,"flex-grow-1","bg-light","quick-entry-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],["class","py-2 mt-n4 mb-3 border-primary-1",3,"formGroup","ngSubmit",4,"ngIf"],[1,"w-100","mt-3"],[1,"w-100","text-center"],[1,"border","py-2"],[3,"click"],[1,"py-2","mt-n4","mb-3","border-primary-1",3,"formGroup","ngSubmit"],[1,"col-12","mb-3"],["for","name",1,"text-dark","text-base"],["id","name","name","name","type","text","formControlName","name",1,"form-control"],["class","form-text invalid-feedback",4,"ngIf"],["for","state",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"change"],["selected","","value",""],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","city_id",1,"text-dark","text-base"],["formControlName","city_id",1,"custom-select","form-control"],[1,"col-12"],["type","submit",1,"btn","w-100","btn-success"],[1,"form-text","invalid-feedback"],[3,"value","selected"]],template:function(t,e){1&t&&(p.Ub(0,"h3"),p.Lc(1),p.Tb(),p.Ub(2,"div",0),p.Ub(3,"div",1),p.Ub(4,"span",2),p.Pb(5,"i",3),p.Tb(),p.Tb(),p.Ub(6,"input",4),p.fc("input",(function(t){return e.searchCustomers(t)})),p.Tb(),p.Ub(7,"div",5),p.Lc(8,"Min 3 characters"),p.Tb(),p.Tb(),p.Ub(9,"div",6),p.Ub(10,"table",7),p.Ub(11,"thead"),p.Ub(12,"tr"),p.Ub(13,"th",8),p.Lc(14,"Customer list"),p.Tb(),p.Tb(),p.Tb(),p.Ub(15,"tbody"),p.Jc(16,Z,3,0,"div",9),p.Jc(17,tt,3,1,"tr",10),p.Tb(),p.Tb(),p.Ub(18,"div",11),p.Ub(19,"button",12),p.fc("click",(function(t){return e.onQuickEntry(t)})),p.Lc(20,"+ Quick entry"),p.Tb(),p.Tb(),p.Tb(),p.Jc(21,ot,25,8,"form",13),p.Ub(22,"div",6),p.Ub(23,"table",7),p.Ub(24,"thead"),p.Ub(25,"tr"),p.Ub(26,"th",8),p.Lc(27,"Most recent"),p.Tb(),p.Tb(),p.Tb(),p.Ub(28,"tbody"),p.Jc(29,rt,3,0,"div",9),p.Jc(30,ct,3,1,"tr",10),p.Tb(),p.Tb(),p.Tb(),p.Ub(31,"div",14),p.Ub(32,"button",12),p.fc("click",(function(){return e.backToInvoice()})),p.Lc(33,"Back to invoice"),p.Tb(),p.Tb()),2&t&&(p.Bb(1),p.Mc("TO"===e.data.type?"Ship to":"Ship from"),p.Bb(15),p.pc("ngIf",!(null!=e.foundCustomers&&e.foundCustomers.length)),p.Bb(1),p.pc("ngForOf",e.foundCustomers),p.Bb(4),p.pc("ngIf",e.showQuickEntry),p.Bb(8),p.pc("ngIf",!(null!=e.mostRecentsCustomers&&e.mostRecentsCustomers.length)),p.Bb(1),p.pc("ngForOf",e.mostRecentsCustomers))},directives:[a.n,a.m,d.x,d.p,d.i,d.d,d.o,d.g,d.r,d.w,O.a,d.u],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative;text-align:center}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .quick-entry-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),at);function st(t,e){1&t&&(p.Ub(0,"div",31),p.Pb(1,"mat-spinner",32),p.Tb()),2&t&&(p.Bb(1),p.pc("diameter",50))}function bt(t,e){1&t&&(p.Ub(0,"option",33),p.Lc(1,"Select driver..."),p.Tb())}function ut(t,e){if(1&t&&(p.Ub(0,"option",34),p.Ub(1,"span"),p.Lc(2),p.kc(3,"titlecase"),p.kc(4,"titlecase"),p.Tb(),p.Lc(5),p.Tb()),2&t){var n=e.$implicit,i=p.jc();p.pc("value",n.id)("selected",n.id===(null==i.invoice||null==i.invoice.driver?null:i.invoice.driver.id)),p.Bb(2),p.Oc("",p.lc(3,5,n.first_name)," ",p.lc(4,7,n.last_name),""),p.Bb(3),p.Nc(" - ",n.email," ")}}function dt(t,e){if(1&t&&(p.Ub(0,"option",34),p.Lc(1),p.Tb()),2&t){var n=e.$implicit,i=p.jc();p.pc("value",n.value)("selected",(null==i.invoice?null:i.invoice.status)&&n.value===(null==i.invoice?null:i.invoice.status)),p.Bb(1),p.Nc(" ",i.viewMode?i.parseStatus(i.invoice.status):n.label," ")}}function gt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"td",37),p.Ub(1,"button",38),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().data.onEditVehicle(t)})),p.Pb(2,"i",39),p.Tb(),p.Ub(3,"button",38),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().data.onDeleteVehicle(t)})),p.Pb(4,"i",40),p.Tb(),p.Tb()}}function vt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"td",41),p.Ub(1,"button",38),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().data.onEditVehicle(t)})),p.Pb(2,"i",42),p.Tb(),p.Tb()}}function pt(t,e){if(1&t&&(p.Ub(0,"tr"),p.Ub(1,"td"),p.Lc(2),p.Tb(),p.Ub(3,"td"),p.Lc(4),p.Tb(),p.Ub(5,"td"),p.Lc(6),p.kc(7,"currency"),p.Tb(),p.Jc(8,gt,5,0,"td",35),p.Jc(9,vt,3,0,"td",36),p.Tb()),2&t){var n=e.$implicit,i=p.jc();p.Bb(2),p.Pc("",n.year," ",n.make," ",n.model,""),p.Bb(2),p.Mc(n.vin),p.Bb(2),p.Mc(p.lc(7,7,n.amount)),p.Bb(2),p.pc("ngIf",!i.viewMode),p.Bb(1),p.pc("ngIf",i.viewMode)}}function ht(t,e){1&t&&(p.Ub(0,"div",43),p.Ub(1,"p",44),p.Lc(2,"No vehicles added"),p.Tb(),p.Tb())}function mt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",45),p.Ub(1,"button",46),p.fc("click",(function(){return p.Bc(n),p.jc().data.onAddVehicle()})),p.Lc(2,"+ Add vehicle"),p.Tb(),p.Tb()}}function ft(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",47),p.Ub(1,"div",48),p.Ub(2,"button",49),p.fc("click",(function(){return p.Bc(n),p.jc().onCancel()})),p.Lc(3,"Cancel"),p.Tb(),p.Tb(),p.Ub(4,"div",48),p.Ub(5,"button",50),p.fc("click",(function(){return p.Bc(n),p.jc().onSubmit()})),p.Lc(6,"Save"),p.Tb(),p.Tb(),p.Tb()}}function _t(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",51),p.Ub(1,"div",48),p.Ub(2,"button",49),p.fc("click",(function(){return p.Bc(n),p.jc().onCancel()})),p.Lc(3,"Back"),p.Tb(),p.Tb(),p.Tb()}}var Ot,Ct=[{value:"DRAFT",label:"Draft"},{value:"SUBMITTED_FOR_REVIEW",label:"Submitted for review"}],wt=((Ot=function(){function t(e,i,o,r,c,a,l,s){var b=this;n(this,t),this.dialogRef=e,this.data=i,this.userService=o,this.invoicesState=r,this.rateService=c,this.notificationService=a,this.invoiceService=l,this.customerService=s,this.subscriptions=[],this.statuses=Ct,this.isLoading=!1;var u=this.userService.users.subscribe((function(t){b.drivers=t})),d=this.invoicesState.selectedInvoice$.subscribe((function(t){b.invoice=t,b.viewMode="DRAFT"!==t.status&&"SUBMITTED_FOR_REVIEW"!==t.status}));this.subscriptions.push(u,d)}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.userService.fetchUsers();var e=this.customerService.getMostRecents().subscribe((function(e){t.invoicesState.setMostRecentsCustomers(e)}));this.subscriptions.push(e)}},{key:"onSelectDriver",value:function(t){this.invoicesState.setSelectedInvoice({driver:this.drivers.find((function(e){return e.id===t.target.value}))})}},{key:"onSelectStatus",value:function(t){this.invoicesState.setSelectedInvoice({status:t.target.value})}},{key:"getSubTotal",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=t.amount})),n}},{key:"getTotal",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=t.amount})),n}},{key:"getWeight",value:function(){var t,e,n=0;return null===(e=null===(t=this.invoice)||void 0===t?void 0:t.vehicles)||void 0===e||e.forEach((function(t){n+=Number(t.weight)})),n}},{key:"getDriverCommissionAmount",value:function(){var t,e,n;return this.getSubTotal()*((null!==(n=null===(e=null===(t=this.invoice)||void 0===t?void 0:t.driver)||void 0===e?void 0:e.commission)&&void 0!==n?n:0)/100)}},{key:"onSubmit",value:function(){var t,e,n,i,o,r,c,a,l,s,b,d,g,v,p=this;if((null===(t=this.invoice)||void 0===t?void 0:t.driver)&&(null===(e=this.invoice)||void 0===e?void 0:e.status)&&(null===(n=this.invoice)||void 0===n?void 0:n.bill_to)&&(null!==(o=null===(i=this.invoice)||void 0===i?void 0:i.ship_from)&&void 0!==o?o:null===(r=this.invoice)||void 0===r?void 0:r.quick_ship_from)&&(null!==(a=null===(c=this.invoice)||void 0===c?void 0:c.ship_to)&&void 0!==a?a:null===(l=this.invoice)||void 0===l?void 0:l.quick_ship_to))if(null===(b=null===(s=this.invoice)||void 0===s?void 0:s.vehicles)||void 0===b?void 0:b.length){var h={bill_to:this.invoice.bill_to.id,ship_from:null===(d=this.invoice.ship_from)||void 0===d?void 0:d.id,ship_to:null===(g=this.invoice.ship_to)||void 0===g?void 0:g.id,quick_ship_from:this.invoice.quick_ship_from,quick_ship_to:this.invoice.quick_ship_to,driver_id:this.invoice.driver.id,status:this.invoice.status,vehicles:null===(v=this.invoice.vehicles)||void 0===v?void 0:v.map((function(t){return Object(u.b)(t,["_id"])}))};this.isLoading=!0,this.invoiceService.updateInvoice(h,this.invoice.id).subscribe((function(t){p.isLoading=!1,p.data.setCurrentStep(0),p.notificationService.success("Invoice updated"),p.dialogRef.close()}),(function(t){p.notificationService.error(),p.isLoading=!1}))}else this.notificationService.error("Missed vehicles required");else this.notificationService.error("Missed fields required")}},{key:"onCancel",value:function(){this.invoicesState.resetSelectedInvoice(),this.data.setCurrentStep(0),this.dialogRef.close()}},{key:"parseStatus",value:function(t){switch(t){case"DRAFT":return"Draft";case"SUBMITTED_FOR_REVIEW":return"Submitted for review";case"SUBMITTED_TO_CUSTOMER":return"Submitted to customer";case"PAID":return"Paid";default:return"Unknown"}}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||Ot)(p.Ob(g.e),p.Ob(g.a),p.Ob(E.a),p.Ob(m.a),p.Ob(_.a),p.Ob(f.a),p.Ob(V),p.Ob(y.a))},Ot.\u0275cmp=p.Ib({type:Ot,selectors:[["app-edit-invoice-dialog"]],decls:95,vars:38,consts:[[1,"dialog-content","custom-scroll"],["class","dialog-loader",4,"ngIf"],[1,"form-group","w-100","mt-3","new-invoice-form","mb-2"],[1,"col-12","d-flex","justify-content-between","mb-3","text-xl"],[1,"col-12","mb-3"],["for","driver",1,"text-dark","text-base"],[1,"custom-select-wrapper"],[1,"custom-select","form-control",3,"disabled","change"],["selected","","disabled","","value","",4,"ngIf"],[3,"value","selected",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","status",1,"text-dark","text-base"],[1,"mt-2","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center","mb-3"],["type","button",1,"flex-shrink-0","btn","btn-primary","mr-3","cust-btn",3,"disabled","click"],[1,"bg-grey-light","flex-grow-1","h-100","p-2","rounded-lg","w-100"],[1,"col-12","d-flex","flex-column","align-items-start","flex-md-row","align-items-md-center"],[1,"w-100","mb-3","table-wrapper","table-responsive","custom-scroll"],[1,"table","table-sm","mb-0","pb-5"],["scope","col"],[4,"ngFor","ngForOf"],["class","w-100 text-center",4,"ngIf"],["class","flex-grow-1 bg-light add-vehicle-btn py-1",4,"ngIf"],[1,"w-100","bg-grey-light","p-4","rounded-lg"],[1,"row"],[1,"col-8","text-right"],[1,"col-4","text-right"],[1,"col-12","border","border-secondary","my-2",2,"opacity","0.25"],[1,"row","font-bold"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-between my-2",4,"ngIf"],["class","d-flex w-100 px-0 px-md-4 pt-4 justify-content-center my-2",4,"ngIf"],[1,"dialog-loader"],[3,"diameter"],["selected","","disabled","","value",""],[3,"value","selected"],["class","action-buttons",4,"ngIf"],["class","action-buttons justify-content-center",4,"ngIf"],[1,"action-buttons"],[3,"click"],[1,"fas","fa-edit","text-xl","mr-3"],[1,"fas","fa-trash-alt","text-xl"],[1,"action-buttons","justify-content-center"],[1,"fas","fa-eye","text-xl","mr-3"],[1,"w-100","text-center"],[1,"border","py-2"],[1,"flex-grow-1","bg-light","add-vehicle-btn","py-1"],[1,"w-100","btn","btn-outline-primary",3,"click"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-between","my-2"],[1,"col-5"],["type","button",1,"btn","w-100","btn-secondary",3,"click"],[1,"btn","w-100","btn-success",3,"click"],[1,"d-flex","w-100","px-0","px-md-4","pt-4","justify-content-center","my-2"]],template:function(t,e){if(1&t&&(p.Ub(0,"div",0),p.Jc(1,st,2,1,"div",1),p.Ub(2,"h3"),p.Lc(3),p.Tb(),p.Ub(4,"form",2),p.Ub(5,"div",3),p.Ub(6,"span"),p.Lc(7),p.Tb(),p.Ub(8,"span"),p.Lc(9),p.kc(10,"date"),p.Tb(),p.Tb(),p.Ub(11,"div",4),p.Ub(12,"label",5),p.Lc(13,"Driver"),p.Tb(),p.Ub(14,"div",6),p.Ub(15,"select",7),p.fc("change",(function(t){return e.onSelectDriver(t)})),p.Jc(16,bt,2,0,"option",8),p.Jc(17,ut,6,9,"option",9),p.Tb(),p.Pb(18,"mat-icon",10),p.Tb(),p.Tb(),p.Ub(19,"div",4),p.Ub(20,"label",11),p.Lc(21,"Status"),p.Tb(),p.Ub(22,"div",6),p.Ub(23,"select",7),p.fc("change",(function(t){return e.onSelectStatus(t)})),p.Jc(24,dt,2,3,"option",9),p.Tb(),p.Pb(25,"mat-icon",10),p.Tb(),p.Tb(),p.Ub(26,"div",12),p.Ub(27,"div",13),p.Ub(28,"button",14),p.fc("click",(function(){return e.data.onBillTo()})),p.Lc(29,"Bill To"),p.Tb(),p.Ub(30,"span",15),p.Lc(31),p.kc(32,"location"),p.Tb(),p.Tb(),p.Ub(33,"div",13),p.Ub(34,"button",14),p.fc("click",(function(){return e.data.onShipFrom()})),p.Lc(35,"Ship From"),p.Tb(),p.Ub(36,"span",15),p.Lc(37),p.kc(38,"location"),p.Tb(),p.Tb(),p.Ub(39,"div",16),p.Ub(40,"button",14),p.fc("click",(function(){return e.data.onShipTo()})),p.Lc(41,"Ship To"),p.Tb(),p.Ub(42,"span",15),p.Lc(43),p.kc(44,"location"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(45,"div",17),p.Ub(46,"table",18),p.Ub(47,"thead"),p.Ub(48,"tr"),p.Ub(49,"th",19),p.Lc(50,"Vehicle"),p.Tb(),p.Ub(51,"th",19),p.Lc(52,"Vin"),p.Tb(),p.Ub(53,"th",19),p.Lc(54,"Amount"),p.Tb(),p.Ub(55,"th",19),p.Lc(56,"Actions"),p.Tb(),p.Tb(),p.Tb(),p.Ub(57,"tbody"),p.Jc(58,pt,10,9,"tr",20),p.Tb(),p.Tb(),p.Jc(59,ht,3,0,"div",21),p.Jc(60,mt,3,0,"div",22),p.Tb(),p.Ub(61,"div",23),p.Ub(62,"div",24),p.Ub(63,"span",25),p.Lc(64,"Sub total:"),p.Tb(),p.Ub(65,"span",26),p.Lc(66),p.Tb(),p.Tb(),p.Ub(67,"div",24),p.Ub(68,"span",25),p.Lc(69,"Driver commission:"),p.Tb(),p.Ub(70,"span",26),p.Lc(71),p.Tb(),p.Tb(),p.Ub(72,"div",24),p.Ub(73,"span",25),p.Lc(74,"Driver commission amount:"),p.Tb(),p.Ub(75,"span",26),p.Lc(76),p.Tb(),p.Tb(),p.Ub(77,"div",24),p.Ub(78,"span",25),p.Lc(79,"Total units:"),p.Tb(),p.Ub(80,"span",26),p.Lc(81),p.Tb(),p.Tb(),p.Ub(82,"div",24),p.Ub(83,"span",25),p.Lc(84,"Weight:"),p.Tb(),p.Ub(85,"span",26),p.Lc(86),p.Tb(),p.Tb(),p.Pb(87,"div",27),p.Ub(88,"div",28),p.Ub(89,"span",25),p.Lc(90,"Total:"),p.Tb(),p.Ub(91,"span",26),p.Lc(92),p.Tb(),p.Tb(),p.Tb(),p.Jc(93,ft,7,0,"div",29),p.Jc(94,_t,4,0,"div",30),p.Tb()),2&t){var n=null,i=null,o=null,r=null;p.Bb(1),p.pc("ngIf",e.isLoading),p.Bb(2),p.Mc(e.viewMode?"Invoice":"Edit Invoice"),p.Bb(4),p.Nc(" Invoice #: ",null==e.invoice?null:e.invoice.number,""),p.Bb(2),p.Nc("Date: ",p.mc(10,29,null==e.invoice?null:e.invoice.date,"MM/dd/yyyy"),""),p.Bb(6),p.pc("disabled",e.viewMode),p.Bb(1),p.pc("ngIf",!(null!=e.invoice&&e.invoice.driver)),p.Bb(1),p.pc("ngForOf",e.drivers),p.Bb(6),p.pc("disabled",e.viewMode),p.Bb(1),p.pc("ngForOf",e.statuses),p.Bb(4),p.pc("disabled",e.viewMode),p.Bb(3),p.Oc(" ",null!=e.invoice&&e.invoice.bill_to?null==e.invoice?null:e.invoice.bill_to.name:"----"," ",(null==e.invoice?null:e.invoice.bill_to)&&" - "+p.lc(32,32,null==e.invoice?null:e.invoice.bill_to.city)," "),p.Bb(3),p.pc("disabled",e.viewMode),p.Bb(3),p.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))&&" - "+p.lc(38,34,null==((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from))?null:((null==e.invoice?null:e.invoice.ship_from)||(null==e.invoice?null:e.invoice.quick_ship_from)).city)," "),p.Bb(3),p.pc("disabled",e.viewMode),p.Bb(3),p.Oc(" ",(null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).name)||"----"," ",((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))&&" - "+p.lc(44,36,null==((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to))?null:((null==e.invoice?null:e.invoice.ship_to)||(null==e.invoice?null:e.invoice.quick_ship_to)).city)," "),p.Bb(15),p.pc("ngForOf",null==e.invoice?null:e.invoice.vehicles),p.Bb(1),p.pc("ngIf",!(null!=e.invoice&&null!=e.invoice.vehicles&&e.invoice.vehicles.length)),p.Bb(1),p.pc("ngIf",!e.viewMode),p.Bb(6),p.Nc("$",null==(n=e.getSubTotal())?null:n.toFixed(2),""),p.Bb(5),p.Nc("%",(null==e.invoice||null==e.invoice.driver?null:e.invoice.driver.commission)||0,""),p.Bb(5),p.Nc("$",null==(i=e.getDriverCommissionAmount())?null:i.toFixed(2),""),p.Bb(5),p.Mc((null==e.invoice||null==e.invoice.vehicles?null:e.invoice.vehicles.length)||0),p.Bb(5),p.Mc(null==(o=e.getWeight())?null:o.toFixed(2)),p.Bb(6),p.Nc("$",null==(r=e.getTotal())?null:r.toFixed(2),""),p.Bb(1),p.pc("ngIf",!e.viewMode),p.Bb(1),p.pc("ngIf",e.viewMode)}},directives:[a.n,d.x,d.p,d.q,a.m,O.a,q.b,d.r,d.w],pipes:[a.f,N,a.w,a.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px;max-height:300px;overflow-y:auto;position:relative}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:unset!important}.table-wrapper[_ngcontent-%COMP%]   .table-sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.8rem}.table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgb(var(--palette-blue-light-rgb));cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .add-vehicle-btn[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;bottom:0;z-index:10}.new-invoice-form[_ngcontent-%COMP%]{max-height:70vh;padding-bottom:1rem;overflow-y:auto}[_nghost-%COMP%]     .mat-horizontal-stepper-header{height:40px!important}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.cust-btn[_ngcontent-%COMP%]{width:100%}@media (min-width:672px){.cust-btn[_ngcontent-%COMP%]{width:110px}}"]}),Ot);function Mt(t,e){if(1&t&&(p.Ub(0,"div",28),p.Lc(1),p.Tb()),2&t){var n=p.jc();p.Bb(1),p.Nc(" ",null!=n.vehicleForm.controls.vin.errors&&n.vehicleForm.controls.vin.errors.faliedSearch?"VIN not found":"Invalid VIN"," ")}}function Pt(t,e){if(1&t&&(p.Ub(0,"option",29),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}function kt(t,e){if(1&t&&(p.Ub(0,"option",29),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}function xt(t,e){if(1&t&&(p.Ub(0,"option",29),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.pc("value",n),p.Bb(1),p.Mc(n)}}function yt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",30),p.Ub(1,"div",31),p.Ub(2,"button",32),p.fc("click",(function(){return p.Bc(n),p.jc().data.onBackToInvoice()})),p.Lc(3," Cancel "),p.Tb(),p.Tb(),p.Ub(4,"div",31),p.Ub(5,"button",33),p.Lc(6,"Save"),p.Tb(),p.Tb(),p.Tb()}}function Tt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",34),p.Ub(1,"div",31),p.Ub(2,"button",32),p.fc("click",(function(){return p.Bc(n),p.jc().data.onBackToInvoice()})),p.Lc(3,"Back"),p.Tb(),p.Tb(),p.Tb()}}var Ut,St=((Ut=function(){function t(e,i,o,r,c,a){var l=this;n(this,t),this.dialogRef=e,this.data=i,this.fb=o,this.vehicleService=r,this.invoicesState=c,this.notificationService=a,this.subscriptions=[],this.years=[],this.makes=[],this.models=[],this.viewMode=this.data.viewMode,this.buildForm();var s=this.invoicesState.currentRate$.subscribe((function(t){l.rate=t,(null==t?void 0:t.amount)&&l.vehicleForm.controls.amount.setValue(t.amount)}));this.subscriptions.push(s)}return o(t,[{key:"ngOnInit",value:function(){this.years=this.vehicleService.years,this.makes=this.vehicleService.makes,this.makes.push(this.data.vehicle.make),this.models.push(this.data.vehicle.model),this.getModels(this.data.vehicle.make)}},{key:"onSelectYear",value:function(t){}},{key:"onSelectMake",value:function(t){this.getModels(t.target.value),this.vehicleForm.controls.model.setValue("")}},{key:"getModels",value:function(t){return Object(u.a)(this,void 0,void 0,e().mark((function n(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vehicleService.getModelsByMake(t);case 2:this.models=e.sent;case 3:case"end":return e.stop()}}),n,this)})))}},{key:"buildForm",value:function(){this.vehicleForm=this.fb.group({vin:[{value:this.data.vehicle.vin,disabled:this.viewMode},[d.v.required,d.v.pattern(v.a.vin)]],year:[{value:this.data.vehicle.year,disabled:this.viewMode},[d.v.required]],make:[{value:this.data.vehicle.make,disabled:this.viewMode},[d.v.required]],model:[{value:this.data.vehicle.model,disabled:this.viewMode},[d.v.required]],amount:[{value:this.data.vehicle.amount,disabled:this.viewMode},[d.v.required]],weight:[{value:this.data.vehicle.weight,disabled:this.viewMode},[]],comments:[{value:this.data.vehicle.comments,disabled:this.viewMode},[]]})}},{key:"onSearchVin",value:function(t){return Object(u.a)(this,void 0,void 0,e().mark((function n(){var i=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vehicleForm.controls.vin.valid&&this.vehicleService.searchVin(t.target.value.toUpperCase()).then((function(t){i.vehicleSearched=t,i.makes.push(t.make),i.models.push(t.model),i.vehicleForm.controls.year.setValue(t.year),i.vehicleForm.controls.make.setValue(t.make),i.vehicleForm.controls.model.setValue(t.model),i.vehicleForm.controls.weight.setValue(t.weight)})).catch((function(t){i.vehicleSearched=null,i.vehicleForm.controls.vin.setErrors({faliedSearch:!0}),i.vehicleForm.controls.vin.markAsTouched()}));case 1:case"end":return e.stop()}}),n,this)})))}},{key:"onSubmit",value:function(){var t,e,n,i=this.vehicleForm.controls.vin;if(i.setValue(null===(t=i.value)||void 0===t?void 0:t.toUpperCase()),this.vehicleForm.invalid)return Object.values(this.vehicleForm.controls).forEach((function(t){t instanceof d.h?Object.values(t.controls).forEach((function(t){return t.markAsTouched()})):t.markAsTouched()}));try{"edit"===this.data.action?this.invoicesState.editSelectedInvoiceVehicle(this.vehicleForm.value,null===(e=this.data.vehicle)||void 0===e?void 0:e._id):this.invoicesState.editNewInvoiceVehicle(this.vehicleForm.value,null===(n=this.data.vehicle)||void 0===n?void 0:n._id)}catch(o){return this.notificationService.error(o.message)}this.data.onBackToInvoice()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||Ut)(p.Ob(g.e),p.Ob(g.a),p.Ob(d.e),p.Ob(h.a),p.Ob(m.a),p.Ob(f.a))},Ut.\u0275cmp=p.Ib({type:Ut,selectors:[["app-edit-vehicle-dialog"]],decls:58,vars:24,consts:[[1,"form-group",3,"formGroup","ngSubmit"],[1,"w-100","input-group","pt-2","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Search VIN...","formControlName","vin",1,"form-control",3,"input"],["class","form-text invalid-feedback",4,"ngIf"],[1,"w-100","mb-3"],["for","year",1,"text-dark","text-base"],[1,"custom-select-wrapper"],["formControlName","year",1,"custom-select","form-control",3,"change"],["disabled","","value",""],[3,"value",4,"ngFor","ngForOf"],["svgIcon","half-arrow-down",1,"half-arrow-icon"],["for","make",1,"text-dark","text-base"],["formControlName","make",1,"custom-select","form-control",3,"change"],["for","model",1,"text-dark","text-base"],["formControlName","model",1,"custom-select","form-control"],["for","amount",1,"text-dark","text-base"],[1,"input-group"],["type","number","placeholder","Amount...","formControlName","amount",1,"form-control"],["for","weight",1,"text-dark","text-base"],["type","number","placeholder","Weight...","formControlName","weight",1,"form-control"],[1,"w-100"],["for","comments",1,"text-dark","text-base"],["id","textarea","maxlength","256","rows","3","formControlName","comments",1,"form-control"],["class","d-flex w-100 px-4 pt-3 justify-content-between mt-3",4,"ngIf"],["class","d-flex w-100 px-4 pt-3 justify-content-center mt-3",4,"ngIf"],[1,"form-text","invalid-feedback"],[3,"value"],[1,"d-flex","w-100","px-4","pt-3","justify-content-between","mt-3"],[1,"col-5"],["type","button",1,"btn","w-100","btn-outline-secondary",3,"click"],["type","submit",1,"btn","w-100","btn-success"],[1,"d-flex","w-100","px-4","pt-3","justify-content-center","mt-3"]],template:function(t,e){1&t&&(p.Ub(0,"h3"),p.Lc(1),p.Tb(),p.Ub(2,"form",0),p.fc("ngSubmit",(function(){return e.onSubmit()})),p.Ub(3,"div",1),p.Ub(4,"div",2),p.Ub(5,"span",3),p.Pb(6,"i",4),p.Tb(),p.Tb(),p.Ub(7,"input",5),p.fc("input",(function(t){return e.onSearchVin(t)})),p.Tb(),p.Jc(8,Mt,2,1,"div",6),p.Tb(),p.Ub(9,"div",7),p.Ub(10,"label",8),p.Lc(11,"Year"),p.Tb(),p.Ub(12,"div",9),p.Ub(13,"select",10),p.fc("change",(function(t){return e.onSelectYear(t)})),p.Ub(14,"option",11),p.Lc(15,"Select year..."),p.Tb(),p.Jc(16,Pt,2,2,"option",12),p.Tb(),p.Pb(17,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(18,"div",7),p.Ub(19,"label",14),p.Lc(20,"Make"),p.Tb(),p.Ub(21,"div",9),p.Ub(22,"select",15),p.fc("change",(function(t){return e.onSelectMake(t)})),p.Ub(23,"option",11),p.Lc(24,"Select make..."),p.Tb(),p.Jc(25,kt,2,2,"option",12),p.Tb(),p.Pb(26,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(27,"div",7),p.Ub(28,"label",16),p.Lc(29,"Model"),p.Tb(),p.Ub(30,"div",9),p.Ub(31,"select",17),p.Ub(32,"option",11),p.Lc(33,"Select model..."),p.Tb(),p.Jc(34,xt,2,2,"option",12),p.Tb(),p.Pb(35,"mat-icon",13),p.Tb(),p.Tb(),p.Ub(36,"div",7),p.Ub(37,"label",18),p.Lc(38,"Amount"),p.Tb(),p.Ub(39,"div",19),p.Ub(40,"div",2),p.Ub(41,"span",3),p.Lc(42," $ "),p.Tb(),p.Tb(),p.Pb(43,"input",20),p.Tb(),p.Tb(),p.Ub(44,"div",7),p.Ub(45,"label",21),p.Lc(46,"Weight"),p.Tb(),p.Ub(47,"div",19),p.Ub(48,"div",2),p.Ub(49,"span",3),p.Lc(50," Lb "),p.Tb(),p.Tb(),p.Pb(51,"input",22),p.Tb(),p.Tb(),p.Ub(52,"div",23),p.Ub(53,"label",24),p.Lc(54,"Comments"),p.Tb(),p.Pb(55,"textarea",25),p.Tb(),p.Jc(56,yt,7,0,"div",26),p.Jc(57,Tt,4,0,"div",27),p.Tb()),2&t&&(p.Bb(1),p.Mc(e.viewMode?"Vehicle":"Edit vehicle"),p.Bb(1),p.pc("formGroup",e.vehicleForm),p.Bb(5),p.Gb("is-invalid",e.vehicleForm.controls.vin.touched&&e.vehicleForm.controls.vin.invalid)("is-valid",!!e.vehicleSearched),p.Bb(1),p.pc("ngIf",!0),p.Bb(5),p.Gb("is-invalid",e.vehicleForm.controls.year.touched&&e.vehicleForm.controls.year.invalid),p.Bb(3),p.pc("ngForOf",e.years),p.Bb(6),p.Gb("is-invalid",e.vehicleForm.controls.make.touched&&e.vehicleForm.controls.make.invalid),p.Bb(3),p.pc("ngForOf",e.makes),p.Bb(6),p.Gb("is-invalid",e.vehicleForm.controls.model.touched&&e.vehicleForm.controls.model.invalid),p.Bb(3),p.pc("ngForOf",e.models),p.Bb(9),p.Gb("is-invalid",e.vehicleForm.controls.amount.touched&&e.vehicleForm.controls.amount.invalid),p.Bb(8),p.Gb("is-invalid",e.vehicleForm.controls.weight.touched&&e.vehicleForm.controls.weight.invalid),p.Bb(4),p.Gb("is-invalid",e.vehicleForm.controls.comments.touched&&e.vehicleForm.controls.comments.invalid),p.Bb(1),p.pc("ngIf",!e.viewMode),p.Bb(1),p.pc("ngIf",e.viewMode))},directives:[d.x,d.p,d.i,d.d,d.o,d.g,a.n,d.u,d.r,d.w,a.m,O.a,d.s,d.k],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.custom-select-wrapper[_ngcontent-%COMP%]{--select-padding:12px;--select-icon-width:14px;--form-icons-color:rgb(var(--palette-primary-rgb));--form-input-background:rgb(var(--palette-grey-0-rgb));position:relative}.custom-select-wrapper[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{padding:calc(var(--select-padding) / 2) var(--select-padding);-webkit-padding-end:calc(var(--select-padding) + var(--select-icon-width));padding-inline-end:calc(var(--select-padding) + var(--select-icon-width));background:none;background-color:var(--form-input-background)}.custom-select-wrapper[_ngcontent-%COMP%]   .half-arrow-icon[_ngcontent-%COMP%]{right:var(--select-padding);top:0;pointer-events:none;height:100%;width:var(--select-icon-width);color:var(--form-icons-color);position:absolute}"]}),Ut),It=c("Espg"),Lt=c("9Ku7"),Bt=c("1kSV"),Ft=["table"];function Dt(t,e){1&t&&(p.Ub(0,"button",42),p.Lc(1,"Actions"),p.Tb())}function Et(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",14),p.fc("click",(function(){return p.Bc(n),p.jc().onSubmitToReview()})),p.Pb(1,"i",43),p.Ub(2,"span"),p.Lc(3,"Submit for review"),p.Tb(),p.Tb()}}function zt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",14),p.fc("click",(function(){return p.Bc(n),p.jc().onSubmitToQB()})),p.Pb(1,"i",43),p.Ub(2,"span"),p.Lc(3,"Submit to QB"),p.Tb(),p.Tb()}}function Rt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"button",14),p.fc("click",(function(){return p.Bc(n),p.jc().onSubmitToPaid()})),p.Pb(1,"i",43),p.Ub(2,"span"),p.Lc(3,"Submit to Paid"),p.Tb(),p.Tb()}}function jt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"th",44),p.Ub(1,"div",45),p.fc("change",(function(t){return p.Bc(n),p.jc().onSelectAll(t)})),p.Pb(2,"input",46),p.Pb(3,"label",47),p.Tb(),p.Tb()}if(2&t){var i=p.jc();p.Bb(2),p.pc("checked",i.allSelected)}}function Vt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"td",48),p.Ub(1,"div",49),p.Ub(2,"input",50),p.fc("change",(function(t){p.Bc(n);var i=e.$implicit;return p.jc().onSelectInvoice(t,i)})),p.Tb(),p.Pb(3,"label",51),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit,o=p.jc();p.Bb(2),p.pc("id",i.id)("checked",o.selectedInvoices.includes(i)),p.Bb(1),p.pc("for",i.id)}}function qt(t,e){1&t&&(p.Ub(0,"th",52),p.Lc(1,"Driver"),p.Tb())}function Nt(t,e){if(1&t&&(p.Ub(0,"td",53),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Oc(" ",null==n.driver?null:n.driver.first_name," ",null==n.driver?null:n.driver.last_name," ")}}function At(t,e){1&t&&(p.Ub(0,"th",54),p.Lc(1,"Invoice #"),p.Tb())}function Jt(t,e){if(1&t&&(p.Ub(0,"td",48),p.Lc(1),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Mc(n.number)}}function $t(t,e){1&t&&(p.Ub(0,"th",52),p.Lc(1,"Date"),p.Tb())}function Gt(t,e){if(1&t&&(p.Ub(0,"td",48),p.Lc(1),p.kc(2,"date"),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Mc(p.mc(2,1,n.date,"MM/dd/yyyy"))}}function Wt(t,e){1&t&&(p.Ub(0,"th",44),p.Lc(1,"Bill to"),p.Tb())}function Qt(t,e){if(1&t&&(p.Ub(0,"td",55),p.Lc(1),p.Pb(2,"br"),p.Lc(3),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Nc(" ",null==n.bill_to?null:n.bill_to.name," "),p.Bb(2),p.Oc(" ",null==n.bill_to||null==n.bill_to.city?null:n.bill_to.city.name,", ",null==n.bill_to||null==n.bill_to.city?null:n.bill_to.city.state_code," ")}}function Yt(t,e){1&t&&(p.Ub(0,"th",44),p.Lc(1,"Ship from"),p.Tb())}function Ht(t,e){if(1&t&&(p.Ub(0,"td",55),p.Lc(1),p.Pb(2,"br"),p.Lc(3),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Nc(" ",(null==n.ship_from?null:n.ship_from.name)||(null==n.quick_ship_from?null:n.quick_ship_from.name)," "),p.Bb(2),p.Oc(" ",(null==n.ship_from||null==n.ship_from.city?null:n.ship_from.city.name)||(null==n.quick_ship_from||null==n.quick_ship_from.city?null:n.quick_ship_from.city.name),", ",(null==n.ship_from||null==n.ship_from.city?null:n.ship_from.city.state_code)||(null==n.quick_ship_from||null==n.quick_ship_from.city?null:n.quick_ship_from.city.state_code)," ")}}function Xt(t,e){1&t&&(p.Ub(0,"th",44),p.Lc(1,"Ship to"),p.Tb())}function Kt(t,e){if(1&t&&(p.Ub(0,"td",55),p.Lc(1),p.Pb(2,"br"),p.Lc(3),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Nc(" ",(null==n.ship_to?null:n.ship_to.name)||(null==n.quick_ship_to?null:n.quick_ship_to.name)," "),p.Bb(2),p.Oc(" ",(null==n.ship_to||null==n.ship_to.city?null:n.ship_to.city.name)||(null==n.quick_ship_to||null==n.quick_ship_to.city?null:n.quick_ship_to.city.name),", ",(null==n.ship_to||null==n.ship_to.city?null:n.ship_to.city.state_code)||(null==n.quick_ship_to||null==n.quick_ship_to.city?null:n.quick_ship_to.city.state_code)," ")}}function Zt(t,e){1&t&&(p.Ub(0,"th",44),p.Lc(1,"Amount"),p.Tb())}function te(t,e){if(1&t&&(p.Ub(0,"td",48),p.Lc(1),p.kc(2,"currency"),p.Tb()),2&t){var n=e.$implicit;p.Bb(1),p.Mc(p.lc(2,1,n.total))}}function ee(t,e){1&t&&(p.Ub(0,"th",44),p.Lc(1,"Actions"),p.Tb())}function ne(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",58),p.Ub(1,"button",59),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().onEdit(t)})),p.Pb(2,"i",60),p.Tb(),p.Ub(3,"button",61),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().onDelete(t)})),p.Pb(4,"i",62),p.Tb(),p.Tb()}}function ie(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",63),p.Ub(1,"button",59),p.fc("click",(function(){p.Bc(n);var t=p.jc().$implicit;return p.jc().onEdit(t)})),p.Pb(2,"i",64),p.Tb(),p.Tb()}}function oe(t,e){if(1&t&&(p.Ub(0,"td",48),p.Jc(1,ne,5,0,"div",56),p.Jc(2,ie,3,0,"div",57),p.Tb()),2&t){var n=p.jc();p.Bb(1),p.pc("ngIf","DRAFT"==n.tab||"SUBMITTED_FOR_REVIEW"==n.tab),p.Bb(1),p.pc("ngIf","DRAFT"!=n.tab&&"SUBMITTED_FOR_REVIEW"!=n.tab)}}function re(t,e){1&t&&p.Pb(0,"tr",65)}function ce(t,e){1&t&&p.Pb(0,"tr",66)}function ae(t,e){1&t&&(p.Ub(0,"div",67),p.Lc(1," No invoices found "),p.Tb())}var le,se,be=((le=function(){function t(e,i,o,r,c,a){var l=this;n(this,t),this.dialog=e,this.dialogService=i,this.invoiceService=o,this.invoiceState=r,this.notificationService=c,this.authService=a,this.paginatorPageIndex=1,this.paginatorPageSize=12,this.subscriptions=[],this.displayedColumns=["_","driver","invoice_number","date","bill_to","ship_from","ship_to","amount","actions"],this.pageSizeOptions=[12,24,50,100],this.tab="DRAFT",this.newInvoiceCurrentStep=0,this.selectedInvoices=[],this.allSelected=!1,this.isAdmin=this.authService.isAdmin(),this.items=new b.k([]);var s=r.invoices$.subscribe((function(t){l.allSelected=!1,l.invoiceState.setAllSelectedInvoices([],!1),l.invoices=t,l.items.data=l.invoices})),u=r.selectedInvoices$.subscribe((function(t){l.selectedInvoices=t}));this.subscriptions.push(s,u)}return o(t,[{key:"ngOnInit",value:function(){this.handleFetchInvoices(this.tab,this.paginatorPageSize,this.paginatorPageIndex),this.items.filterPredicate=function(t,e){var n,i,o,r;return-1!==t.driver.first_name.toLowerCase().indexOf(e)||-1!==t.driver.last_name.toLowerCase().indexOf(e)||-1!==(null===(n=t.number)||void 0===n?void 0:n.toString().toLowerCase().indexOf(e))||-1!==(null===(i=t.bill_to)||void 0===i?void 0:i.name.toLowerCase().indexOf(e))||-1!==(null===(o=t.ship_from||t.quick_ship_from)||void 0===o?void 0:o.name.toLowerCase().indexOf(e))||-1!==(null===(r=t.ship_to||t.quick_ship_to)||void 0===r?void 0:r.name.toLowerCase().indexOf(e))||-1!==t.total.toString().toLowerCase().indexOf(e)},this.items.sortingDataAccessor=function(t,e){var n,i;switch(e){case"invoice_number":return t.number;case"date":return new Date(t.date);case"driver":return(null===(n=t.driver)||void 0===n?void 0:n.first_name)+" "+(null===(i=t.driver)||void 0===i?void 0:i.last_name);default:return t[e]}},this.items.sort=this.sort}},{key:"handlePage",value:function(t){console.log(t),this.paginatorPageSize=t.pageSize,this.handleFetchInvoices(this.tab,t.pageSize,t.pageIndex+1)}},{key:"setTable",value:function(t){this.paginatorPageIndex=1,this.allSelected=!1,this.invoiceState.setAllSelectedInvoices([],!1),this.tab=t,this.items.data=[],this.handleFetchInvoices(t,this.paginatorPageSize,this.paginatorPageIndex)}},{key:"handleFetchInvoices",value:function(t,e,n){var i=this;this.dialogService.showLoader(),this.invoiceService.fetchInvoices(t,e,n).then((function(t){i.paginatorLength=t.totalResults})).finally((function(){i.dialogService.hideLoader()}))}},{key:"onEdit",value:function(t){this.invoiceState.setSelectedInvoice(t),this.openEditDialog()}},{key:"openNewDialog",value:function(){var t=this;this.dialog.closeAll(),this.dialog.open(X,{width:"800px",disableClose:!0,data:{onBillTo:function(){return t.openBillToDialog()},onShipFrom:function(){return t.openShipSelectDialog("FROM")},onShipTo:function(){return t.openShipSelectDialog("TO")},onAddVehicle:function(){return t.openAddVehicleDialog()},onEditVehicle:function(e){return t.openEditVehicleDialog(e)},onDeleteVehicle:function(e){return t.dialogService.showConfirm({title:"Delete vehicle",msg:"Are you sure?"},(function(){t.invoiceState.deleteNewInvoiceVehicle(e._id)}))},currentStep:this.newInvoiceCurrentStep,setCurrentStep:function(e){t.newInvoiceCurrentStep=e}}})}},{key:"openEditDialog",value:function(){var t=this;this.dialog.closeAll(),this.dialog.open(wt,{width:"800px",disableClose:!0,data:{onBillTo:function(){return t.openBillToDialog("edit")},onShipFrom:function(){return t.openShipSelectDialog("FROM","edit")},onShipTo:function(){return t.openShipSelectDialog("TO","edit")},onAddVehicle:function(){return t.openAddVehicleDialog("edit")},onEditVehicle:function(e){return t.openEditVehicleDialog(e,"edit")},onDeleteVehicle:function(e){return t.dialogService.showConfirm({title:"Delete vehicle",msg:"Are you sure?"},(function(){t.invoiceState.deleteSelectedInvoiceVehicle(e._id)}))},currentStep:this.newInvoiceCurrentStep,setCurrentStep:function(e){t.newInvoiceCurrentStep=e}}})}},{key:"openBillToDialog",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";this.dialog.closeAll(),this.dialog.open(D,{width:"700px",disableClose:!0,data:{action:e,onBackToInvoice:function(){return"edit"===e?t.openEditDialog():t.openNewDialog()}}})}},{key:"openShipSelectDialog",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new";this.dialog.closeAll(),this.dialog.open(lt,{width:"700px",disableClose:!0,data:{onBackToInvoice:function(){return"edit"===n?e.openEditDialog():e.openNewDialog()},type:t,action:n}})}},{key:"openAddVehicleDialog",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new";this.dialog.closeAll(),this.dialog.open(x,{width:"700px",disableClose:!0,data:{action:e,onBackToInvoice:function(){return"edit"===e?t.openEditDialog():t.openNewDialog()}}})}},{key:"openEditVehicleDialog",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new";this.dialog.closeAll(),this.dialog.open(St,{width:"700px",disableClose:!0,data:{action:n,onBackToInvoice:function(){return"edit"===n?e.openEditDialog():e.openNewDialog()},vehicle:t,viewMode:"DRAFT"!=this.tab&&"SUBMITTED_FOR_REVIEW"!=this.tab}})}},{key:"onDelete",value:function(t){var e=this;this.dialogService.showConfirm({title:"Delete invoice",msg:"Are you sure?"},(function(){e.invoiceService.deleteInvoice(t.id).subscribe((function(t){e.notificationService.success("Invoice deleted")}))}))}},{key:"onSelectInvoice",value:function(t,e){this.allSelected=!1,this.invoiceState.setSelectedInvoices(e,t.target.checked)}},{key:"onSelectAll",value:function(t){this.allSelected=!0,this.invoiceState.setAllSelectedInvoices(this.items.filteredData,t.target.checked)}},{key:"onSubmitToReview",value:function(){var t,e=this;if((null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)&&!this.selectedInvoices.some((function(t){return"DRAFT"!==t.status}))){var n=this.selectedInvoices.map((function(t){return t.id}));this.dialogService.showLoader(),this.invoiceService.submitDraftInvoices(n).subscribe((function(t){e.notificationService.success("Invoices submitted"),e.dialogService.hideLoader()}),(function(t){e.notificationService.error(),e.dialogService.hideLoader()}))}}},{key:"onSubmitToQB",value:function(){var t,e=this;if((null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)&&!this.selectedInvoices.some((function(t){return"SUBMITTED_FOR_REVIEW"!==t.status}))){var n=this.selectedInvoices.map((function(t){return t.id}));this.dialogService.showLoader(),this.invoiceService.submitInvoicesToQB(n).subscribe((function(t){if("warning"===t.status)return e.notificationService.warning(t.msg);e.notificationService.success("Invoices submitted"),e.dialogService.hideLoader()}),(function(t){e.notificationService.error(),e.dialogService.hideLoader()}))}}},{key:"onSubmitToPaid",value:function(){var t,e=this;if((null===(t=this.selectedInvoices)||void 0===t?void 0:t.length)&&!this.selectedInvoices.some((function(t){return"SUBMITTED_TO_CUSTOMER"!==t.status}))){var n=this.selectedInvoices.map((function(t){return t.id}));this.dialogService.showLoader(),this.invoiceService.submitInvoicesToPaid(n).subscribe((function(t){e.notificationService.success("Invoices submitted"),e.dialogService.hideLoader()}),(function(t){e.notificationService.error(),e.dialogService.hideLoader()}))}}},{key:"onExportPdf",value:function(){var t=this;this.dialogService.showLoader(),this.invoiceService.exportToPdf(this.selectedInvoices).catch((function(){t.notificationService.error()})).finally((function(){t.dialogService.hideLoader()}))}},{key:"ngAfterViewInit",value:function(){this.items.sort=this.sort}},{key:"applyFilter",value:function(t){this.allSelected=!1,this.invoiceState.setAllSelectedInvoices([],!1),this.items.filter=t.trim().toLocaleLowerCase()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||le)(p.Ob(g.b),p.Ob(It.a),p.Ob(V),p.Ob(m.a),p.Ob(f.a),p.Ob(Lt.a))},le.\u0275cmp=p.Ib({type:le,selectors:[["app-invoice"]],viewQuery:function(t,e){var n;1&t&&(p.Fc(s.a,!0),p.Qc(l.a,!0),p.Fc(Ft,!0)),2&t&&(p.wc(n=p.gc())&&(e.sort=n.first),p.wc(n=p.gc())&&(e.paginator=n.first),p.wc(n=p.gc())&&(e.table=n.first))},decls:70,vars:21,consts:[[1,"px-2","px-md-5","py-3"],[1,"d-flex","flex-wrap","w-100","justify-content-between","align-items-center","mb-3"],[1,"text-dark","d-inline-block","content-title"],[1,"d-flex","content-options-bar"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text","placeholder","Filter by any field...",1,"form-control",3,"keyup"],[1,"btn","font-weight-bold","bg-blue-main","text-light","ml-3",3,"disabled","click"],["ngbDropdown","",1,"d-inline-block","ml-3"],["class","btn btn-outline-primary","ngbDropdownToggle","",4,"ngIf"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"far","fa-file-alt","mr-2"],[1,"nav-wrapper","mb-4"],[1,"nav","nav-pills","nav-fill"],[1,"nav-item","cursor-pointer",3,"click"],[1,"nav-link"],[1,"row","mb-4"],[1,"col-12","table-wrapper","table-responsive"],["mat-table","","matSort","",1,"table","table-borderless","table-striped",3,"dataSource"],["matColumnDef","_"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","driver"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","capitalize",4,"matCellDef"],["matColumnDef","invoice_number"],["mat-header-cell","","mat-sort-header","","style","white-space: nowrap",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","bill_to"],["mat-cell","","style","min-width: 155px",4,"matCellDef"],["matColumnDef","ship_from"],["matColumnDef","ship_to"],["matColumnDef","amount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","table-width text-center border py-3 mt-n3",4,"ngIf"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["ngbDropdownToggle","",1,"btn","btn-outline-primary"],[1,"far","fa-paper-plane","mr-2"],["mat-header-cell",""],[1,"custom-control","custom-checkbox",3,"change"],["id","all-check","type","checkbox",1,"custom-control-input",3,"checked"],["for","all-check",1,"custom-control-label"],["mat-cell",""],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","checked","change"],[1,"custom-control-label",3,"for"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"capitalize"],["mat-header-cell","","mat-sort-header","",2,"white-space","nowrap"],["mat-cell","",2,"min-width","155px"],["class","action-buttons",4,"ngIf"],["class","action-buttons justify-content-center",4,"ngIf"],[1,"action-buttons"],["aria-label","edit",1,"text-dark","mr-4",3,"click"],[1,"fas","fa-edit","text-xl"],["aria-label","edit",1,"text-dark",3,"click"],[1,"fas","fa-trash-alt","text-xl"],[1,"action-buttons","justify-content-center"],[1,"fas","fa-eye","text-xl"],["mat-header-row",""],["mat-row",""],[1,"table-width","text-center","border","py-3","mt-n3"]],template:function(t,e){1&t&&(p.Ub(0,"div",0),p.Ub(1,"div",1),p.Ub(2,"h1",2),p.Lc(3,"Invoices"),p.Tb(),p.Ub(4,"div",3),p.Ub(5,"div",4),p.Ub(6,"div",5),p.Ub(7,"span",6),p.Pb(8,"i",7),p.Tb(),p.Tb(),p.Ub(9,"input",8),p.fc("keyup",(function(t){return e.applyFilter(t.target.value)})),p.Tb(),p.Tb(),p.Ub(10,"button",9),p.fc("click",(function(){return e.openNewDialog()})),p.Lc(11," +Add "),p.Tb(),p.Ub(12,"div",10),p.Jc(13,Dt,2,0,"button",11),p.Ub(14,"div",12),p.Jc(15,Et,4,0,"button",13),p.Jc(16,zt,4,0,"button",13),p.Jc(17,Rt,4,0,"button",13),p.Ub(18,"button",14),p.fc("click",(function(){return e.onExportPdf()})),p.Pb(19,"i",15),p.Ub(20,"span"),p.Lc(21,"Export PDF"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(22,"div",16),p.Ub(23,"ul",17),p.Ub(24,"li",18),p.fc("click",(function(){return e.setTable("DRAFT")})),p.Ub(25,"a",19),p.Lc(26,"Driver drafts"),p.Tb(),p.Tb(),p.Ub(27,"li",18),p.fc("click",(function(){return e.setTable("SUBMITTED_FOR_REVIEW")})),p.Ub(28,"a",19),p.Lc(29,"Submitted for review"),p.Tb(),p.Tb(),p.Ub(30,"li",18),p.fc("click",(function(){return e.setTable("SUBMITTED_TO_CUSTOMER")})),p.Ub(31,"a",19),p.Lc(32,"Submitted to customers"),p.Tb(),p.Tb(),p.Ub(33,"li",18),p.fc("click",(function(){return e.setTable("PAID")})),p.Ub(34,"a",19),p.Lc(35,"Paid"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(36,"div",20),p.Ub(37,"div",21),p.Ub(38,"table",22),p.Sb(39,23),p.Jc(40,jt,4,1,"th",24),p.Jc(41,Vt,4,3,"td",25),p.Rb(),p.Sb(42,26),p.Jc(43,qt,2,0,"th",27),p.Jc(44,Nt,2,2,"td",28),p.Rb(),p.Sb(45,29),p.Jc(46,At,2,0,"th",30),p.Jc(47,Jt,2,1,"td",25),p.Rb(),p.Sb(48,31),p.Jc(49,$t,2,0,"th",27),p.Jc(50,Gt,3,4,"td",25),p.Rb(),p.Sb(51,32),p.Jc(52,Wt,2,0,"th",24),p.Jc(53,Qt,4,3,"td",33),p.Rb(),p.Sb(54,34),p.Jc(55,Yt,2,0,"th",24),p.Jc(56,Ht,4,3,"td",33),p.Rb(),p.Sb(57,35),p.Jc(58,Xt,2,0,"th",24),p.Jc(59,Kt,4,3,"td",33),p.Rb(),p.Sb(60,36),p.Jc(61,Zt,2,0,"th",24),p.Jc(62,te,3,3,"td",25),p.Rb(),p.Sb(63,37),p.Jc(64,ee,2,0,"th",24),p.Jc(65,oe,3,2,"td",25),p.Rb(),p.Jc(66,re,1,0,"tr",38),p.Jc(67,ce,1,0,"tr",39),p.Tb(),p.Jc(68,ae,2,0,"div",40),p.Ub(69,"mat-paginator",41),p.fc("page",(function(t){return e.handlePage(t)})),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Bb(10),p.pc("disabled",!e.isAdmin),p.Bb(3),p.pc("ngIf",null==e.selectedInvoices?null:e.selectedInvoices.length),p.Bb(2),p.pc("ngIf","DRAFT"===e.tab),p.Bb(1),p.pc("ngIf","SUBMITTED_FOR_REVIEW"===e.tab),p.Bb(1),p.pc("ngIf","SUBMITTED_TO_CUSTOMER"===e.tab),p.Bb(8),p.Gb("active","DRAFT"===e.tab),p.Bb(3),p.Gb("active","SUBMITTED_FOR_REVIEW"===e.tab),p.Bb(3),p.Gb("active","SUBMITTED_TO_CUSTOMER"===e.tab),p.Bb(3),p.Gb("active","PAID"===e.tab),p.Bb(4),p.pc("dataSource",e.items),p.Bb(28),p.pc("matHeaderRowDef",e.displayedColumns),p.Bb(1),p.pc("matRowDefColumns",e.displayedColumns),p.Bb(1),p.pc("ngIf",!e.items.data.length||!e.items.filteredData.length),p.Bb(1),p.pc("length",e.paginatorLength)("pageIndex",e.paginatorPageIndex-1)("pageSize",e.paginatorPageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[Bt.d,a.n,Bt.f,Bt.e,b.j,s.a,b.c,b.e,b.b,b.g,b.i,l.a,Bt.h,b.d,b.a,s.b,b.f,b.h],pipes:[a.f,a.d],styles:[".text-blue-light[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-light-rgb))}.text-blue-main[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-main-rgb))}.text-blue-dark[_ngcontent-%COMP%]{color:rgb(var(--palette-blue-dark-rgb))}.bg-grey-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-light-rgb))}.bg-grey-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-grey-5-rgb))}.bg-blue-light[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-light-rgb))}.bg-blue-main[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-main-rgb))}.bg-blue-dark[_ngcontent-%COMP%]{background-color:rgb(var(--palette-blue-dark-rgb))}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-xl[_ngcontent-%COMP%]{font-size:1.25rem}.text-2xl[_ngcontent-%COMP%]{font-size:1.5rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:500}.font-bold[_ngcontent-%COMP%]{font-weight:700}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.rounded-xl[_ngcontent-%COMP%]{border-radius:10px;overflow:hidden}.border-primary-1[_ngcontent-%COMP%]{border:1px solid rgb(var(--palette-blue-main-rgb))}.border-primary-2[_ngcontent-%COMP%]{border:2px solid rgb(var(--palette-blue-main-rgb))}.custom-scroll[_ngcontent-%COMP%]{padding-right:4px}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5em;border-radius:5px;background-color:rgb(var(--palette-grey-light-rgb))}.custom-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:5px;border:.3em solid;border-color:rgb(var(--palette-grey-5-rgb))}.table-wrapper[_ngcontent-%COMP%]{--table-header-color:rgb(var(--palette-white-rgb));--table-header-background:rgb(var(--palette-blue-main-rgb));--table-text-color:rgb(var(--palette-grey-9-rgb));--table-row-hover-background:rgb(var(--palette-blue-light-rgb));--page-background:rgb(var(--palette-white-rgb));--page-spacing:10px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:672px;background:none;border-collapse:collapse;border-radius:1em 1em 0 0;overflow:hidden}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]{min-width:370px}.table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   table.table-sm[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:var(--page-spacing)}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--table-header-color);background-color:var(--table-header-background);font-size:13px;font-weight:700}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--table-text-color);line-height:1.6;font-size:13px}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9em}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none;padding:var(--page-spacing) calc(var(--page-spacing))}@media (min-width:821px){.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:calc(var(--page-spacing) * 2)}}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:auto;transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:6px;border-bottom-left-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:6px;border-bottom-right-radius:6px}.table-wrapper[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:var(--table-row-hover-background);transition:background-color .5s}.table-wrapper[_ngcontent-%COMP%]     [mat-table] .mat-sort-header-arrow{color:var(--table-header-color)}.table-wrapper[_ngcontent-%COMP%]   .table-width[_ngcontent-%COMP%], .table-wrapper[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{min-width:672px;width:100%}.table-wrapper[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{border:none}.table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{line-height:1}.action-buttons[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;margin-top:5px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:inline-block;cursor:pointer;line-height:.8}.action-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.8rem}.nav-wrapper[_ngcontent-%COMP%]{width:100%;border:3px solid rgb(var(--palette-blue-main-rgb));border-radius:10px}.nav-wrapper[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin:-1px;font-weight:600}.custom-control.custom-checkbox[_ngcontent-%COMP%]{--default-spacing:10px;--checkbox-border-color:rgb(var(--palette-white-rgb));--checkbox-background:rgb(var(--palette-blue-main-rgb));--checkbox-color:rgb(var(--palette-white-rgb))}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]   .custom-label[_ngcontent-%COMP%]{margin-left:calc(var(--default-spacing) / 2)}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:22px;height:22px;border-radius:6px;top:0}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:22px;height:22px;top:0}.custom-control.custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{color:var(--checkbox-color);border-color:var(--checkbox-border-color);background-color:var(--checkbox-background)}"]}),le),ue=c("tyNb"),de=c("PCNd"),ge=c("7EHt"),ve=[{path:"",component:be}],pe=((se=o((function t(){n(this,t)}))).\u0275mod=p.Mb({type:se}),se.\u0275inj=p.Lb({factory:function(t){return new(t||se)},imports:[[a.c,ue.e.forChild(ve),de.a,ge.a]]}),se)}}])}();